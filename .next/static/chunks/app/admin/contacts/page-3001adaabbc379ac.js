(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[527],{568:function(e,t,a){Promise.resolve().then(a.bind(a,1294))},1294:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var s=a(7437),l=a(2265),r=a(9376),n=a(1671),c=a(9388),i=a(9322),d=a(7168),o=a(2735),x=a(9663),m=a(8867),u=a(1239),f=a(3745),h=a(4772),p=a(6040),b=a(1723),g=a(3417),j=a(9345),v=a(2369),y=a(8420),N=a(1533),w=a(2208),k=a(8893),C=a(8930),S=a(8068),Z=a(9093);let A=e=>{let{status:t}=e,a={new:{color:"bg-blue-500/20 text-blue-400",icon:b.Z,label:"New"},contacted:{color:"bg-yellow-500/20 text-yellow-400",icon:g.Z,label:"Contacted"},qualified:{color:"bg-accent-green/20 text-accent-green",icon:n.Z,label:"Qualified"},rejected:{color:"bg-accent-red/20 text-accent-red",icon:c.Z,label:"Rejected"}},l=a[t]||a.new,r=l.icon;return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ".concat(l.color),children:[(0,s.jsx)(r,{className:"w-3.5 h-3.5"}),l.label]})},T=e=>{let{status:t}=e,a={pending:{color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",label:"Pending"},approved:{color:"bg-accent-green/20 text-accent-green border-accent-green/30",label:"Approved"},rejected:{color:"bg-accent-red/20 text-accent-red border-accent-red/30",label:"Rejected"}},l=a[t]||a.pending;return(0,s.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium border ".concat(l.color),children:l.label})},_=e=>{let{type:t}=e,a={affiliate:{color:"bg-secondary-500/20 text-secondary-400 border-secondary-500/30",label:"Affiliate"},publisher:{color:"bg-secondary-500/20 text-secondary-400 border-secondary-500/30",label:"Publisher"},advertiser:{color:"bg-primary-500/20 text-primary-400 border-primary-500/30",label:"Advertiser"},influencer:{color:"bg-accent-purple/20 text-accent-purple border-accent-purple/30",label:"Influencer"},media_buyer:{color:"bg-accent-orange/20 text-accent-orange border-accent-orange/30",label:"Media Buyer"},agency:{color:"bg-accent-blue/20 text-accent-blue border-accent-blue/30",label:"Agency"}}[t]||{color:"bg-gray-500/20 text-gray-400 border-gray-500/30",label:t};return(0,s.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium border ".concat(a.color),children:a.label})},P=e=>{let{contact:t}=e;return(0,s.jsx)("div",{className:"flex items-center gap-2",children:"affiliate"===t.registration_type&&(0,s.jsx)(s.Fragment,{children:t.affiliateRegistered?(0,s.jsx)("div",{className:"flex items-center gap-1",title:"Hooplaseft: Registered",children:(0,s.jsx)(n.Z,{className:"w-4 h-4 text-accent-green"})}):t.affiliateError?(0,s.jsx)("div",{className:"flex items-center gap-1",title:"Hooplaseft: ".concat(t.affiliateError),children:(0,s.jsx)(c.Z,{className:"w-4 h-4 text-accent-red"})}):(0,s.jsx)("div",{className:"flex items-center gap-1",title:"Hooplaseft: Pending",children:(0,s.jsx)(b.Z,{className:"w-4 h-4 text-text-muted"})})})})};function I(e){let{contacts:t=[],loading:a=!1,onView:r,onEdit:n,onDelete:c,renderTypeBadge:i,renderAffiliateStatusBadge:d,renderApiStatus:o}=e,[x,m]=(0,l.useState)(""),[u,f]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[b,g]=(0,l.useState)(""),[I,R]=(0,l.useState)(null),E=t.filter(e=>{let t=!x||e.name.toLowerCase().includes(x.toLowerCase())||e.email.toLowerCase().includes(x.toLowerCase())||e.company.toLowerCase().includes(x.toLowerCase()),a=!u||e.type===u,s=!h||e.status===h,l=!b||e.affiliate_status===b;return t&&a&&s&&l});return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(S.Z,{placeholder:"Search contacts...",value:x,onChange:e=>m(e.target.value),leftIcon:(0,s.jsx)(j.Z,{className:"w-4 h-4"})})}),(0,s.jsx)("div",{className:"w-full md:w-40",children:(0,s.jsx)(Z.Z,{options:[{value:"",label:"All Types"},{value:"affiliate",label:"Affiliate"},{value:"publisher",label:"Publisher"},{value:"advertiser",label:"Advertiser"},{value:"influencer",label:"Influencer"},{value:"media_buyer",label:"Media Buyer"},{value:"agency",label:"Agency"}],value:u,onChange:e=>f(e.target.value)})}),(0,s.jsx)("div",{className:"w-full md:w-40",children:(0,s.jsx)(Z.Z,{options:[{value:"",label:"All Status"},{value:"new",label:"New"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"rejected",label:"Rejected"}],value:h,onChange:e=>p(e.target.value)})}),(0,s.jsx)("div",{className:"w-full md:w-48",children:(0,s.jsx)(Z.Z,{options:[{value:"",label:"All Affiliate Status"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}],value:b,onChange:e=>g(e.target.value)})})]}),(0,s.jsx)("div",{className:"card overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-surface-100 border-b border-surface-300",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Contact"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Company"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Type"}),t.some(e=>"affiliate"===e.registration_type)&&(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Affiliate Status"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Contact Status"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"APIs"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Date"}),(0,s.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-surface-300",children:a?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:9,className:"px-6 py-12 text-center",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3 text-text-muted",children:[(0,s.jsx)("div",{className:"w-6 h-6 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"}),"Loading contacts..."]})})}):0===E.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:9,className:"px-6 py-12 text-center text-text-muted",children:"No contacts found"})}):E.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-surface-100/50 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-500/10 flex items-center justify-center",children:(0,s.jsx)(v.Z,{className:"w-5 h-5 text-primary-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-text",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-text-muted",children:e.email})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4 text-text-muted"}),e.company]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:i?i(e.type):(0,s.jsx)(_,{type:e.type})}),t.some(e=>"affiliate"===e.registration_type)&&(0,s.jsx)("td",{className:"px-6 py-4",children:"affiliate"===e.registration_type?d?d(e.affiliate_status):(0,s.jsx)(T,{status:e.affiliate_status}):(0,s.jsx)("span",{className:"text-text-muted text-xs",children:"-"})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)(A,{status:e.status||"new"})}),(0,s.jsx)("td",{className:"px-6 py-4",children:o?o(e):(0,s.jsx)(P,{contact:e})}),(0,s.jsx)("td",{className:"px-6 py-4 text-text-muted text-sm",children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:()=>R(I===e.id?null:e.id),className:"p-2 rounded-lg hover:bg-surface-300 text-text-muted hover:text-text transition-colors",children:(0,s.jsx)(N.Z,{className:"w-4 h-4"})}),I===e.id&&(0,s.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-40 bg-surface-200 border border-surface-300 rounded-xl shadow-lg z-10 py-1",children:[(0,s.jsxs)("button",{onClick:()=>{null==r||r(e),R(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-text hover:bg-surface-300 transition-colors",children:[(0,s.jsx)(w.Z,{className:"w-4 h-4"}),"View"]}),(0,s.jsxs)("button",{onClick:()=>{null==n||n(e),R(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-text hover:bg-surface-300 transition-colors",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4"}),"Edit"]}),(0,s.jsxs)("button",{onClick:()=>{null==c||c(e),R(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-accent-red hover:bg-surface-300 transition-colors",children:[(0,s.jsx)(C.Z,{className:"w-4 h-4"}),"Delete"]})]})]})})})]},e.id))})]})})}),!a&&E.length>0&&(0,s.jsxs)("p",{className:"text-sm text-text-muted",children:["Showing ",E.length," contact",1!==E.length?"s":""]})]})}var R=a(4226),E=a(9178),F=a(4351);let q=[{value:"new",label:"New"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"rejected",label:"Rejected"}];function L(){var e,t,a,b;let g=(0,r.useRouter)(),{isAuthenticated:j,loading:v}=(0,h.Aj)(),[y,N]=(0,l.useState)([]),[w,k]=(0,l.useState)(!0),[C,S]=(0,l.useState)(null),[A,T]=(0,l.useState)(null),[_,P]=(0,l.useState)(!1),[L,D]=(0,l.useState)(""),[O,B]=(0,l.useState)(""),[U,z]=(0,l.useState)(!1),[M,H]=(0,l.useState)(null);(0,l.useEffect)(()=>{v||j||g.push("/admin/login")},[j,v,g]);let J=async()=>{try{k(!0),S(null);let e=await p.Z.getContacts();e.success?(N(e.data),H(e.stats)):S(e.message||"Failed to fetch contacts")}catch(e){console.error("Failed to fetch contacts:",e),S("Failed to load contacts")}finally{k(!1)}};(0,l.useEffect)(()=>{j&&J()},[j]);let Q=e=>{T(e),D(e.status||"new"),B(e.notes||""),P(!0)},V=async e=>{if(confirm("Are you sure you want to delete ".concat(e.name,"?")))try{let t=await p.Z.deleteContact(e.id);t.success?J():alert(t.message||"Failed to delete contact")}catch(e){console.error("Failed to delete contact:",e),alert("Failed to delete contact")}},W=async()=>{if(A){z(!0);try{let e=await p.Z.updateContact(A.id,{status:L,notes:O});e.success?(P(!1),J()):alert(e.message||"Failed to update contact")}catch(e){console.error("Failed to update contact:",e),alert("Failed to update contact")}finally{z(!1)}}},X=async()=>{if(A&&confirm("Approve ".concat(A.name," as an affiliate?"))){z(!0);try{let e=await fetch("/api/admin/contacts/".concat(A.id,"/approve-affiliate"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("adminToken"))}}),t=await e.json();t.success?(alert("Affiliate approved successfully"),P(!1),J()):alert(t.message||"Failed to approve affiliate")}catch(e){console.error("Failed to approve affiliate:",e),alert("Failed to approve affiliate")}finally{z(!1)}}},G=async()=>{if(!A)return;let e=prompt("Please enter a reason for rejection (optional):");z(!0);try{let t=await fetch("/api/admin/contacts/".concat(A.id,"/reject-affiliate"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("adminToken"))},body:JSON.stringify({reason:e})}),a=await t.json();a.success?(alert("Affiliate rejected"),P(!1),J()):alert(a.message||"Failed to reject affiliate")}catch(e){console.error("Failed to reject affiliate:",e),alert("Failed to reject affiliate")}finally{z(!1)}},K=async()=>{try{let e=await p.Z.exportContacts();if(e){let t=new Blob([e],{type:"text/csv"}),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="contacts-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(a)}}catch(e){console.error("Failed to export contacts:",e),alert("Failed to export contacts")}},Y=e=>{navigator.clipboard.writeText(e),alert("Tracking link copied to clipboard!")},$=e=>(0,s.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium border ".concat({affiliate:"bg-secondary-500/20 text-secondary-400 border-secondary-500/30",publisher:"bg-secondary-500/20 text-secondary-400 border-secondary-500/30",advertiser:"bg-primary-500/20 text-primary-400 border-primary-500/30",influencer:"bg-accent-purple/20 text-accent-purple border-accent-purple/30",media_buyer:"bg-accent-orange/20 text-accent-orange border-accent-orange/30",agency:"bg-accent-blue/20 text-accent-blue border-accent-blue/30"}[e]||"bg-gray-500/20 text-gray-400 border-gray-500/30"),children:{affiliate:"Affiliate",publisher:"Publisher",advertiser:"Advertiser",influencer:"Influencer",media_buyer:"Media Buyer",agency:"Agency"}[e]||e||"Unknown"}),ee=e=>(0,s.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium border ".concat({pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",approved:"bg-accent-green/20 text-accent-green border-accent-green/30",rejected:"bg-accent-red/20 text-accent-red border-accent-red/30"}[e]||"bg-gray-500/20 text-gray-400 border-gray-500/30"),children:{pending:"Pending",approved:"Approved",rejected:"Rejected"}[e]||(null==e?void 0:e.charAt(0).toUpperCase())+(null==e?void 0:e.slice(1))||"Unknown"}),et=e=>(0,s.jsx)("div",{className:"flex items-center gap-2",children:e.affiliateRegistered?(0,s.jsx)("div",{className:"flex items-center gap-1",title:"Hooplaseft: Registered",children:(0,s.jsx)(n.Z,{className:"w-4 h-4 text-accent-green"})}):e.affiliateError?(0,s.jsx)("div",{className:"flex items-center gap-1",title:"Hooplaseft: ".concat(e.affiliateError),children:(0,s.jsx)(c.Z,{className:"w-4 h-4 text-accent-red"})}):(0,s.jsx)("div",{className:"flex items-center gap-1",title:"Hooplaseft: Pending",children:(0,s.jsx)(i.Z,{className:"w-4 h-4 text-text-muted"})})});return v?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})}):j?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-text",children:"Contacts"}),(0,s.jsx)("p",{className:"text-text-muted",children:"Manage contact submissions from publishers and advertisers"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(R.Z,{variant:"outline",onClick:J,leftIcon:(0,s.jsx)(d.Z,{className:"w-4 h-4"}),children:"Refresh"}),(0,s.jsx)(R.Z,{variant:"outline",onClick:K,leftIcon:(0,s.jsx)(o.Z,{className:"w-4 h-4"}),children:"Export CSV"})]})]}),M&&(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)(E.Z,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-text",children:M.total}),(0,s.jsx)("div",{className:"text-sm text-text-muted",children:"Total Contacts"})]}),(0,s.jsxs)(E.Z,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-accent-green",children:(null===(e=M.affiliateStats)||void 0===e?void 0:e.pending)||0}),(0,s.jsx)("div",{className:"text-sm text-text-muted",children:"Pending Affiliates"})]}),(0,s.jsxs)(E.Z,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary-400",children:(null===(t=M.byType)||void 0===t?void 0:t.affiliate)||0}),(0,s.jsx)("div",{className:"text-sm text-text-muted",children:"Affiliates"})]}),(0,s.jsxs)(E.Z,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-secondary-400",children:(null===(a=M.byType)||void 0===a?void 0:a.advertiser)||0}),(0,s.jsx)("div",{className:"text-sm text-text-muted",children:"Advertisers"})]})]}),C&&(0,s.jsxs)("div",{className:"p-4 bg-accent-red/10 border border-accent-red/30 rounded-xl flex items-center gap-3 text-accent-red",children:[(0,s.jsx)(i.Z,{className:"w-5 h-5"}),(0,s.jsx)("p",{children:C}),(0,s.jsx)("button",{onClick:()=>S(null),className:"ml-auto hover:opacity-70",children:(0,s.jsx)(c.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)(I,{contacts:y,loading:w,onView:Q,onEdit:e=>{Q(e)},onDelete:V,renderTypeBadge:$,renderAffiliateStatusBadge:ee,renderApiStatus:et}),_&&A&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-surface-200 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-surface-300",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-text",children:"Contact Details"}),(0,s.jsx)("button",{onClick:()=>P(!1),className:"p-2 hover:bg-surface-300 rounded-lg text-text-muted hover:text-text transition-colors",children:(0,s.jsx)(c.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Name"}),(0,s.jsx)("p",{className:"text-text font-medium",children:A.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Email"}),(0,s.jsx)("p",{className:"text-text",children:A.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Company"}),(0,s.jsx)("p",{className:"text-text",children:A.company})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Type"}),$(A.type)]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Messenger"}),(0,s.jsx)("p",{className:"text-text",children:A.messenger||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Username"}),(0,s.jsx)("p",{className:"text-text",children:A.username||"Not specified"})]})]}),"affiliate"===A.registration_type&&(0,s.jsxs)("div",{className:"p-4 bg-primary-500/10 rounded-xl border border-primary-500/20",children:[(0,s.jsxs)("h3",{className:"font-semibold text-text mb-3 flex items-center gap-2",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4"}),"Affiliate Information"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Affiliate ID"}),(0,s.jsx)("p",{className:"text-text font-mono",children:A.affiliate_id||"2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Affiliate Status"}),ee(A.affiliate_status)]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Traffic Source"}),(0,s.jsx)("p",{className:"text-text capitalize",children:(null===(b=A.traffic_source)||void 0===b?void 0:b.replace(/_/g," "))||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Campaign ID"}),(0,s.jsx)("p",{className:"text-text font-mono",children:A.campaign_id||"2"})]}),A.tracking_link&&(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Tracking Link"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("code",{className:"text-sm bg-surface-100 p-2 rounded flex-1 overflow-x-auto text-text",children:A.tracking_link}),(0,s.jsx)(R.Z,{variant:"outline",size:"sm",onClick:()=>Y(A.tracking_link),leftIcon:(0,s.jsx)(m.Z,{className:"w-4 h-4"}),children:"Copy"})]})]})]})]}),A.message&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Message"}),(0,s.jsx)("p",{className:"text-text bg-surface-100 p-4 rounded-xl",children:A.message})]}),(0,s.jsxs)("div",{className:"p-4 bg-surface-100 rounded-xl",children:[(0,s.jsxs)("h3",{className:"font-semibold text-text mb-3 flex items-center gap-2",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4"}),"API Status"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Blitz API"}),et(A)]}),"affiliate"===A.registration_type&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Hooplaseft"}),A.affiliateRegistered?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Z,{className:"w-4 h-4 text-accent-green"}),(0,s.jsx)("span",{className:"text-sm text-accent-green",children:"Registered"})]}):A.affiliateError?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4 text-accent-red"}),(0,s.jsx)("span",{className:"text-sm text-accent-red",children:A.affiliateError})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4 text-text-muted"}),(0,s.jsx)("span",{className:"text-sm text-text-muted",children:"Pending"})]})]}),A.ftd&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"FTD Status"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Z,{className:"w-4 h-4 text-accent-green"}),(0,s.jsx)("span",{className:"text-sm text-accent-green",children:"FTD Detected"}),A.ftdDate&&(0,s.jsxs)("span",{className:"text-xs text-text-muted",children:["(",new Date(A.ftdDate).toLocaleDateString(),")"]})]})]})]})]}),(0,s.jsxs)("div",{className:"text-sm text-text-muted",children:["Submitted on ",new Date(A.createdAt).toLocaleString()]}),(0,s.jsxs)("div",{className:"border-t border-surface-300 pt-6 space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-text",children:"Admin Actions"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Status"}),(0,s.jsx)(Z.Z,{options:q,value:L,onChange:e=>D(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Notes"}),(0,s.jsx)(F.Z,{placeholder:"Add notes about this contact...",value:O,onChange:e=>B(e.target.value),rows:3})]}),"affiliate"===A.registration_type&&"pending"===A.affiliate_status&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h4",{className:"font-medium text-text",children:"Affiliate Actions"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)(R.Z,{variant:"outline",size:"sm",onClick:X,leftIcon:(0,s.jsx)(x.Z,{className:"w-4 h-4"}),loading:U,className:"border-accent-green/50 text-accent-green hover:bg-accent-green/10",children:"Approve Affiliate"}),(0,s.jsx)(R.Z,{variant:"outline",size:"sm",onClick:G,leftIcon:(0,s.jsx)(f.Z,{className:"w-4 h-4"}),loading:U,className:"border-accent-red/50 text-accent-red hover:bg-accent-red/10",children:"Reject Affiliate"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-surface-300",children:[(0,s.jsx)(R.Z,{variant:"ghost",onClick:()=>P(!1),children:"Cancel"}),(0,s.jsx)(R.Z,{variant:"primary",onClick:W,loading:U,children:"Save Changes"})]})]})})]}):null}},4226:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var s=a(7437),l=a(1994);let r={primary:"bg-primary-500 text-background hover:bg-primary-400 hover:shadow-gold",secondary:"bg-surface-200 text-text hover:bg-surface-300",outline:"border-2 border-primary-500 text-primary-500 hover:bg-primary-500 hover:text-background",ghost:"text-text hover:bg-surface-200"},n={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};function c(e){let{children:t,variant:a="primary",size:c="md",leftIcon:i,rightIcon:d,className:o,onClick:x,type:m="button",loading:u=!1,disabled:f,...h}=e;return(0,s.jsxs)("button",{type:m,onClick:x,disabled:f||u,className:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.W)(t)}("inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-300 ease-out","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-background","hover:-translate-y-0.5 hover:shadow-lg","active:translate-y-0 active:shadow-none",r[a],n[c],o,(f||u)&&"opacity-50 cursor-not-allowed"),...h,children:[u?(0,s.jsx)("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}):i?(0,s.jsx)("span",{className:"mr-2",children:i}):null,t,d&&(0,s.jsx)("span",{className:"ml-2",children:d})]})}},9178:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(7437),l=a(1994);function r(e){let{children:t,className:a,...r}=e;return(0,s.jsx)("div",{className:(0,l.W)("bg-surface-100/80 backdrop-blur-sm rounded-2xl border border-surface-200/50 p-6 transition-all duration-300",a),...r,children:t})}},8068:function(e,t,a){"use strict";var s=a(7437),l=a(2265),r=a(7062);let n=(0,l.forwardRef)((e,t)=>{let{label:a,type:l="text",placeholder:n,value:c,onChange:i,onBlur:d,name:o,id:x,error:m,disabled:u=!1,required:f=!1,className:h="",leftIcon:p,rightIcon:b,...g}=e,j=x||o||"input-".concat(Math.random().toString(36).substr(2,9));return(0,s.jsxs)("div",{className:"w-full",children:[a&&(0,s.jsxs)("label",{htmlFor:j,className:"block text-sm font-medium text-text mb-2",children:[a,f&&(0,s.jsx)("span",{className:"text-accent-red ml-1",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[p&&(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-text-muted",children:p}),(0,s.jsx)("input",{ref:t,type:l,id:j,name:o,placeholder:n,value:c,onChange:i,onBlur:d,disabled:u,required:f,className:(0,r.cn)("w-full px-4 py-3 bg-surface-200 border rounded-xl text-text","placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-primary-500/20",m?"border-accent-red focus:border-accent-red":"border-surface-300 focus:border-primary-500",u&&"opacity-50 cursor-not-allowed",p&&"pl-11",b&&"pr-11","transition-all duration-200",h),...g}),b&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none text-text-muted",children:b})]}),m&&(0,s.jsx)("p",{className:"mt-1 text-sm text-accent-red",children:m}),g.helpText&&!m&&(0,s.jsx)("p",{className:"mt-1 text-sm text-text-muted",children:g.helpText})]})});n.displayName="Input",t.Z=n},9093:function(e,t,a){"use strict";var s=a(7437),l=a(2265),r=a(7062),n=a(875);let c=(0,l.forwardRef)((e,t)=>{let{label:a,placeholder:l="Select an option",options:c=[],value:i,onChange:d,onBlur:o,name:x,id:m,error:u,disabled:f=!1,required:h=!1,className:p="",leftIcon:b,helpText:g,...j}=e,v=m||x||"select-".concat(Math.random().toString(36).substr(2,9));return(0,s.jsxs)("div",{className:"w-full",children:[a&&(0,s.jsxs)("label",{htmlFor:v,className:"block text-sm font-medium text-text mb-2",children:[a,h&&(0,s.jsx)("span",{className:"text-accent-red ml-1",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[b&&(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-text-muted",children:b}),(0,s.jsxs)("select",{ref:t,id:v,name:x,value:i,onChange:d,onBlur:o,disabled:f,required:h,className:(0,r.cn)("w-full px-4 py-3 bg-surface-200 border rounded-xl text-text appearance-none","cursor-pointer","focus:outline-none focus:ring-2 focus:ring-primary-500/20",u?"border-accent-red focus:border-accent-red":"border-surface-300 focus:border-primary-500",f&&"opacity-50 cursor-not-allowed",b&&"pl-11","transition-all duration-200",p),...j,children:[l&&(0,s.jsx)("option",{value:"",disabled:!0,children:l}),c.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:(0,s.jsx)(n.Z,{className:"h-5 w-5 text-text-muted"})})]}),u&&(0,s.jsx)("p",{className:"mt-1 text-sm text-accent-red",children:u}),g&&(0,s.jsx)("p",{className:"mt-1 text-sm text-text-muted",children:g})]})});c.displayName="Select",t.Z=c},4351:function(e,t,a){"use strict";var s=a(7437),l=a(2265),r=a(7062);let n=(0,l.forwardRef)((e,t)=>{let{label:a,placeholder:l,value:n,onChange:c,onBlur:i,name:d,id:o,error:x,disabled:m=!1,required:u=!1,rows:f=4,maxLength:h,className:p="",helpText:b,...g}=e,j=o||d||"textarea-".concat(Math.random().toString(36).substr(2,9));return(0,s.jsxs)("div",{className:"w-full",children:[a&&(0,s.jsxs)("label",{htmlFor:j,className:"block text-sm font-medium text-text mb-2",children:[a,u&&(0,s.jsx)("span",{className:"text-accent-red ml-1",children:"*"})]}),(0,s.jsx)("textarea",{ref:t,id:j,name:d,placeholder:l,value:n,onChange:c,onBlur:i,disabled:m,required:u,rows:f,maxLength:h,className:(0,r.cn)("w-full px-4 py-3 bg-surface-200 border rounded-xl text-text resize-none","placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-primary-500/20",x?"border-accent-red focus:border-accent-red":"border-surface-300 focus:border-primary-500",m&&"opacity-50 cursor-not-allowed","transition-all duration-200",p),...g}),h&&(0,s.jsxs)("p",{className:"mt-1 text-sm text-text-muted text-right",children:[(null==n?void 0:n.length)||0,"/",h]}),x&&(0,s.jsx)("p",{className:"mt-1 text-sm text-accent-red",children:x})]})});n.displayName="Textarea",t.Z=n},4772:function(e,t,a){"use strict";a.d(t,{Aj:function(){return i},IA:function(){return c}});var s=a(7437),l=a(2265),r=a(6040);let n=(0,l.createContext)(null);function c(e){let{children:t}=e,[a,c]=(0,l.useState)(null),[i,d]=(0,l.useState)(!0),[o,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{if(!r.Z.getToken()){d(!1);return}try{let e=await r.Z.getProfile();e.success?c(e.data):r.Z.logout()}catch(e){console.error("Auth check failed:",e),r.Z.logout()}finally{d(!1)}})()},[]);let m=(0,l.useCallback)(async(e,t)=>{x(null),d(!0);try{let a=await r.Z.login(e,t);if(a.success)return c(a.data.user),{success:!0};return x(a.message),{success:!1,message:a.message}}catch(t){let e=t.message||"Login failed";return x(e),{success:!1,message:e}}finally{d(!1)}},[]),u=(0,l.useCallback)(async(e,t,a)=>{x(null),d(!0);try{let s=await r.Z.register(e,t,a);if(s.success)return c(s.data.user),{success:!0};return x(s.message),{success:!1,message:s.message}}catch(t){let e=t.message||"Registration failed";return x(e),{success:!1,message:e}}finally{d(!1)}},[]),f=(0,l.useCallback)(()=>{r.Z.logout(),c(null),x(null)},[]),h=(0,l.useCallback)(()=>{x(null)},[]);return(0,s.jsx)(n.Provider,{value:{user:a,loading:i,error:o,isAuthenticated:!!a,login:m,register:u,logout:f,clearError:h},children:t})}function i(){let e=(0,l.useContext)(n);if(!e)throw Error("useAdmin must be used within an AdminProvider");return e}},6040:function(e,t,a){"use strict";let s=a(257).env.NEXT_PUBLIC_API_URL||"http://barracuda.marketing/api";class l{getToken(){return this.token||(this.token=localStorage.getItem("admin_token")),this.token}setToken(e){this.token=e,localStorage.setItem("admin_token",e)}clearToken(){this.token=null,localStorage.removeItem("admin_token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat(s).concat(e),l=this.getToken(),r={headers:{"Content-Type":"application/json",...l?{Authorization:"Bearer ".concat(l)}:{},...t.headers||{}},...t},n=await fetch(a,r),c=await n.json();if(!n.ok)throw Error(c.message||"API request failed");return c}async login(e,t){let a=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return a.success&&a.data.token&&this.setToken(a.data.token),a}async register(e,t,a){let s=await this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t,name:a})});return s.success&&s.data.token&&this.setToken(s.data.token),s}async getProfile(){return this.request("/auth/me")}logout(){this.clearToken()}async getContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/admin/contacts".concat(t?"?".concat(t):""))}async getContactStats(){return this.request("/admin/contacts/stats")}async getContact(e){return this.request("/admin/contacts/".concat(e))}async updateContact(e,t){return this.request("/admin/contacts/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteContact(e){return this.request("/admin/contacts/".concat(e),{method:"DELETE"})}async exportContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request("/admin/contacts/export",{method:"POST",body:JSON.stringify(e)})}async getSettings(){return this.request("/admin/settings")}async updateSettings(e){return this.request("/admin/settings",{method:"PUT",body:JSON.stringify(e)})}async getDashboard(){return this.request("/admin/settings/dashboard")}async resetSettings(){return this.request("/admin/settings/reset",{method:"POST"})}constructor(){this.token=null}}let r=new l;t.Z=r},7062:function(e,t,a){"use strict";a.d(t,{cn:function(){return l}});var s=a(1994);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.W)(t)}}},function(e){e.O(0,[30,971,117,744],function(){return e(e.s=568)}),_N_E=e.O()}]);