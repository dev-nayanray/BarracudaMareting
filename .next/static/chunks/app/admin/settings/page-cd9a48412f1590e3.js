(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[140],{4397:function(e,a,t){Promise.resolve().then(t.bind(t,8180))},8180:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return v}});var s=t(7437),i=t(2265),l=t(9376),n=t(7168),c=t(9205);let r=(0,c.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var o=t(9322),d=t(1671),m=t(9202),g=t(8335);let x=(0,c.Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var h=t(8906),u=t(4772),f=t(6040),p=t(4226),N=t(8068),j=t(9178);function v(){let e=(0,l.useRouter)(),{isAuthenticated:a,loading:t}=(0,u.Aj)(),[c,v]=(0,i.useState)({siteName:"",siteDescription:"",companyName:"",contactEmail:"",maintenanceMode:!1,allowNewRegistrations:!0,analytics:{trackingId:"",googleAnalytics:!1},notifications:{emailOnNewContact:!0,emailOnNewRegistration:!0,dailyDigest:!1},social:{telegram:"",skype:"",email:""},telegramUsername:""}),[b,w]=(0,i.useState)(!0),[Z,k]=(0,i.useState)(!1),[C,S]=(0,i.useState)(null),[M,R]=(0,i.useState)(null);(0,i.useEffect)(()=>{t||a||e.push("/admin/login")},[a,t,e]),(0,i.useEffect)(()=>{a&&(async()=>{try{w(!0),S(null);let e=await f.Z.getSettings();e.success?v({...c,...e.data}):S(e.message||"Failed to fetch settings")}catch(e){console.error("Failed to fetch settings:",e),S("Failed to load settings")}finally{w(!1)}})()},[a]);let E=(e,a)=>{let t=e.split(".");1===t.length?v(t=>({...t,[e]:a})):v(e=>({...e,[t[0]]:{...e[t[0]],[t[1]]:a}}))},D=async()=>{k(!0),S(null),R(null);try{let e=await f.Z.updateSettings(c);e.success?(R("Settings saved successfully"),v({...c,...e.data})):S(e.message||"Failed to save settings")}catch(e){console.error("Failed to save settings:",e),S("Failed to save settings")}finally{k(!1)}},O=async()=>{if(confirm("Are you sure you want to reset all settings to defaults?")){k(!0),S(null),R(null);try{let e=await f.Z.resetSettings();e.success?(v(e.data),R("Settings reset to defaults")):S(e.message||"Failed to reset settings")}catch(e){console.error("Failed to reset settings:",e),S("Failed to reset settings")}finally{k(!1)}}};return t||b?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})}):a?(0,s.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-text",children:"Settings"}),(0,s.jsx)("p",{className:"text-text-muted",children:"Manage your site configuration and preferences"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(p.Z,{variant:"outline",onClick:O,leftIcon:(0,s.jsx)(n.Z,{className:"w-4 h-4"}),children:"Reset Defaults"}),(0,s.jsx)(p.Z,{variant:"primary",onClick:D,loading:Z,leftIcon:(0,s.jsx)(r,{className:"w-4 h-4"}),children:"Save Changes"})]})]}),C&&(0,s.jsxs)("div",{className:"p-4 bg-accent-red/10 border border-accent-red/30 rounded-xl flex items-center gap-3 text-accent-red",children:[(0,s.jsx)(o.Z,{className:"w-5 h-5"}),(0,s.jsx)("p",{children:C})]}),M&&(0,s.jsxs)("div",{className:"p-4 bg-accent-green/10 border border-accent-green/30 rounded-xl flex items-center gap-3 text-accent-green",children:[(0,s.jsx)(d.Z,{className:"w-5 h-5"}),(0,s.jsx)("p",{children:M})]}),(0,s.jsxs)(j.Z,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(m.Z,{className:"w-5 h-5 text-primary-500"}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-text",children:"Site Information"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(N.Z,{label:"Site Name",value:c.siteName,onChange:e=>E("siteName",e.target.value),placeholder:"Affiiate"})}),(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(N.Z,{label:"Site Description",value:c.siteDescription,onChange:e=>E("siteDescription",e.target.value),placeholder:"Premium Casino Affiliate Network"})}),(0,s.jsx)(N.Z,{label:"Company Name",value:c.companyName,onChange:e=>E("companyName",e.target.value),placeholder:"Barracuda Marketing"}),(0,s.jsx)(N.Z,{label:"Contact Email",type:"email",value:c.contactEmail,onChange:e=>E("contactEmail",e.target.value),placeholder:"contact@affiiate.com"})]})]}),(0,s.jsxs)(j.Z,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(g.Z,{className:"w-5 h-5 text-primary-500"}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-text",children:"Social Links"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(N.Z,{label:"Telegram URL",value:c.social.telegram,onChange:e=>E("social.telegram",e.target.value),placeholder:"https://t.me/affiiate"}),(0,s.jsx)(N.Z,{label:"Telegram Username",value:c.telegramUsername,onChange:e=>E("telegramUsername",e.target.value),placeholder:"barracuda_alex"}),(0,s.jsx)("p",{className:"text-xs text-text-muted -mt-3",children:"Username for frontend display (without @)"}),(0,s.jsx)(N.Z,{label:"Skype",value:c.social.skype,onChange:e=>E("social.skype",e.target.value),placeholder:"live:affiiate"}),(0,s.jsx)(N.Z,{label:"Support Email",value:c.social.email,onChange:e=>E("social.email",e.target.value),placeholder:"support@affiiate.com"})]})]}),(0,s.jsxs)(j.Z,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(x,{className:"w-5 h-5 text-primary-500"}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-text",children:"Notifications"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(y,{label:"Email on New Contact",description:"Receive email when someone submits the contact form",enabled:c.notifications.emailOnNewContact,onToggle:()=>E("notifications.emailOnNewContact",!c.notifications.emailOnNewContact)}),(0,s.jsx)(y,{label:"Email on New Registration",description:"Receive email when a new admin registers",enabled:c.notifications.emailOnNewRegistration,onToggle:()=>E("notifications.emailOnNewRegistration",!c.notifications.emailOnNewRegistration)}),(0,s.jsx)(y,{label:"Daily Digest",description:"Receive a daily summary of activity",enabled:c.notifications.dailyDigest,onToggle:()=>E("notifications.dailyDigest",!c.notifications.dailyDigest)})]})]}),(0,s.jsxs)(j.Z,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(h.Z,{className:"w-5 h-5 text-primary-500"}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-text",children:"Site Options"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(y,{label:"Maintenance Mode",description:"Put the site in maintenance mode (show maintenance page to visitors)",enabled:c.maintenanceMode,onToggle:()=>E("maintenanceMode",!c.maintenanceMode)}),(0,s.jsx)(y,{label:"Allow New Registrations",description:"Allow new admin users to register",enabled:c.allowNewRegistrations,onToggle:()=>E("allowNewRegistrations",!c.allowNewRegistrations)})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(p.Z,{variant:"primary",size:"lg",onClick:D,loading:Z,leftIcon:(0,s.jsx)(r,{className:"w-4 h-4"}),children:"Save All Settings"})})]}):null}function y(e){let{label:a,description:t,enabled:i,onToggle:l}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-text",children:a}),(0,s.jsx)("p",{className:"text-sm text-text-muted",children:t})]}),(0,s.jsx)("button",{onClick:l,className:"relative inline-flex h-8 w-14 items-center rounded-full transition-colors ".concat(i?"bg-primary-500":"bg-surface-300"),children:(0,s.jsx)("span",{className:"inline-block h-6 w-6 transform rounded-full bg-white transition-transform ".concat(i?"translate-x-7":"translate-x-1")})})]})}},9202:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9205).Z)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},8335:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9205).Z)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},8906:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9205).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])}},function(e){e.O(0,[790,971,117,744],function(){return e(e.s=4397)}),_N_E=e.O()}]);