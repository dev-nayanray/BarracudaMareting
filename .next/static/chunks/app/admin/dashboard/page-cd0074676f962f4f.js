(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{4826:function(e,t,s){Promise.resolve().then(s.bind(s,2739))},2739:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var n=s(7437),r=s(2265),a=s(9376),i=s(1047),c=s(5805),l=s(7806),o=s(525),u=s(8420);let d=(0,s(9205).Z)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var h=s(4772),m=s(6040);function x(e){let{title:t,value:s,icon:r,trend:a,trendValue:i,color:c="primary",onClick:l}=e;return(0,n.jsx)("div",{className:"card p-6 transition-all duration-200 hover:shadow-lg ".concat(l?"cursor-pointer hover:border-primary-500/50":""),onClick:l,children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-text-muted mb-1",children:t}),(0,n.jsx)("p",{className:"text-3xl font-bold text-text",children:s}),a&&i&&(0,n.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,n.jsxs)("span",{className:"text-sm font-medium ".concat("up"===a?"text-accent-green":"text-accent-red"),children:["up"===a?"↑":"↓"," ",i]}),(0,n.jsx)("span",{className:"text-sm text-text-muted",children:"vs last month"})]})]}),(0,n.jsx)("div",{className:"p-3 rounded-xl ".concat({primary:"bg-primary-500/10 text-primary-500",green:"bg-accent-green/10 text-accent-green",red:"bg-accent-red/10 text-accent-red",purple:"bg-secondary-500/10 text-secondary-500"}[c]),children:r&&(0,n.jsx)(r,{className:"w-6 h-6"})})]})})}var f=s(9178);function p(){var e,t;let s=(0,a.useRouter)(),{isAuthenticated:p,loading:y}=(0,h.Aj)(),[g,v]=(0,r.useState)(null),[b,j]=(0,r.useState)([]),[N,k]=(0,r.useState)(!0),[w,T]=(0,r.useState)(null);return((0,r.useEffect)(()=>{y||p||s.push("/admin/login")},[p,y,s]),(0,r.useEffect)(()=>{p&&(async()=>{try{k(!0);let[e,t]=await Promise.all([m.Z.getContactStats(),m.Z.getContacts({limit:5})]);e.success&&v(e.data),t.success&&j(t.data)}catch(e){console.error("Failed to fetch dashboard data:",e),T("Failed to load dashboard data")}finally{k(!1)}})()},[p]),y||N)?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,n.jsx)("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})}):p?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-text",children:"Dashboard"}),(0,n.jsx)("p",{className:"text-text-muted",children:"Welcome back! Here's what's happening with your affiliate network."})]}),(0,n.jsxs)("button",{className:"btn-primary flex items-center gap-2",children:[(0,n.jsx)(i.Z,{className:"w-4 h-4"}),"Last 30 Days"]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,n.jsx)(x,{title:"Total Contacts",value:(null==g?void 0:g.total)||0,icon:c.Z,color:"primary",trend:"up",trendValue:"12%"}),(0,n.jsx)(x,{title:"New This Month",value:(null==g?void 0:g.thisMonth)||0,icon:l.Z,color:"green",trend:"up",trendValue:"8%"}),(0,n.jsx)(x,{title:"Publishers",value:(null==g?void 0:null===(e=g.byType)||void 0===e?void 0:e.publisher)||0,icon:o.Z,color:"purple"}),(0,n.jsx)(x,{title:"Advertisers",value:(null==g?void 0:null===(t=g.byType)||void 0===t?void 0:t.advertiser)||0,icon:u.Z,color:"primary"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)(f.Z,{className:"p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-text mb-4",children:"Contact Status Overview"}),(0,n.jsx)("div",{className:"space-y-4",children:(null==g?void 0:g.byStatus)&&Object.entries(g.byStatus).map(e=>{let[t,s]=e,r=g.total||1,a=Number(s),i=(a/r*100).toFixed(1);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-text capitalize",children:t}),(0,n.jsxs)("span",{className:"text-sm text-text-muted",children:[a," (",i,"%)"]})]}),(0,n.jsx)("div",{className:"h-2 bg-surface-200 rounded-full overflow-hidden",children:(0,n.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat("new"===t?"bg-blue-500":"contacted"===t?"bg-yellow-500":"qualified"===t?"bg-accent-green":"bg-accent-red"),style:{width:"".concat(i,"%")}})})]},t)})})]}),(0,n.jsxs)(f.Z,{className:"p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-text mb-4",children:"Quick Actions"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("button",{onClick:()=>s.push("/admin/contacts"),className:"p-4 bg-surface-200 rounded-xl hover:bg-surface-300 transition-colors text-left",children:[(0,n.jsx)(c.Z,{className:"w-8 h-8 text-primary-500 mb-3"}),(0,n.jsx)("p",{className:"font-medium text-text",children:"View All Contacts"}),(0,n.jsx)("p",{className:"text-sm text-text-muted",children:"Browse and manage contacts"})]}),(0,n.jsxs)("button",{onClick:()=>s.push("/admin/settings"),className:"p-4 bg-surface-200 rounded-xl hover:bg-surface-300 transition-colors text-left",children:[(0,n.jsx)(u.Z,{className:"w-8 h-8 text-secondary-500 mb-3"}),(0,n.jsx)("p",{className:"font-medium text-text",children:"Site Settings"}),(0,n.jsx)("p",{className:"text-sm text-text-muted",children:"Configure site options"})]})]})]})]}),(0,n.jsxs)(f.Z,{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-text",children:"Recent Contacts"}),(0,n.jsxs)("button",{onClick:()=>s.push("/admin/contacts"),className:"text-sm text-primary-500 hover:text-primary-400 flex items-center gap-1",children:["View All",(0,n.jsx)(d,{className:"w-4 h-4"})]})]}),b.length>0?(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{className:"bg-surface-100 border-b border-surface-300",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-text-muted uppercase",children:"Name"}),(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-text-muted uppercase",children:"Company"}),(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-text-muted uppercase",children:"Type"}),(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-text-muted uppercase",children:"Status"}),(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-text-muted uppercase",children:"Date"})]})}),(0,n.jsx)("tbody",{className:"divide-y divide-surface-300",children:b.map(e=>(0,n.jsxs)("tr",{className:"hover:bg-surface-100/50",children:[(0,n.jsxs)("td",{className:"px-4 py-3",children:[(0,n.jsx)("p",{className:"font-medium text-text",children:e.name}),(0,n.jsx)("p",{className:"text-sm text-text-muted",children:e.email})]}),(0,n.jsx)("td",{className:"px-4 py-3 text-text",children:e.company}),(0,n.jsx)("td",{className:"px-4 py-3",children:(0,n.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium ".concat("publisher"===e.type?"bg-secondary-500/20 text-secondary-400":"bg-primary-500/20 text-primary-400"),children:e.type})}),(0,n.jsx)("td",{className:"px-4 py-3",children:(0,n.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium ".concat("new"===(e.status||"new")?"bg-blue-500/20 text-blue-400":"contacted"===(e.status||"new")?"bg-yellow-500/20 text-yellow-400":"qualified"===(e.status||"new")?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"),children:e.status||"new"})}),(0,n.jsx)("td",{className:"px-4 py-3 text-text-muted text-sm",children:new Date(e.createdAt).toLocaleDateString()})]},e.id))})]})}):(0,n.jsx)("div",{className:"text-center py-8 text-text-muted",children:"No contacts yet. They will appear here when someone submits the contact form."})]})]}):null}},9178:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(7437),r=s(1994);function a(e){let{children:t,className:s,...a}=e;return(0,n.jsx)("div",{className:(0,r.W)("bg-surface-100/80 backdrop-blur-sm rounded-2xl border border-surface-200/50 p-6 transition-all duration-300",s),...a,children:t})}},4772:function(e,t,s){"use strict";s.d(t,{Aj:function(){return l},IA:function(){return c}});var n=s(7437),r=s(2265),a=s(6040);let i=(0,r.createContext)(null);function c(e){let{children:t}=e,[s,c]=(0,r.useState)(null),[l,o]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(!a.Z.getToken()){o(!1);return}try{let e=await a.Z.getProfile();e.success?c(e.data):a.Z.logout()}catch(e){console.error("Auth check failed:",e),a.Z.logout()}finally{o(!1)}})()},[]);let h=(0,r.useCallback)(async(e,t)=>{d(null),o(!0);try{let s=await a.Z.login(e,t);if(s.success)return c(s.data.user),{success:!0};return d(s.message),{success:!1,message:s.message}}catch(t){let e=t.message||"Login failed";return d(e),{success:!1,message:e}}finally{o(!1)}},[]),m=(0,r.useCallback)(async(e,t,s)=>{d(null),o(!0);try{let n=await a.Z.register(e,t,s);if(n.success)return c(n.data.user),{success:!0};return d(n.message),{success:!1,message:n.message}}catch(t){let e=t.message||"Registration failed";return d(e),{success:!1,message:e}}finally{o(!1)}},[]),x=(0,r.useCallback)(()=>{a.Z.logout(),c(null),d(null)},[]),f=(0,r.useCallback)(()=>{d(null)},[]);return(0,n.jsx)(i.Provider,{value:{user:s,loading:l,error:u,isAuthenticated:!!s,login:h,register:m,logout:x,clearError:f},children:t})}function l(){let e=(0,r.useContext)(i);if(!e)throw Error("useAdmin must be used within an AdminProvider");return e}},6040:function(e,t,s){"use strict";let n=s(257).env.NEXT_PUBLIC_API_URL||"http://barracuda.marketing/api";class r{getToken(){return this.token||(this.token=localStorage.getItem("admin_token")),this.token}setToken(e){this.token=e,localStorage.setItem("admin_token",e)}clearToken(){this.token=null,localStorage.removeItem("admin_token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(n).concat(e),r=this.getToken(),a={headers:{"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{},...t.headers||{}},...t},i=await fetch(s,a),c=await i.json();if(!i.ok)throw Error(c.message||"API request failed");return c}async login(e,t){let s=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return s.success&&s.data.token&&this.setToken(s.data.token),s}async register(e,t,s){let n=await this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t,name:s})});return n.success&&n.data.token&&this.setToken(n.data.token),n}async getProfile(){return this.request("/auth/me")}logout(){this.clearToken()}async getContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/admin/contacts".concat(t?"?".concat(t):""))}async getContactStats(){return this.request("/admin/contacts/stats")}async getContact(e){return this.request("/admin/contacts/".concat(e))}async updateContact(e,t){return this.request("/admin/contacts/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteContact(e){return this.request("/admin/contacts/".concat(e),{method:"DELETE"})}async exportContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request("/admin/contacts/export",{method:"POST",body:JSON.stringify(e)})}async getSettings(){return this.request("/admin/settings")}async updateSettings(e){return this.request("/admin/settings",{method:"PUT",body:JSON.stringify(e)})}async getDashboard(){return this.request("/admin/settings/dashboard")}async resetSettings(){return this.request("/admin/settings/reset",{method:"POST"})}constructor(){this.token=null}}let a=new r;t.Z=a},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var n=s(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),i=e=>{let t=a(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,n.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:u="",children:d,iconNode:h,...m}=e;return(0,n.createElement)("svg",{ref:t,...o,width:r,height:r,stroke:s,strokeWidth:i?24*Number(a)/Number(r):a,className:c("lucide",u),...!d&&!l(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let s=(0,n.forwardRef)((s,a)=>{let{className:l,...o}=s;return(0,n.createElement)(u,{ref:a,iconNode:t,className:c("lucide-".concat(r(i(e))),"lucide-".concat(e),l),...o})});return s.displayName=i(e),s}},8420:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},525:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},7806:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},257:function(e,t,s){"use strict";var n,r;e.exports=(null==(n=s.g.process)?void 0:n.env)&&"object"==typeof(null==(r=s.g.process)?void 0:r.env)?s.g.process:s(4227)},4227:function(e){!function(){var t={229:function(e){var t,s,n,r=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{s="function"==typeof clearTimeout?clearTimeout:i}catch(e){s=i}}();var l=[],o=!1,u=-1;function d(){o&&n&&(o=!1,n.length?l=n.concat(l):u=-1,l.length&&h())}function h(){if(!o){var e=c(d);o=!0;for(var t=l.length;t;){for(n=l,l=[];++u<t;)n&&n[u].run();u=-1,t=l.length}n=null,o=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===i||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function x(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];l.push(new m(e,t)),1!==l.length||o||c(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},s={};function n(e){var r=s[e];if(void 0!==r)return r.exports;var a=s[e]={exports:{}},i=!0;try{t[e](a,a.exports,n),i=!1}finally{i&&delete s[e]}return a.exports}n.ab="//";var r=n(229);e.exports=r}()},1994:function(e,t,s){"use strict";function n(){for(var e,t,s=0,n="";s<arguments.length;)(e=arguments[s++])&&(t=function e(t){var s,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t){if(Array.isArray(t))for(s=0;s<t.length;s++)t[s]&&(n=e(t[s]))&&(r&&(r+=" "),r+=n);else for(s in t)t[s]&&(r&&(r+=" "),r+=s)}return r}(e))&&(n&&(n+=" "),n+=t);return n}s.d(t,{W:function(){return n}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=4826)}),_N_E=e.O()}]);