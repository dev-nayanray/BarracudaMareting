(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{4826:function(e,t,s){Promise.resolve().then(s.bind(s,2739))},2739:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(7437),n=s(2265),r=s(9376),c=s(1047),i=s(5805),l=s(7806),o=s(525),d=s(8420);let u=(0,s(9205).Z)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var m=s(4772),h=s(6040);function x(e){let{title:t,value:s,icon:n,trend:r,trendValue:c,color:i="primary",onClick:l}=e;return(0,a.jsx)("div",{className:"card p-6 transition-all duration-200 hover:shadow-lg ".concat(l?"cursor-pointer hover:border-primary-500/50":""),onClick:l,children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-text-muted mb-1",children:t}),(0,a.jsx)("p",{className:"text-3xl font-bold text-text",children:s}),r&&c&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium ".concat("up"===r?"text-accent-green":"text-accent-red"),children:["up"===r?"↑":"↓"," ",c]}),(0,a.jsx)("span",{className:"text-sm text-text-muted",children:"vs last month"})]})]}),(0,a.jsx)("div",{className:"p-3 rounded-xl ".concat({primary:"bg-primary-500/10 text-primary-500",green:"bg-accent-green/10 text-accent-green",red:"bg-accent-red/10 text-accent-red",purple:"bg-secondary-500/10 text-secondary-500"}[i]),children:n&&(0,a.jsx)(n,{className:"w-6 h-6"})})]})})}var p=s(9178);function f(){var e,t;let s=(0,r.useRouter)(),{isAuthenticated:f,loading:y}=(0,m.Aj)(),[g,v]=(0,n.useState)(null),[b,j]=(0,n.useState)([]),[N,k]=(0,n.useState)(!0),[w,C]=(0,n.useState)(null);return((0,n.useEffect)(()=>{y||f||s.push("/admin/login")},[f,y,s]),(0,n.useEffect)(()=>{f&&(async()=>{try{k(!0);let[e,t]=await Promise.all([h.Z.getContactStats(),h.Z.getContacts({limit:5})]);e.success&&v(e.data),t.success&&j(t.data)}catch(e){console.error("Failed to fetch dashboard data:",e),C("Failed to load dashboard data")}finally{k(!1)}})()},[f]),y||N)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})}):f?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-text",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-text-muted",children:"Welcome back! Here's what's happening with your affiliate network."})]}),(0,a.jsxs)("button",{className:"btn-primary flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),"Last 30 Days"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(x,{title:"Total Contacts",value:(null==g?void 0:g.total)||0,icon:i.Z,color:"primary",trend:"up",trendValue:"12%"}),(0,a.jsx)(x,{title:"New This Month",value:(null==g?void 0:g.thisMonth)||0,icon:l.Z,color:"green",trend:"up",trendValue:"8%"}),(0,a.jsx)(x,{title:"Publishers",value:(null==g?void 0:null===(e=g.byType)||void 0===e?void 0:e.publisher)||0,icon:o.Z,color:"purple"}),(0,a.jsx)(x,{title:"Advertisers",value:(null==g?void 0:null===(t=g.byType)||void 0===t?void 0:t.advertiser)||0,icon:d.Z,color:"primary"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(p.Z,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-text mb-4",children:"Contact Status Overview"}),(0,a.jsx)("div",{className:"space-y-4",children:(null==g?void 0:g.byStatus)&&Object.entries(g.byStatus).map(e=>{let[t,s]=e,n=g.total||1,r=Number(s),c=(r/n*100).toFixed(1);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-text capitalize",children:t}),(0,a.jsxs)("span",{className:"text-sm text-text-muted",children:[r," (",c,"%)"]})]}),(0,a.jsx)("div",{className:"h-2 bg-surface-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat("new"===t?"bg-blue-500":"contacted"===t?"bg-yellow-500":"qualified"===t?"bg-accent-green":"bg-accent-red"),style:{width:"".concat(c,"%")}})})]},t)})})]}),(0,a.jsxs)(p.Z,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-text mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>s.push("/admin/contacts"),className:"p-4 bg-surface-200 rounded-xl hover:bg-surface-300 transition-colors text-left",children:[(0,a.jsx)(i.Z,{className:"w-8 h-8 text-primary-500 mb-3"}),(0,a.jsx)("p",{className:"font-medium text-text",children:"View All Contacts"}),(0,a.jsx)("p",{className:"text-sm text-text-muted",children:"Browse and manage contacts"})]}),(0,a.jsxs)("button",{onClick:()=>s.push("/admin/settings"),className:"p-4 bg-surface-200 rounded-xl hover:bg-surface-300 transition-colors text-left",children:[(0,a.jsx)(d.Z,{className:"w-8 h-8 text-secondary-500 mb-3"}),(0,a.jsx)("p",{className:"font-medium text-text",children:"Site Settings"}),(0,a.jsx)("p",{className:"text-sm text-text-muted",children:"Configure site options"})]})]})]})]}),(0,a.jsxs)(p.Z,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-text",children:"Recent Contacts"}),(0,a.jsxs)("button",{onClick:()=>s.push("/admin/contacts"),className:"text-sm text-primary-500 hover:text-primary-400 flex items-center gap-1",children:["View All",(0,a.jsx)(u,{className:"w-4 h-4"})]})]}),b.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-surface-100 border-b border-surface-300",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-text-muted uppercase",children:"Name"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-text-muted uppercase",children:"Company"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-text-muted uppercase",children:"Type"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-text-muted uppercase",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-text-muted uppercase",children:"Date"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-surface-300",children:b.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-surface-100/50",children:[(0,a.jsxs)("td",{className:"px-4 py-3",children:[(0,a.jsx)("p",{className:"font-medium text-text",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-text-muted",children:e.email})]}),(0,a.jsx)("td",{className:"px-4 py-3 text-text",children:e.company}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium ".concat("publisher"===e.type?"bg-secondary-500/20 text-secondary-400":"bg-primary-500/20 text-primary-400"),children:e.type})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium ".concat("new"===(e.status||"new")?"bg-blue-500/20 text-blue-400":"contacted"===(e.status||"new")?"bg-yellow-500/20 text-yellow-400":"qualified"===(e.status||"new")?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"),children:e.status||"new"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-text-muted text-sm",children:new Date(e.createdAt).toLocaleDateString()})]},e.id))})]})}):(0,a.jsx)("div",{className:"text-center py-8 text-text-muted",children:"No contacts yet. They will appear here when someone submits the contact form."})]})]}):null}},9178:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7437),n=s(1994);function r(e){let{children:t,className:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.W)("bg-surface-100/80 backdrop-blur-sm rounded-2xl border border-surface-200/50 p-6 transition-all duration-300",s),...r,children:t})}},4772:function(e,t,s){"use strict";s.d(t,{Aj:function(){return l},IA:function(){return i}});var a=s(7437),n=s(2265),r=s(6040);let c=(0,n.createContext)(null);function i(e){let{children:t}=e,[s,i]=(0,n.useState)(null),[l,o]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{if(!r.Z.getToken()){o(!1);return}try{let e=await r.Z.getProfile();e.success?i(e.data):r.Z.logout()}catch(e){console.error("Auth check failed:",e),r.Z.logout()}finally{o(!1)}})()},[]);let m=(0,n.useCallback)(async(e,t)=>{u(null),o(!0);try{let s=await r.Z.login(e,t);if(!s.success)return u(s.message),{success:!1,message:s.message};{let e=s.data.user||s.data;return i(e),{success:!0}}}catch(t){let e=t.message||"Login failed";return u(e),{success:!1,message:e}}finally{o(!1)}},[]),h=(0,n.useCallback)(async(e,t,s)=>{u(null),o(!0);try{let a=await r.Z.register(e,t,s);if(a.success)return i(a.data.user),{success:!0};return u(a.message),{success:!1,message:a.message}}catch(t){let e=t.message||"Registration failed";return u(e),{success:!1,message:e}}finally{o(!1)}},[]),x=(0,n.useCallback)(()=>{r.Z.logout(),i(null),u(null)},[]),p=(0,n.useCallback)(()=>{u(null)},[]);return(0,a.jsx)(c.Provider,{value:{user:s,loading:l,error:d,isAuthenticated:!!s,login:m,register:h,logout:x,clearError:p},children:t})}function l(){let e=(0,n.useContext)(c);if(!e)throw Error("useAdmin must be used within an AdminProvider");return e}},6040:function(e,t,s){"use strict";class a{getToken(){return this.token||(this.token=localStorage.getItem("admin_token")),this.token}setToken(e){this.token=e,localStorage.setItem("admin_token",e)}clearToken(){this.token=null,localStorage.removeItem("admin_token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=window.location.origin,a="".concat(s).concat(e),n=this.getToken(),r={headers:{"Content-Type":"application/json",...n?{Authorization:"Bearer ".concat(n)}:{},...t.headers||{}},...t};try{let e=await fetch(a,r),t=await e.json();if(!e.ok)throw Error(t.message||"API request failed");return t}catch(e){throw console.error("API request error:",e),e}}async login(e,t){let s=await this.request("/api/admin/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return s.success&&s.data.token&&this.setToken(s.data.token),s}async register(e,t,s){return this.login(e,t)}async getProfile(){if(!this.getToken())throw Error("Not authenticated");try{let e=await this.request("/api/admin/auth/profile");if(e.success)return e;throw Error(e.message||"Invalid token")}catch(e){throw console.error("Profile validation failed:",e.message),this.clearToken(),Error("Not authenticated")}}logout(){this.clearToken()}async getContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/admin/contacts".concat(t?"?".concat(t):""))}async getContactStats(){return this.request("/api/admin/contacts/stats")}async getContact(e){return this.request("/api/admin/contacts/".concat(e))}async updateContact(e,t){return this.request("/api/admin/contacts/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteContact(e){return this.request("/api/admin/contacts/".concat(e),{method:"DELETE"})}async exportContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request("/api/admin/contacts",{method:"POST",body:JSON.stringify(e)})}async getConversions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/admin/conversions".concat(t?"?".concat(t):""))}async getConversionStats(){return this.request("/api/admin/conversions/stats")}constructor(){this.token=null}}let n=new a;t.Z=n},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var a=s(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),c=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:c,className:d="",children:u,iconNode:m,...h}=e;return(0,a.createElement)("svg",{ref:t,...o,width:n,height:n,stroke:s,strokeWidth:c?24*Number(r)/Number(n):r,className:i("lucide",d),...!u&&!l(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:l,...o}=s;return(0,a.createElement)(d,{ref:r,iconNode:t,className:i("lucide-".concat(n(c(e))),"lucide-".concat(e),l),...o})});return s.displayName=c(e),s}},8420:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},525:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},7806:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},1994:function(e,t,s){"use strict";function a(){for(var e,t,s=0,a="";s<arguments.length;)(e=arguments[s++])&&(t=function e(t){var s,a,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t))for(s=0;s<t.length;s++)t[s]&&(a=e(t[s]))&&(n&&(n+=" "),n+=a);else for(s in t)t[s]&&(n&&(n+=" "),n+=s)}return n}(e))&&(a&&(a+=" "),a+=t);return a}s.d(t,{W:function(){return a}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=4826)}),_N_E=e.O()}]);