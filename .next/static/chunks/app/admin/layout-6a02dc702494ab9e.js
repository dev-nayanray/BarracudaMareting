(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{1716:function(e,t,a){Promise.resolve().then(a.bind(a,7830))},7830:function(e,t,a){"use strict";a.d(t,{default:function(){return v}});var n=a(7437),s=a(2265),r=a(9376),i=a(4772),c=a(7648),o=a(9205);let l=(0,o.Z)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var u=a(5805),d=a(8896);let h=(0,o.Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=a(8420),f=a(407),g=a(2451);let x=(0,o.Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var y=a(4226);let p=[{name:"Dashboard",href:"/admin/dashboard",icon:l},{name:"Contacts",href:"/admin/contacts",icon:u.Z},{name:"Conversions",href:"/admin/conversions",icon:d.Z},{name:"Settings",href:"/admin/settings",icon:h}];function b(e){var t;let{collapsed:a,onToggle:s}=e,o=(0,r.usePathname)(),{user:l,logout:u}=(0,i.Aj)();return(0,n.jsxs)("aside",{className:"fixed left-0 top-0 h-full bg-surface-200 border-r border-surface-300 z-40 transition-all duration-300 ".concat(a?"w-20":"w-64"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 border-b border-surface-300",children:[(0,n.jsxs)(c.default,{href:"/admin/dashboard",className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-primary-500 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,n.jsx)(m.Z,{className:"w-6 h-6 text-black"})}),!a&&(0,n.jsx)("span",{className:"font-display font-bold text-xl text-text",children:"Barracuda"})]}),(0,n.jsx)("button",{onClick:s,className:"p-2 rounded-lg hover:bg-surface-300 transition-colors text-text-muted hover:text-text",children:a?(0,n.jsx)(f.Z,{className:"w-5 h-5"}):(0,n.jsx)(g.Z,{className:"w-5 h-5"})})]}),(0,n.jsx)("nav",{className:"p-4 space-y-2",children:p.map(e=>{let t=o===e.href||o.startsWith(e.href+"/");return(0,n.jsxs)(c.default,{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ".concat(t?"bg-primary-500 text-black":"text-text-muted hover:text-text hover:bg-surface-300"),children:[(0,n.jsx)(e.icon,{className:"w-5 h-5 flex-shrink-0 ".concat(t?"text-black":"")}),!a&&(0,n.jsx)("span",{className:"font-medium",children:e.name})]},e.name)})}),(0,n.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-surface-300",children:[l&&(0,n.jsxs)("div",{className:"flex items-center gap-3 ".concat(a?"justify-center":""),children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-500/20 flex items-center justify-center flex-shrink-0",children:(0,n.jsx)("span",{className:"text-primary-500 font-bold",children:(null===(t=l.name)||void 0===t?void 0:t.charAt(0).toUpperCase())||"A"})}),!a&&(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"font-medium text-text truncate",children:l.name}),(0,n.jsx)("p",{className:"text-sm text-text-muted truncate",children:l.email})]})]}),(0,n.jsx)(y.Z,{variant:"ghost",size:"sm",onClick:u,className:"w-full mt-3 ".concat(a?"px-0 justify-center":""),leftIcon:(0,n.jsx)(x,{className:"w-4 h-4"}),children:!a&&"Logout"})]})]})}function k(e){let{children:t}=e,a=(0,r.usePathname)(),c=(0,r.useRouter)(),{isAuthenticated:o,loading:l}=(0,i.Aj)(),[u,d]=(0,s.useState)(!1),h="/admin/login"===a;return((0,s.useEffect)(()=>{!l&&(o||h?o&&h&&c.push("/admin/dashboard"):c.push("/admin/login"))},[o,l,h,c]),l&&!h)?(0,n.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,n.jsx)("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})}):h?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,n.jsx)(b,{collapsed:u,onToggle:()=>d(!u)}),(0,n.jsx)("main",{className:"min-h-screen transition-all duration-300 ".concat(u?"ml-20":"ml-64"," p-6"),children:t})]})}function v(e){let{children:t}=e;return(0,n.jsx)(i.IA,{children:(0,n.jsx)(k,{children:t})})}},4226:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var n=a(7437),s=a(1994);let r={primary:"bg-primary-500 text-background hover:bg-primary-400 hover:shadow-gold",secondary:"bg-surface-200 text-text hover:bg-surface-300",outline:"border-2 border-primary-500 text-primary-500 hover:bg-primary-500 hover:text-background",ghost:"text-text hover:bg-surface-200"},i={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};function c(e){let{children:t,variant:a="primary",size:c="md",leftIcon:o,rightIcon:l,className:u,onClick:d,type:h="button",loading:m=!1,disabled:f,...g}=e;return(0,n.jsxs)("button",{type:h,onClick:d,disabled:f||m,className:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.W)(t)}("inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-300 ease-out","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-background","hover:-translate-y-0.5 hover:shadow-lg","active:translate-y-0 active:shadow-none",r[a],i[c],u,(f||m)&&"opacity-50 cursor-not-allowed"),...g,children:[m?(0,n.jsx)("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}):o?(0,n.jsx)("span",{className:"mr-2",children:o}):null,t,l&&(0,n.jsx)("span",{className:"ml-2",children:l})]})}},4772:function(e,t,a){"use strict";a.d(t,{Aj:function(){return o},IA:function(){return c}});var n=a(7437),s=a(2265),r=a(6040);let i=(0,s.createContext)(null);function c(e){let{children:t}=e,[a,c]=(0,s.useState)(null),[o,l]=(0,s.useState)(!0),[u,d]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{if(!r.Z.getToken()){l(!1);return}try{let e=await r.Z.getProfile();e.success?c(e.data):r.Z.logout()}catch(e){console.error("Auth check failed:",e),r.Z.logout()}finally{l(!1)}})()},[]);let h=(0,s.useCallback)(async(e,t)=>{d(null),l(!0);try{let a=await r.Z.login(e,t);if(!a.success)return d(a.message),{success:!1,message:a.message};{let e=a.data.user||a.data;return c(e),{success:!0}}}catch(t){let e=t.message||"Login failed";return d(e),{success:!1,message:e}}finally{l(!1)}},[]),m=(0,s.useCallback)(async(e,t,a)=>{d(null),l(!0);try{let n=await r.Z.register(e,t,a);if(n.success)return c(n.data.user),{success:!0};return d(n.message),{success:!1,message:n.message}}catch(t){let e=t.message||"Registration failed";return d(e),{success:!1,message:e}}finally{l(!1)}},[]),f=(0,s.useCallback)(()=>{r.Z.logout(),c(null),d(null)},[]),g=(0,s.useCallback)(()=>{d(null)},[]);return(0,n.jsx)(i.Provider,{value:{user:a,loading:o,error:u,isAuthenticated:!!a,login:h,register:m,logout:f,clearError:g},children:t})}function o(){let e=(0,s.useContext)(i);if(!e)throw Error("useAdmin must be used within an AdminProvider");return e}},6040:function(e,t,a){"use strict";class n{getToken(){return this.token||(this.token=localStorage.getItem("admin_token")),this.token}setToken(e){this.token=e,localStorage.setItem("admin_token",e)}clearToken(){this.token=null,localStorage.removeItem("admin_token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=window.location.origin,n="".concat(a).concat(e),s=this.getToken(),r={headers:{"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{},...t.headers||{}},...t};try{let e=await fetch(n,r),t=await e.json();if(!e.ok)throw Error(t.message||"API request failed");return t}catch(e){throw console.error("API request error:",e),e}}async login(e,t){let a=await this.request("/api/admin/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return a.success&&a.data.token&&this.setToken(a.data.token),a}async register(e,t,a){return this.login(e,t)}async getProfile(){if(!this.getToken())throw Error("Not authenticated");try{let e=await this.request("/api/admin/auth/profile");if(e.success)return e;throw Error(e.message||"Invalid token")}catch(e){throw console.error("Profile validation failed:",e.message),this.clearToken(),Error("Not authenticated")}}logout(){this.clearToken()}async getContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/admin/contacts".concat(t?"?".concat(t):""))}async getContactStats(){return this.request("/api/admin/contacts/stats")}async getContact(e){return this.request("/api/admin/contacts/".concat(e))}async updateContact(e,t){return this.request("/api/admin/contacts/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteContact(e){return this.request("/api/admin/contacts/".concat(e),{method:"DELETE"})}async exportContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request("/api/admin/contacts",{method:"POST",body:JSON.stringify(e)})}async getConversions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/admin/conversions".concat(t?"?".concat(t):""))}async getConversionStats(){return this.request("/api/admin/conversions/stats")}constructor(){this.token=null}}let s=new n;t.Z=s},8420:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(9205).Z)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]])}},function(e){e.O(0,[977,971,117,744],function(){return e(e.s=1716)}),_N_E=e.O()}]);