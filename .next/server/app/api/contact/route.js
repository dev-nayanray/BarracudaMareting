"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/contact/route";
exports.ids = ["app/api/contact/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontact%2Froute&page=%2Fapi%2Fcontact%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontact%2Froute.ts&appDir=C%3A%5CUsers%5CUSER%5CDesktop%5CBarracudaMareting%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDesktop%5CBarracudaMareting&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontact%2Froute&page=%2Fapi%2Fcontact%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontact%2Froute.ts&appDir=C%3A%5CUsers%5CUSER%5CDesktop%5CBarracudaMareting%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDesktop%5CBarracudaMareting&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_USER_Desktop_BarracudaMareting_app_api_contact_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/contact/route.ts */ \"(rsc)/./app/api/contact/route.ts\");\n\r\n\r\n\r\n\r\n// We inject the nextConfigOutput here so that we can use them in the route\r\n// module.\r\nconst nextConfigOutput = \"\"\r\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\r\n    definition: {\r\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\r\n        page: \"/api/contact/route\",\r\n        pathname: \"/api/contact\",\r\n        filename: \"route\",\r\n        bundlePath: \"app/api/contact/route\"\r\n    },\r\n    resolvedPagePath: \"C:\\\\Users\\\\USER\\\\Desktop\\\\BarracudaMareting\\\\app\\\\api\\\\contact\\\\route.ts\",\r\n    nextConfigOutput,\r\n    userland: C_Users_USER_Desktop_BarracudaMareting_app_api_contact_route_ts__WEBPACK_IMPORTED_MODULE_3__\r\n});\r\n// Pull out the exports that we need to expose from the module. This should\r\n// be eliminated when we've moved the other routes to the new format. These\r\n// are used to hook into the route.\r\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\r\nconst originalPathname = \"/api/contact/route\";\r\nfunction patchFetch() {\r\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\r\n        serverHooks,\r\n        staticGenerationAsyncStorage\r\n    });\r\n}\r\n\r\n\r\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb250YWN0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjb250YWN0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY29udGFjdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNVU0VSJTVDRGVza3RvcCU1Q0JhcnJhY3VkYU1hcmV0aW5nJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNVU0VSJTVDRGVza3RvcCU1Q0JhcnJhY3VkYU1hcmV0aW5nJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3QjtBQUNyRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIO0FBQ3ZIO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZmZpaWF0ZS1mcm9udGVuZC8/NGUyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xyXG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xyXG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XHJcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxVU0VSXFxcXERlc2t0b3BcXFxcQmFycmFjdWRhTWFyZXRpbmdcXFxcYXBwXFxcXGFwaVxcXFxjb250YWN0XFxcXHJvdXRlLnRzXCI7XHJcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxyXG4vLyBtb2R1bGUuXHJcbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXHJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xyXG4gICAgZGVmaW5pdGlvbjoge1xyXG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXHJcbiAgICAgICAgcGFnZTogXCIvYXBpL2NvbnRhY3Qvcm91dGVcIixcclxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NvbnRhY3RcIixcclxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxyXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jb250YWN0L3JvdXRlXCJcclxuICAgIH0sXHJcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFVTRVJcXFxcRGVza3RvcFxcXFxCYXJyYWN1ZGFNYXJldGluZ1xcXFxhcHBcXFxcYXBpXFxcXGNvbnRhY3RcXFxccm91dGUudHNcIixcclxuICAgIG5leHRDb25maWdPdXRwdXQsXHJcbiAgICB1c2VybGFuZFxyXG59KTtcclxuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXHJcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxyXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxyXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcclxuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jb250YWN0L3JvdXRlXCI7XHJcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XHJcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xyXG4gICAgICAgIHNlcnZlckhvb2tzLFxyXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XHJcblxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontact%2Froute&page=%2Fapi%2Fcontact%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontact%2Froute.ts&appDir=C%3A%5CUsers%5CUSER%5CDesktop%5CBarracudaMareting%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDesktop%5CBarracudaMareting&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/contact/route.ts":
/*!**********************************!*\
  !*** ./app/api/contact/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./lib/mongodb.ts\");\n/* harmony import */ var _lib_private_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/private-api */ \"(rsc)/./lib/private-api.ts\");\n\n\n\n// Hooplaseft API Configuration\nconst HOOPLASEFT_CONFIG = {\n    baseUrl: \"https://hooplaseft.com/api/v3\",\n    goalRegistration: \"5\",\n    goalDeposit: \"6\",\n    defaultHash: \"eb20d583f46d5dc303e251607e04d240\" // Default hash if not provided\n};\n// Helper function to generate a unique click hash (sub1)\n// This creates a 32-character hex string that Hooplaseft expects\nfunction generateClickHash() {\n    // Generate a random 16-byte hex string (32 characters)\n    const bytes = new Uint8Array(16);\n    if (typeof crypto !== \"undefined\" && crypto.getRandomValues) {\n        crypto.getRandomValues(bytes);\n    } else {\n        // Fallback for environments without crypto.getRandomValues\n        for(let i = 0; i < 16; i++){\n            bytes[i] = Math.floor(Math.random() * 256);\n        }\n    }\n    return Array.from(bytes).map((b)=>b.toString(16).padStart(2, \"0\")).join(\"\");\n}\n// Helper function to send Hooplaseft goal postback\nasync function sendHooplaseftPostback(goalId, clickId, affiliateId, hash, params = {}) {\n    try {\n        const urlParams = new URLSearchParams({\n            hash: hash,\n            click_id: clickId,\n            affiliate_id: affiliateId,\n            ...params\n        });\n        const url = `${HOOPLASEFT_CONFIG.baseUrl}/goal/${goalId}?${urlParams.toString()}`;\n        console.log(`ðŸŽ¯ Sending Hooplaseft Goal #${goalId} postback:`);\n        console.log(`   URL: ${url}`);\n        console.log(`   Click ID: ${clickId}`);\n        console.log(`   Affiliate ID: ${affiliateId}`);\n        console.log(`   Hash: ${hash}`);\n        const response = await fetch(url, {\n            method: \"GET\",\n            headers: {\n                \"User-Agent\": \"Next.js Affiliate API\",\n                \"Accept\": \"application/json\"\n            }\n        });\n        const text = await response.text();\n        console.log(`âœ… Hooplaseft Goal #${goalId} response (${response.status}):`, text.substring(0, 300));\n        return {\n            success: response.ok,\n            message: text,\n            statusCode: response.status\n        };\n    } catch (error) {\n        console.error(`âŒ Hooplaseft Goal #${goalId} error:`, error.message);\n        return {\n            success: false,\n            message: error.message,\n            statusCode: 500\n        };\n    }\n}\n// Helper function to get click_id from Hooplaseft by calling the offer URL\nasync function getHooplaseftClickId(affiliateId, urlId, params = {}) {\n    try {\n        // Build the offer URL that will redirect and give us a click_id\n        const urlParams = new URLSearchParams({\n            affiliate_id: affiliateId,\n            url_id: urlId,\n            ...params\n        });\n        const offerUrl = `${HOOPLASEFT_CONFIG.baseUrl}/offer/2?${urlParams.toString()}`;\n        console.log(`ðŸŽ¯ Calling Hooplaseft offer URL to get click_id:`);\n        console.log(`   URL: ${offerUrl}`);\n        // Follow the redirect to get the click_id\n        const response = await fetch(offerUrl, {\n            method: \"GET\",\n            headers: {\n                \"User-Agent\": \"Next.js Affiliate API\",\n                \"Accept\": \"application/json\"\n            },\n            redirect: \"follow\"\n        });\n        // Extract click_id from the final URL\n        const finalUrl = response.url;\n        console.log(`âœ… Hooplaseft redirect URL: ${finalUrl}`);\n        // Try to extract click_id from URL parameters\n        const urlObj = new URL(finalUrl);\n        const clickId = urlObj.searchParams.get(\"click_id\") || urlObj.searchParams.get(\"affiliate_id\") || urlId;\n        console.log(`   Extracted click_id: ${clickId}`);\n        return {\n            success: true,\n            clickId,\n            message: \"Click ID obtained from Hooplaseft\"\n        };\n    } catch (error) {\n        console.error(`âŒ Failed to get click_id from Hooplaseft:`, error.message);\n        return {\n            success: false,\n            clickId: urlId,\n            message: error.message\n        };\n    }\n}\nasync function POST(request) {\n    try {\n        const { db } = await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__.connectToDatabase)();\n        const contactsCollection = (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__.getContactsCollection)(db);\n        const postbacksCollection = (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__.getPostbacksCollection)(db);\n        const conversionsCollection = (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__.getConversionsCollection)(db);\n        const body = await request.json();\n        const { name, email, type, affiliate_id, url_id, sub1, sub2, sub3, company, messenger, username, message, trackingSource, deposit_amount, sale_amount } = body;\n        console.log(\"\\n========== CONTACT FORM SUBMISSION ==========\");\n        console.log(\"Email:\", email);\n        console.log(\"Type:\", type);\n        console.log(\"Affiliate ID:\", affiliate_id);\n        console.log(\"URL ID (click_id):\", url_id);\n        console.log(\"Sub1:\", sub1);\n        console.log(\"Deposit Amount:\", deposit_amount);\n        console.log(\"==============================================\\n\");\n        // -------------------------------\n        // Validation\n        // -------------------------------\n        if (!email || !type) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: \"Email and type are required.\"\n            }, {\n                status: 400\n            });\n        }\n        // -------------------------------\n        // Check for duplicate email (atomic upsert)\n        // -------------------------------\n        const existingContact = await contactsCollection.findOne({\n            email\n        });\n        if (existingContact) {\n            console.log(\"âš ï¸ Duplicate email:\", email);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: \"This email has already been registered.\"\n            }, {\n                status: 409\n            });\n        }\n        // -------------------------------\n        // Prepare contact data\n        // -------------------------------\n        const contactData = {\n            name: name || \"\",\n            email,\n            company: company || \"\",\n            type,\n            messenger: messenger || undefined,\n            username: username || undefined,\n            message: message || undefined,\n            affiliate_id: affiliate_id || undefined,\n            url_id: url_id || undefined,\n            sub1: sub1 || undefined,\n            sub2: sub2 || undefined,\n            sub3: sub3 || undefined,\n            tracking_source: trackingSource || \"contact_form\",\n            status: \"new\",\n            affiliate_status: type === \"affiliate\" ? \"pending\" : undefined,\n            affiliateRegistered: false,\n            ftd: false,\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        // -------------------------------\n        // Save contact to MongoDB (atomic upsert)\n        // -------------------------------\n        const result = await contactsCollection.findOneAndUpdate({\n            email\n        }, {\n            $setOnInsert: contactData\n        }, {\n            upsert: true,\n            returnDocument: \"after\"\n        });\n        const isNewContact = !!result?.createdAt && result.createdAt >= new Date(Date.now() - 1000);\n        if (!isNewContact) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: \"This email has already been registered.\"\n            }, {\n                status: 409\n            });\n        }\n        console.log(\"âœ… Contact saved to MongoDB:\", result?._id);\n        // -------------------------------\n        // Automatic Registration and FTD for ALL user types\n        // (Triggered for EVERY submission when type is provided)\n        // -------------------------------\n        if (type) {\n            const effectiveAffiliateId = affiliate_id || \"2\";\n            // Generate a unique hash for this registration if not provided from URL\n            // This is the KEY fix: Get a valid hash from Hooplaseft instead of generating random ones\n            const hashPattern = /^[a-f0-9]{32,}$/i;\n            let effectiveHash;\n            let effectiveClickId;\n            if (sub1 && hashPattern.test(sub1)) {\n                // Use the hash from URL if it's a valid hash\n                effectiveHash = sub1;\n                effectiveClickId = sub1;\n                console.log(`ðŸŽ¯ Using hash from URL: ${effectiveHash}`);\n            } else {\n                // Call Hooplaseft offer URL to get a valid click with hash\n                // This is the KEY fix: Get a real hash from Hooplaseft instead of generating random ones\n                console.log(`ðŸŽ¯ No valid sub1 hash, calling Hooplaseft to create click...`);\n                const clickResult = await _lib_private_api__WEBPACK_IMPORTED_MODULE_2__.ClicksAPI.createClickAndGetHash(effectiveAffiliateId, url_id || \"2\");\n                if (clickResult.success && clickResult.hash) {\n                    effectiveHash = clickResult.hash;\n                    effectiveClickId = clickResult.clickId || clickResult.hash;\n                    console.log(`ðŸŽ¯ Got valid hash from Hooplaseft: ${effectiveHash}`);\n                } else {\n                    // Fallback to generated hash if API call fails\n                    effectiveHash = generateClickHash();\n                    effectiveClickId = effectiveHash;\n                    console.log(`ðŸŽ¯ Hooplaseft API failed, using generated hash: ${effectiveHash}`);\n                }\n            }\n            console.log(`ðŸŽ¯ Using dynamic click_id: ${effectiveClickId} (sub1: ${sub1}, url_id: ${url_id})`);\n            console.log(`ðŸŽ¯ Using hash: ${effectiveHash}`);\n            // 1. Send Registration Postback (Goal #5)\n            console.log(\"\\uD83C\\uDFAF Sending Hooplaseft Registration Postback (Goal #5)\");\n            const registrationResult = await sendHooplaseftPostback(HOOPLASEFT_CONFIG.goalRegistration, effectiveClickId, effectiveAffiliateId, effectiveHash, {\n                sub1: effectiveClickId,\n                sub2: sub2 || \"\",\n                sub3: sub3 || \"\",\n                goal_type: \"registration\",\n                name: encodeURIComponent(name || \"\"),\n                email: encodeURIComponent(email),\n                company: encodeURIComponent(company || \"\")\n            });\n            console.log(`   Registration postback success: ${registrationResult.success}`);\n            // 2. Save registration conversion (atomic upsert)\n            await conversionsCollection.findOneAndUpdate({\n                click_id: effectiveClickId,\n                goal_id: HOOPLASEFT_CONFIG.goalRegistration\n            }, {\n                $setOnInsert: {\n                    click_id: effectiveClickId,\n                    affiliate_id: effectiveAffiliateId,\n                    goal_id: HOOPLASEFT_CONFIG.goalRegistration,\n                    goal_type: \"registration\",\n                    offer_id: \"2\",\n                    amount: 0,\n                    sale_amount: undefined,\n                    status: registrationResult.success ? \"approved\" : \"pending\",\n                    sub1: effectiveClickId,\n                    sub2: sub2 || undefined,\n                    sub3: sub3 || undefined,\n                    hash: effectiveHash,\n                    metadata: {\n                        name,\n                        email,\n                        company,\n                        user_type: type,\n                        postbackResponse: registrationResult.message,\n                        postbackSuccess: registrationResult.success\n                    },\n                    createdAt: new Date()\n                },\n                $set: {\n                    updatedAt: new Date()\n                }\n            }, {\n                upsert: true\n            });\n            console.log(\"âœ… Registration conversion saved\");\n            // 3. Update contact based on postback result\n            if (registrationResult.success) {\n                await contactsCollection.updateOne({\n                    _id: result?._id\n                }, {\n                    $set: {\n                        affiliateRegistered: true,\n                        updatedAt: new Date()\n                    }\n                });\n                console.log(\"âœ… Updated contact affiliateRegistered to true\");\n            }\n            // 4. Auto-complete FTD - ALWAYS do this for all registrations\n            const depositAmount = deposit_amount || 100;\n            await contactsCollection.updateOne({\n                _id: result?._id\n            }, {\n                $set: {\n                    ftd: true,\n                    ftd_date: new Date(),\n                    ftd_amount: depositAmount,\n                    updatedAt: new Date()\n                }\n            });\n            console.log(\"âœ… Auto-completed FTD for contact (ftd=true, ftd_amount=\" + depositAmount + \")\");\n            // 5. Send Deposit Postback (Goal #6) for FTD\n            console.log(\"\\uD83C\\uDFAF Sending Hooplaseft Deposit Postback (Goal #6)\");\n            const depositResult = await sendHooplaseftPostback(HOOPLASEFT_CONFIG.goalDeposit, effectiveClickId, effectiveAffiliateId, effectiveHash, {\n                sub1: effectiveClickId,\n                sub2: sub2 || \"\",\n                sub3: sub3 || \"\",\n                goal_type: \"deposit\",\n                deposit_amount: depositAmount.toString(),\n                sale_amount: (sale_amount || depositAmount).toString()\n            });\n            console.log(`   Deposit postback success: ${depositResult.success}`);\n            // 6. Save deposit conversion (atomic upsert)\n            await conversionsCollection.findOneAndUpdate({\n                click_id: effectiveClickId,\n                goal_id: HOOPLASEFT_CONFIG.goalDeposit\n            }, {\n                $setOnInsert: {\n                    click_id: effectiveClickId,\n                    affiliate_id: effectiveAffiliateId,\n                    goal_id: HOOPLASEFT_CONFIG.goalDeposit,\n                    goal_type: \"deposit\",\n                    offer_id: \"2\",\n                    amount: depositAmount,\n                    sale_amount: sale_amount || depositAmount,\n                    status: depositResult.success ? \"approved\" : \"pending\",\n                    sub1: effectiveClickId,\n                    sub2: sub2 || undefined,\n                    sub3: sub3 || undefined,\n                    hash: effectiveHash,\n                    metadata: {\n                        name,\n                        email,\n                        company,\n                        user_type: type,\n                        postbackResponse: depositResult.message,\n                        postbackSuccess: depositResult.success\n                    },\n                    createdAt: new Date()\n                },\n                $set: {\n                    updatedAt: new Date()\n                }\n            }, {\n                upsert: true\n            });\n            console.log(\"âœ… Deposit conversion saved\");\n            // 7. Save to postbacks collection (atomic upsert)\n            await postbacksCollection.findOneAndUpdate({\n                click_id: effectiveClickId,\n                goal: \"registration\"\n            }, {\n                $setOnInsert: {\n                    click_id: effectiveClickId,\n                    affiliate_id: effectiveAffiliateId,\n                    offer_id: undefined,\n                    goal: \"registration\",\n                    amount: undefined,\n                    sale_amount: undefined,\n                    status: \"pending\",\n                    sub1: effectiveClickId,\n                    sub2: sub2 || undefined,\n                    sub3: sub3 || undefined,\n                    hash: effectiveHash,\n                    createdAt: new Date()\n                },\n                $set: {\n                    updatedAt: new Date()\n                }\n            }, {\n                upsert: true\n            });\n            console.log(\"âœ… Registration postback saved\");\n            // 8. Save deposit postback\n            await postbacksCollection.findOneAndUpdate({\n                click_id: effectiveClickId,\n                goal: \"deposit\"\n            }, {\n                $setOnInsert: {\n                    click_id: effectiveClickId,\n                    affiliate_id: effectiveAffiliateId,\n                    offer_id: undefined,\n                    goal: \"deposit\",\n                    amount: depositAmount,\n                    sale_amount: sale_amount || depositAmount,\n                    status: depositResult.success ? \"approved\" : \"pending\",\n                    sub1: effectiveClickId,\n                    sub2: sub2 || undefined,\n                    sub3: sub3 || undefined,\n                    hash: effectiveHash,\n                    createdAt: new Date()\n                },\n                $set: {\n                    updatedAt: new Date()\n                }\n            }, {\n                upsert: true\n            });\n            console.log(\"âœ… Deposit postback saved\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: type === \"affiliate\" ? \"Affiliate application submitted successfully.\" : \"Registration completed successfully.\",\n                data: {\n                    affiliateApplied: type === \"affiliate\",\n                    affiliatePosted: true,\n                    isAffiliate: type === \"affiliate\",\n                    affiliateRegistered: registrationResult.success,\n                    ftd: true,\n                    ftd_amount: depositAmount,\n                    registrationStatus: registrationResult.success ? \"approved\" : \"pending\",\n                    depositStatus: depositResult.success ? \"approved\" : \"pending\",\n                    userType: type,\n                    clickId: effectiveClickId,\n                    affiliateId: effectiveAffiliateId,\n                    sub1: effectiveClickId,\n                    hash: effectiveHash,\n                    note: type === \"affiliate\" ? \"Your application is under review. You will receive dashboard access within 24 hours.\" : \"Thank you for registering. Our team will contact you within 24 hours.\"\n                }\n            });\n        }\n        // -------------------------------\n        // Manual Deposit Postback (if deposit_amount provided)\n        // -------------------------------\n        if (type === \"affiliate\" && affiliate_id && url_id && deposit_amount && deposit_amount > 0) {\n            console.log(\"\\uD83C\\uDFAF Sending Deposit Postback (Goal #6)\");\n            // Extract hash from sub1 if it looks like a hash\n            const hashPattern = /^[a-f0-9]{32,}$/i;\n            const effectiveHash = sub1 && hashPattern.test(sub1) ? sub1 : HOOPLASEFT_CONFIG.defaultHash;\n            const depositResult = await sendHooplaseftPostback(HOOPLASEFT_CONFIG.goalDeposit, url_id, affiliate_id, effectiveHash, {\n                sub1: sub1 || \"\",\n                sub2: sub2 || \"\",\n                sub3: sub3 || \"\",\n                goal_type: \"deposit\",\n                deposit_amount: deposit_amount.toString(),\n                sale_amount: (sale_amount || deposit_amount).toString()\n            });\n            // Save deposit conversion (atomic upsert)\n            await conversionsCollection.findOneAndUpdate({\n                click_id: url_id,\n                goal_id: HOOPLASEFT_CONFIG.goalDeposit\n            }, {\n                $setOnInsert: {\n                    click_id: url_id,\n                    affiliate_id: affiliate_id,\n                    goal_id: HOOPLASEFT_CONFIG.goalDeposit,\n                    goal_type: \"deposit\",\n                    offer_id: \"2\",\n                    amount: deposit_amount,\n                    sale_amount: sale_amount || deposit_amount,\n                    status: depositResult.success ? \"approved\" : \"pending\",\n                    sub1: sub1 || undefined,\n                    sub2: sub2 || undefined,\n                    sub3: sub3 || undefined,\n                    hash: effectiveHash,\n                    metadata: {\n                        name,\n                        email,\n                        company\n                    },\n                    createdAt: new Date()\n                },\n                $set: {\n                    updatedAt: new Date()\n                }\n            }, {\n                upsert: true\n            });\n            // Update contact FTD status\n            if (depositResult.success) {\n                await contactsCollection.updateOne({\n                    _id: result?._id\n                }, {\n                    $set: {\n                        ftd: true,\n                        ftd_date: new Date(),\n                        ftd_amount: deposit_amount,\n                        updatedAt: new Date()\n                    }\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"Deposit postback sent successfully.\",\n                data: {\n                    affiliateApplied: true,\n                    ftd: depositResult.success,\n                    ftd_amount: deposit_amount,\n                    hash: effectiveHash\n                }\n            });\n        }\n        // -------------------------------\n        // Normal user registration\n        // -------------------------------\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: \"Registration successful. Our team will contact you within 24 hours.\",\n            data: {\n                isAffiliate: false,\n                posted: true\n            }\n        });\n    } catch (error) {\n        console.error(\"Registration API error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDVEUsU0FBUztnQkFDVDRFLE1BQU07b0JBQ0pDLGtCQUFrQjtvQkFDbEJyQyxLQUFLa0MsY0FBYzVFLE9BQU87b0JBQzFCMkUsWUFBWTFDO29CQUNaakQsTUFBTXdFO2dCQUNSO1lBQ0Y7UUFDRjtRQUVBLGtDQUFrQztRQUNsQywyQkFBMkI7UUFDM0Isa0NBQWtDO1FBQ2xDLE9BQU92RyxxREFBWUEsQ0FBQ3FFLElBQUksQ0FBQztZQUN2QnRCLFNBQVM7WUFDVEUsU0FBUztZQUNUNEUsTUFBTTtnQkFBRUcsYUFBYTtnQkFBT0ssUUFBUTtZQUFLO1FBQzNDO0lBRUYsRUFBRSxPQUFPbEYsT0FBWTtRQUNuQmIsUUFBUWEsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekMsT0FBT25ELHFEQUFZQSxDQUFDcUUsSUFBSSxDQUN0QjtZQUFFdEIsU0FBUztZQUFPRSxTQUFTO1FBQXdCLEdBQ25EO1lBQUVKLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZmaWlhdGUtZnJvbnRlbmQvLi9hcHAvYXBpL2NvbnRhY3Qvcm91dGUudHM/Y2ZmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBjb25uZWN0VG9EYXRhYmFzZSwgZ2V0Q29udGFjdHNDb2xsZWN0aW9uLCBnZXRQb3N0YmFja3NDb2xsZWN0aW9uLCBnZXRDb252ZXJzaW9uc0NvbGxlY3Rpb24sIENvbnRhY3QsIFBvc3RiYWNrLCBDb252ZXJzaW9uIH0gZnJvbSAnQC9saWIvbW9uZ29kYic7XHJcbmltcG9ydCB7IFByaXZhdGVBUEksIEdPQUxfVFlQRVMsIENsaWNrc0FQSSB9IGZyb20gJ0AvbGliL3ByaXZhdGUtYXBpJztcclxuXHJcbi8vIEhvb3BsYXNlZnQgQVBJIENvbmZpZ3VyYXRpb25cclxuY29uc3QgSE9PUExBU0VGVF9DT05GSUcgPSB7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vaG9vcGxhc2VmdC5jb20vYXBpL3YzJyxcclxuICBnb2FsUmVnaXN0cmF0aW9uOiAnNScsICAvLyBSZWdpc3RyYXRpb24gR29hbFxyXG4gIGdvYWxEZXBvc2l0OiAnNicsICAgICAgIC8vIERlcG9zaXQgR29hbFxyXG4gIGRlZmF1bHRIYXNoOiAnZWIyMGQ1ODNmNDZkNWRjMzAzZTI1MTYwN2UwNGQyNDAnICAvLyBEZWZhdWx0IGhhc2ggaWYgbm90IHByb3ZpZGVkXHJcbn07XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgYSB1bmlxdWUgY2xpY2sgaGFzaCAoc3ViMSlcclxuLy8gVGhpcyBjcmVhdGVzIGEgMzItY2hhcmFjdGVyIGhleCBzdHJpbmcgdGhhdCBIb29wbGFzZWZ0IGV4cGVjdHNcclxuZnVuY3Rpb24gZ2VuZXJhdGVDbGlja0hhc2goKTogc3RyaW5nIHtcclxuICAvLyBHZW5lcmF0ZSBhIHJhbmRvbSAxNi1ieXRlIGhleCBzdHJpbmcgKDMyIGNoYXJhY3RlcnMpXHJcbiAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheSgxNik7XHJcbiAgaWYgKHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMpIHtcclxuICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYnl0ZXMpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBGYWxsYmFjayBmb3IgZW52aXJvbm1lbnRzIHdpdGhvdXQgY3J5cHRvLmdldFJhbmRvbVZhbHVlc1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgIGJ5dGVzW2ldID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU2KTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIEFycmF5LmZyb20oYnl0ZXMpLm1hcChiID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gc2VuZCBIb29wbGFzZWZ0IGdvYWwgcG9zdGJhY2tcclxuYXN5bmMgZnVuY3Rpb24gc2VuZEhvb3BsYXNlZnRQb3N0YmFjayhcclxuICBnb2FsSWQ6IHN0cmluZyxcclxuICBjbGlja0lkOiBzdHJpbmcsXHJcbiAgYWZmaWxpYXRlSWQ6IHN0cmluZyxcclxuICBoYXNoOiBzdHJpbmcsXHJcbiAgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge31cclxuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZzsgc3RhdHVzQ29kZTogbnVtYmVyIH0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XHJcbiAgICAgIGhhc2g6IGhhc2gsXHJcbiAgICAgIGNsaWNrX2lkOiBjbGlja0lkLFxyXG4gICAgICBhZmZpbGlhdGVfaWQ6IGFmZmlsaWF0ZUlkLFxyXG4gICAgICAuLi5wYXJhbXNcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHVybCA9IGAke0hPT1BMQVNFRlRfQ09ORklHLmJhc2VVcmx9L2dvYWwvJHtnb2FsSWR9PyR7dXJsUGFyYW1zLnRvU3RyaW5nKCl9YDtcclxuICAgIGNvbnNvbGUubG9nKGDwn46vIFNlbmRpbmcgSG9vcGxhc2VmdCBHb2FsICMke2dvYWxJZH0gcG9zdGJhY2s6YCk7XHJcbiAgICBjb25zb2xlLmxvZyhgICAgVVJMOiAke3VybH1gKTtcclxuICAgIGNvbnNvbGUubG9nKGAgICBDbGljayBJRDogJHtjbGlja0lkfWApO1xyXG4gICAgY29uc29sZS5sb2coYCAgIEFmZmlsaWF0ZSBJRDogJHthZmZpbGlhdGVJZH1gKTtcclxuICAgIGNvbnNvbGUubG9nKGAgICBIYXNoOiAke2hhc2h9YCk7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdVc2VyLUFnZW50JzogJ05leHQuanMgQWZmaWxpYXRlIEFQSScsXHJcbiAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgY29uc29sZS5sb2coYOKchSBIb29wbGFzZWZ0IEdvYWwgIyR7Z29hbElkfSByZXNwb25zZSAoJHtyZXNwb25zZS5zdGF0dXN9KTpgLCB0ZXh0LnN1YnN0cmluZygwLCAzMDApKTtcclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiByZXNwb25zZS5vaywgbWVzc2FnZTogdGV4dCwgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzIH07XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihg4p2MIEhvb3BsYXNlZnQgR29hbCAjJHtnb2FsSWR9IGVycm9yOmAsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIHN0YXR1c0NvZGU6IDUwMCB9O1xyXG4gIH1cclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBjbGlja19pZCBmcm9tIEhvb3BsYXNlZnQgYnkgY2FsbGluZyB0aGUgb2ZmZXIgVVJMXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEhvb3BsYXNlZnRDbGlja0lkKFxyXG4gIGFmZmlsaWF0ZUlkOiBzdHJpbmcsXHJcbiAgdXJsSWQ6IHN0cmluZyxcclxuICBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxyXG4pOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgY2xpY2tJZDogc3RyaW5nIHwgbnVsbDsgbWVzc2FnZTogc3RyaW5nIH0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gQnVpbGQgdGhlIG9mZmVyIFVSTCB0aGF0IHdpbGwgcmVkaXJlY3QgYW5kIGdpdmUgdXMgYSBjbGlja19pZFxyXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XHJcbiAgICAgIGFmZmlsaWF0ZV9pZDogYWZmaWxpYXRlSWQsXHJcbiAgICAgIHVybF9pZDogdXJsSWQsXHJcbiAgICAgIC4uLnBhcmFtc1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGNvbnN0IG9mZmVyVXJsID0gYCR7SE9PUExBU0VGVF9DT05GSUcuYmFzZVVybH0vb2ZmZXIvMj8ke3VybFBhcmFtcy50b1N0cmluZygpfWA7XHJcbiAgICBjb25zb2xlLmxvZyhg8J+OryBDYWxsaW5nIEhvb3BsYXNlZnQgb2ZmZXIgVVJMIHRvIGdldCBjbGlja19pZDpgKTtcclxuICAgIGNvbnNvbGUubG9nKGAgICBVUkw6ICR7b2ZmZXJVcmx9YCk7XHJcblxyXG4gICAgLy8gRm9sbG93IHRoZSByZWRpcmVjdCB0byBnZXQgdGhlIGNsaWNrX2lkXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKG9mZmVyVXJsLCB7XHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnVXNlci1BZ2VudCc6ICdOZXh0LmpzIEFmZmlsaWF0ZSBBUEknLFxyXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfSxcclxuICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBFeHRyYWN0IGNsaWNrX2lkIGZyb20gdGhlIGZpbmFsIFVSTFxyXG4gICAgY29uc3QgZmluYWxVcmwgPSByZXNwb25zZS51cmw7XHJcbiAgICBjb25zb2xlLmxvZyhg4pyFIEhvb3BsYXNlZnQgcmVkaXJlY3QgVVJMOiAke2ZpbmFsVXJsfWApO1xyXG4gICAgXHJcbiAgICAvLyBUcnkgdG8gZXh0cmFjdCBjbGlja19pZCBmcm9tIFVSTCBwYXJhbWV0ZXJzXHJcbiAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKGZpbmFsVXJsKTtcclxuICAgIGNvbnN0IGNsaWNrSWQgPSB1cmxPYmouc2VhcmNoUGFyYW1zLmdldCgnY2xpY2tfaWQnKSB8fCB1cmxPYmouc2VhcmNoUGFyYW1zLmdldCgnYWZmaWxpYXRlX2lkJykgfHwgdXJsSWQ7XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGAgICBFeHRyYWN0ZWQgY2xpY2tfaWQ6ICR7Y2xpY2tJZH1gKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgY2xpY2tJZCwgbWVzc2FnZTogJ0NsaWNrIElEIG9idGFpbmVkIGZyb20gSG9vcGxhc2VmdCcgfTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIGdldCBjbGlja19pZCBmcm9tIEhvb3BsYXNlZnQ6YCwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgY2xpY2tJZDogdXJsSWQsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGIgfSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XHJcbiAgICBjb25zdCBjb250YWN0c0NvbGxlY3Rpb24gPSBnZXRDb250YWN0c0NvbGxlY3Rpb24oZGIpO1xyXG4gICAgY29uc3QgcG9zdGJhY2tzQ29sbGVjdGlvbiA9IGdldFBvc3RiYWNrc0NvbGxlY3Rpb24oZGIpO1xyXG4gICAgY29uc3QgY29udmVyc2lvbnNDb2xsZWN0aW9uID0gZ2V0Q29udmVyc2lvbnNDb2xsZWN0aW9uKGRiKTtcclxuXHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcblxyXG4gICAgY29uc3Qge1xyXG4gICAgICBuYW1lLFxyXG4gICAgICBlbWFpbCxcclxuICAgICAgdHlwZSwgICAgICAgICAgIC8vIFwiYWZmaWxpYXRlXCIgfCBcInVzZXJcIlxyXG4gICAgICBhZmZpbGlhdGVfaWQsXHJcbiAgICAgIHVybF9pZCwgICAgICAgICAvLyBzdG9yZWQgYXMgY2xpY2tfaWRcclxuICAgICAgc3ViMSwgICAgICAgICAgIC8vIHN0b3JlZCBhcyBzdWIxIChjbGljayBoYXNoKVxyXG4gICAgICBzdWIyLFxyXG4gICAgICBzdWIzLFxyXG4gICAgICBjb21wYW55LFxyXG4gICAgICBtZXNzZW5nZXIsXHJcbiAgICAgIHVzZXJuYW1lLFxyXG4gICAgICBtZXNzYWdlLFxyXG4gICAgICB0cmFja2luZ1NvdXJjZSxcclxuICAgICAgZGVwb3NpdF9hbW91bnQsXHJcbiAgICAgIHNhbGVfYW1vdW50XHJcbiAgICB9ID0gYm9keTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnXFxuPT09PT09PT09PSBDT05UQUNUIEZPUk0gU1VCTUlTU0lPTiA9PT09PT09PT09Jyk7XHJcbiAgICBjb25zb2xlLmxvZygnRW1haWw6JywgZW1haWwpO1xyXG4gICAgY29uc29sZS5sb2coJ1R5cGU6JywgdHlwZSk7XHJcbiAgICBjb25zb2xlLmxvZygnQWZmaWxpYXRlIElEOicsIGFmZmlsaWF0ZV9pZCk7XHJcbiAgICBjb25zb2xlLmxvZygnVVJMIElEIChjbGlja19pZCk6JywgdXJsX2lkKTtcclxuICAgIGNvbnNvbGUubG9nKCdTdWIxOicsIHN1YjEpO1xyXG4gICAgY29uc29sZS5sb2coJ0RlcG9zaXQgQW1vdW50OicsIGRlcG9zaXRfYW1vdW50KTtcclxuICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuJyk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gVmFsaWRhdGlvblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgaWYgKCFlbWFpbCB8fCAhdHlwZSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0VtYWlsIGFuZCB0eXBlIGFyZSByZXF1aXJlZC4nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gQ2hlY2sgZm9yIGR1cGxpY2F0ZSBlbWFpbCAoYXRvbWljIHVwc2VydClcclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIGNvbnN0IGV4aXN0aW5nQ29udGFjdCA9IGF3YWl0IGNvbnRhY3RzQ29sbGVjdGlvbi5maW5kT25lKHsgZW1haWwgfSk7XHJcbiAgICBpZiAoZXhpc3RpbmdDb250YWN0KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gRHVwbGljYXRlIGVtYWlsOicsIGVtYWlsKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdUaGlzIGVtYWlsIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZC4nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwOSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gUHJlcGFyZSBjb250YWN0IGRhdGFcclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIGNvbnN0IGNvbnRhY3REYXRhID0ge1xyXG4gICAgICBuYW1lOiBuYW1lIHx8ICcnLFxyXG4gICAgICBlbWFpbCxcclxuICAgICAgY29tcGFueTogY29tcGFueSB8fCAnJyxcclxuICAgICAgdHlwZSxcclxuICAgICAgbWVzc2VuZ2VyOiBtZXNzZW5nZXIgfHwgdW5kZWZpbmVkLFxyXG4gICAgICB1c2VybmFtZTogdXNlcm5hbWUgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBtZXNzYWdlOiBtZXNzYWdlIHx8IHVuZGVmaW5lZCxcclxuICAgICAgYWZmaWxpYXRlX2lkOiBhZmZpbGlhdGVfaWQgfHwgdW5kZWZpbmVkLFxyXG4gICAgICB1cmxfaWQ6IHVybF9pZCB8fCB1bmRlZmluZWQsXHJcbiAgICAgIHN1YjE6IHN1YjEgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBzdWIyOiBzdWIyIHx8IHVuZGVmaW5lZCxcclxuICAgICAgc3ViMzogc3ViMyB8fCB1bmRlZmluZWQsXHJcbiAgICAgIHRyYWNraW5nX3NvdXJjZTogdHJhY2tpbmdTb3VyY2UgfHwgJ2NvbnRhY3RfZm9ybScsXHJcbiAgICAgIHN0YXR1czogJ25ldycsXHJcbiAgICAgIGFmZmlsaWF0ZV9zdGF0dXM6IHR5cGUgPT09ICdhZmZpbGlhdGUnID8gJ3BlbmRpbmcnIDogdW5kZWZpbmVkLFxyXG4gICAgICBhZmZpbGlhdGVSZWdpc3RlcmVkOiBmYWxzZSxcclxuICAgICAgZnRkOiBmYWxzZSxcclxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gU2F2ZSBjb250YWN0IHRvIE1vbmdvREIgKGF0b21pYyB1cHNlcnQpXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250YWN0c0NvbGxlY3Rpb24uZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgeyBlbWFpbCB9LFxyXG4gICAgICB7ICRzZXRPbkluc2VydDogY29udGFjdERhdGEgfSxcclxuICAgICAgeyB1cHNlcnQ6IHRydWUsIHJldHVybkRvY3VtZW50OiAnYWZ0ZXInIH1cclxuICAgICk7XHJcbiAgICBcclxuICAgIGNvbnN0IGlzTmV3Q29udGFjdCA9ICEhcmVzdWx0Py5jcmVhdGVkQXQgJiYgcmVzdWx0LmNyZWF0ZWRBdCA+PSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMTAwMCk7XHJcbiAgICBcclxuICAgIGlmICghaXNOZXdDb250YWN0KSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVGhpcyBlbWFpbCBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQuJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDkgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygn4pyFIENvbnRhY3Qgc2F2ZWQgdG8gTW9uZ29EQjonLCByZXN1bHQ/Ll9pZCk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gQXV0b21hdGljIFJlZ2lzdHJhdGlvbiBhbmQgRlREIGZvciBBTEwgdXNlciB0eXBlc1xyXG4gICAgLy8gKFRyaWdnZXJlZCBmb3IgRVZFUlkgc3VibWlzc2lvbiB3aGVuIHR5cGUgaXMgcHJvdmlkZWQpXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBpZiAodHlwZSkge1xyXG4gICAgICBjb25zdCBlZmZlY3RpdmVBZmZpbGlhdGVJZCA9IGFmZmlsaWF0ZV9pZCB8fCAnMic7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBoYXNoIGZvciB0aGlzIHJlZ2lzdHJhdGlvbiBpZiBub3QgcHJvdmlkZWQgZnJvbSBVUkxcclxuICAgICAgLy8gVGhpcyBpcyB0aGUgS0VZIGZpeDogR2V0IGEgdmFsaWQgaGFzaCBmcm9tIEhvb3BsYXNlZnQgaW5zdGVhZCBvZiBnZW5lcmF0aW5nIHJhbmRvbSBvbmVzXHJcbiAgICAgIGNvbnN0IGhhc2hQYXR0ZXJuID0gL15bYS1mMC05XXszMix9JC9pO1xyXG4gICAgICBsZXQgZWZmZWN0aXZlSGFzaDogc3RyaW5nO1xyXG4gICAgICBsZXQgZWZmZWN0aXZlQ2xpY2tJZDogc3RyaW5nO1xyXG4gICAgICBcclxuICAgICAgaWYgKHN1YjEgJiYgaGFzaFBhdHRlcm4udGVzdChzdWIxKSkge1xyXG4gICAgICAgIC8vIFVzZSB0aGUgaGFzaCBmcm9tIFVSTCBpZiBpdCdzIGEgdmFsaWQgaGFzaFxyXG4gICAgICAgIGVmZmVjdGl2ZUhhc2ggPSBzdWIxO1xyXG4gICAgICAgIGVmZmVjdGl2ZUNsaWNrSWQgPSBzdWIxO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn46vIFVzaW5nIGhhc2ggZnJvbSBVUkw6ICR7ZWZmZWN0aXZlSGFzaH1gKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBDYWxsIEhvb3BsYXNlZnQgb2ZmZXIgVVJMIHRvIGdldCBhIHZhbGlkIGNsaWNrIHdpdGggaGFzaFxyXG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIEtFWSBmaXg6IEdldCBhIHJlYWwgaGFzaCBmcm9tIEhvb3BsYXNlZnQgaW5zdGVhZCBvZiBnZW5lcmF0aW5nIHJhbmRvbSBvbmVzXHJcbiAgICAgICAgY29uc29sZS5sb2coYPCfjq8gTm8gdmFsaWQgc3ViMSBoYXNoLCBjYWxsaW5nIEhvb3BsYXNlZnQgdG8gY3JlYXRlIGNsaWNrLi4uYCk7XHJcbiAgICAgICAgY29uc3QgY2xpY2tSZXN1bHQgPSBhd2FpdCBDbGlja3NBUEkuY3JlYXRlQ2xpY2tBbmRHZXRIYXNoKFxyXG4gICAgICAgICAgZWZmZWN0aXZlQWZmaWxpYXRlSWQsXHJcbiAgICAgICAgICB1cmxfaWQgfHwgJzInXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoY2xpY2tSZXN1bHQuc3VjY2VzcyAmJiBjbGlja1Jlc3VsdC5oYXNoKSB7XHJcbiAgICAgICAgICBlZmZlY3RpdmVIYXNoID0gY2xpY2tSZXN1bHQuaGFzaDtcclxuICAgICAgICAgIGVmZmVjdGl2ZUNsaWNrSWQgPSBjbGlja1Jlc3VsdC5jbGlja0lkIHx8IGNsaWNrUmVzdWx0Lmhhc2g7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBHb3QgdmFsaWQgaGFzaCBmcm9tIEhvb3BsYXNlZnQ6ICR7ZWZmZWN0aXZlSGFzaH1gKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gRmFsbGJhY2sgdG8gZ2VuZXJhdGVkIGhhc2ggaWYgQVBJIGNhbGwgZmFpbHNcclxuICAgICAgICAgIGVmZmVjdGl2ZUhhc2ggPSBnZW5lcmF0ZUNsaWNrSGFzaCgpO1xyXG4gICAgICAgICAgZWZmZWN0aXZlQ2xpY2tJZCA9IGVmZmVjdGl2ZUhhc2g7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBIb29wbGFzZWZ0IEFQSSBmYWlsZWQsIHVzaW5nIGdlbmVyYXRlZCBoYXNoOiAke2VmZmVjdGl2ZUhhc2h9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhg8J+OryBVc2luZyBkeW5hbWljIGNsaWNrX2lkOiAke2VmZmVjdGl2ZUNsaWNrSWR9IChzdWIxOiAke3N1YjF9LCB1cmxfaWQ6ICR7dXJsX2lkfSlgKTtcclxuICAgICAgY29uc29sZS5sb2coYPCfjq8gVXNpbmcgaGFzaDogJHtlZmZlY3RpdmVIYXNofWApO1xyXG4gICAgICBcclxuICAgICAgLy8gMS4gU2VuZCBSZWdpc3RyYXRpb24gUG9zdGJhY2sgKEdvYWwgIzUpXHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn46vIFNlbmRpbmcgSG9vcGxhc2VmdCBSZWdpc3RyYXRpb24gUG9zdGJhY2sgKEdvYWwgIzUpJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZWdpc3RyYXRpb25SZXN1bHQgPSBhd2FpdCBzZW5kSG9vcGxhc2VmdFBvc3RiYWNrKFxyXG4gICAgICAgIEhPT1BMQVNFRlRfQ09ORklHLmdvYWxSZWdpc3RyYXRpb24sXHJcbiAgICAgICAgZWZmZWN0aXZlQ2xpY2tJZCxcclxuICAgICAgICBlZmZlY3RpdmVBZmZpbGlhdGVJZCxcclxuICAgICAgICBlZmZlY3RpdmVIYXNoLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHN1YjE6IGVmZmVjdGl2ZUNsaWNrSWQsXHJcbiAgICAgICAgICBzdWIyOiBzdWIyIHx8ICcnLFxyXG4gICAgICAgICAgc3ViMzogc3ViMyB8fCAnJyxcclxuICAgICAgICAgIGdvYWxfdHlwZTogJ3JlZ2lzdHJhdGlvbicsXHJcbiAgICAgICAgICBuYW1lOiBlbmNvZGVVUklDb21wb25lbnQobmFtZSB8fCAnJyksXHJcbiAgICAgICAgICBlbWFpbDogZW5jb2RlVVJJQ29tcG9uZW50KGVtYWlsKSxcclxuICAgICAgICAgIGNvbXBhbnk6IGVuY29kZVVSSUNvbXBvbmVudChjb21wYW55IHx8ICcnKVxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGAgICBSZWdpc3RyYXRpb24gcG9zdGJhY2sgc3VjY2VzczogJHtyZWdpc3RyYXRpb25SZXN1bHQuc3VjY2Vzc31gKTtcclxuXHJcbiAgICAgIC8vIDIuIFNhdmUgcmVnaXN0cmF0aW9uIGNvbnZlcnNpb24gKGF0b21pYyB1cHNlcnQpXHJcbiAgICAgIGF3YWl0IGNvbnZlcnNpb25zQ29sbGVjdGlvbi5maW5kT25lQW5kVXBkYXRlKFxyXG4gICAgICAgIHsgY2xpY2tfaWQ6IGVmZmVjdGl2ZUNsaWNrSWQsIGdvYWxfaWQ6IEhPT1BMQVNFRlRfQ09ORklHLmdvYWxSZWdpc3RyYXRpb24gfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAkc2V0T25JbnNlcnQ6IHtcclxuICAgICAgICAgICAgY2xpY2tfaWQ6IGVmZmVjdGl2ZUNsaWNrSWQsXHJcbiAgICAgICAgICAgIGFmZmlsaWF0ZV9pZDogZWZmZWN0aXZlQWZmaWxpYXRlSWQsXHJcbiAgICAgICAgICAgIGdvYWxfaWQ6IEhPT1BMQVNFRlRfQ09ORklHLmdvYWxSZWdpc3RyYXRpb24sXHJcbiAgICAgICAgICAgIGdvYWxfdHlwZTogJ3JlZ2lzdHJhdGlvbicsXHJcbiAgICAgICAgICAgIG9mZmVyX2lkOiAnMicsXHJcbiAgICAgICAgICAgIGFtb3VudDogMCxcclxuICAgICAgICAgICAgc2FsZV9hbW91bnQ6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgc3RhdHVzOiByZWdpc3RyYXRpb25SZXN1bHQuc3VjY2VzcyA/ICdhcHByb3ZlZCcgOiAncGVuZGluZycsXHJcbiAgICAgICAgICAgIHN1YjE6IGVmZmVjdGl2ZUNsaWNrSWQsXHJcbiAgICAgICAgICAgIHN1YjI6IHN1YjIgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBzdWIzOiBzdWIzIHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgaGFzaDogZWZmZWN0aXZlSGFzaCxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgbmFtZSwgXHJcbiAgICAgICAgICAgICAgZW1haWwsIFxyXG4gICAgICAgICAgICAgIGNvbXBhbnksXHJcbiAgICAgICAgICAgICAgdXNlcl90eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICAgIHBvc3RiYWNrUmVzcG9uc2U6IHJlZ2lzdHJhdGlvblJlc3VsdC5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgIHBvc3RiYWNrU3VjY2VzczogcmVnaXN0cmF0aW9uUmVzdWx0LnN1Y2Nlc3NcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgJHNldDogeyB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyB1cHNlcnQ6IHRydWUgfVxyXG4gICAgICApO1xyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIFJlZ2lzdHJhdGlvbiBjb252ZXJzaW9uIHNhdmVkJyk7XHJcblxyXG4gICAgICAvLyAzLiBVcGRhdGUgY29udGFjdCBiYXNlZCBvbiBwb3N0YmFjayByZXN1bHRcclxuICAgICAgaWYgKHJlZ2lzdHJhdGlvblJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgYXdhaXQgY29udGFjdHNDb2xsZWN0aW9uLnVwZGF0ZU9uZShcclxuICAgICAgICAgIHsgX2lkOiByZXN1bHQ/Ll9pZCB9LFxyXG4gICAgICAgICAgeyBcclxuICAgICAgICAgICAgJHNldDogeyBcclxuICAgICAgICAgICAgICBhZmZpbGlhdGVSZWdpc3RlcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIFVwZGF0ZWQgY29udGFjdCBhZmZpbGlhdGVSZWdpc3RlcmVkIHRvIHRydWUnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gNC4gQXV0by1jb21wbGV0ZSBGVEQgLSBBTFdBWVMgZG8gdGhpcyBmb3IgYWxsIHJlZ2lzdHJhdGlvbnNcclxuICAgICAgY29uc3QgZGVwb3NpdEFtb3VudCA9IGRlcG9zaXRfYW1vdW50IHx8IDEwMDtcclxuICAgICAgYXdhaXQgY29udGFjdHNDb2xsZWN0aW9uLnVwZGF0ZU9uZShcclxuICAgICAgICB7IF9pZDogcmVzdWx0Py5faWQgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgJHNldDogeyBcclxuICAgICAgICAgICAgZnRkOiB0cnVlLFxyXG4gICAgICAgICAgICBmdGRfZGF0ZTogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgZnRkX2Ftb3VudDogZGVwb3NpdEFtb3VudCxcclxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIEF1dG8tY29tcGxldGVkIEZURCBmb3IgY29udGFjdCAoZnRkPXRydWUsIGZ0ZF9hbW91bnQ9JyArIGRlcG9zaXRBbW91bnQgKyAnKScpO1xyXG5cclxuICAgICAgLy8gNS4gU2VuZCBEZXBvc2l0IFBvc3RiYWNrIChHb2FsICM2KSBmb3IgRlREXHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn46vIFNlbmRpbmcgSG9vcGxhc2VmdCBEZXBvc2l0IFBvc3RiYWNrIChHb2FsICM2KScpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZGVwb3NpdFJlc3VsdCA9IGF3YWl0IHNlbmRIb29wbGFzZWZ0UG9zdGJhY2soXHJcbiAgICAgICAgSE9PUExBU0VGVF9DT05GSUcuZ29hbERlcG9zaXQsXHJcbiAgICAgICAgZWZmZWN0aXZlQ2xpY2tJZCxcclxuICAgICAgICBlZmZlY3RpdmVBZmZpbGlhdGVJZCxcclxuICAgICAgICBlZmZlY3RpdmVIYXNoLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHN1YjE6IGVmZmVjdGl2ZUNsaWNrSWQsXHJcbiAgICAgICAgICBzdWIyOiBzdWIyIHx8ICcnLFxyXG4gICAgICAgICAgc3ViMzogc3ViMyB8fCAnJyxcclxuICAgICAgICAgIGdvYWxfdHlwZTogJ2RlcG9zaXQnLFxyXG4gICAgICAgICAgZGVwb3NpdF9hbW91bnQ6IGRlcG9zaXRBbW91bnQudG9TdHJpbmcoKSxcclxuICAgICAgICAgIHNhbGVfYW1vdW50OiAoc2FsZV9hbW91bnQgfHwgZGVwb3NpdEFtb3VudCkudG9TdHJpbmcoKVxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGAgICBEZXBvc2l0IHBvc3RiYWNrIHN1Y2Nlc3M6ICR7ZGVwb3NpdFJlc3VsdC5zdWNjZXNzfWApO1xyXG5cclxuICAgICAgLy8gNi4gU2F2ZSBkZXBvc2l0IGNvbnZlcnNpb24gKGF0b21pYyB1cHNlcnQpXHJcbiAgICAgIGF3YWl0IGNvbnZlcnNpb25zQ29sbGVjdGlvbi5maW5kT25lQW5kVXBkYXRlKFxyXG4gICAgICAgIHsgY2xpY2tfaWQ6IGVmZmVjdGl2ZUNsaWNrSWQsIGdvYWxfaWQ6IEhPT1BMQVNFRlRfQ09ORklHLmdvYWxEZXBvc2l0IH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgJHNldE9uSW5zZXJ0OiB7XHJcbiAgICAgICAgICAgIGNsaWNrX2lkOiBlZmZlY3RpdmVDbGlja0lkLFxyXG4gICAgICAgICAgICBhZmZpbGlhdGVfaWQ6IGVmZmVjdGl2ZUFmZmlsaWF0ZUlkLFxyXG4gICAgICAgICAgICBnb2FsX2lkOiBIT09QTEFTRUZUX0NPTkZJRy5nb2FsRGVwb3NpdCxcclxuICAgICAgICAgICAgZ29hbF90eXBlOiAnZGVwb3NpdCcsXHJcbiAgICAgICAgICAgIG9mZmVyX2lkOiAnMicsXHJcbiAgICAgICAgICAgIGFtb3VudDogZGVwb3NpdEFtb3VudCxcclxuICAgICAgICAgICAgc2FsZV9hbW91bnQ6IHNhbGVfYW1vdW50IHx8IGRlcG9zaXRBbW91bnQsXHJcbiAgICAgICAgICAgIHN0YXR1czogZGVwb3NpdFJlc3VsdC5zdWNjZXNzID8gJ2FwcHJvdmVkJyA6ICdwZW5kaW5nJyxcclxuICAgICAgICAgICAgc3ViMTogZWZmZWN0aXZlQ2xpY2tJZCxcclxuICAgICAgICAgICAgc3ViMjogc3ViMiB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHN1YjM6IHN1YjMgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBoYXNoOiBlZmZlY3RpdmVIYXNoLFxyXG4gICAgICAgICAgICBtZXRhZGF0YTogeyBcclxuICAgICAgICAgICAgICBuYW1lLCBcclxuICAgICAgICAgICAgICBlbWFpbCwgXHJcbiAgICAgICAgICAgICAgY29tcGFueSxcclxuICAgICAgICAgICAgICB1c2VyX3R5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgICAgcG9zdGJhY2tSZXNwb25zZTogZGVwb3NpdFJlc3VsdC5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgIHBvc3RiYWNrU3VjY2VzczogZGVwb3NpdFJlc3VsdC5zdWNjZXNzXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICRzZXQ6IHsgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgdXBzZXJ0OiB0cnVlIH1cclxuICAgICAgKTtcclxuICAgICAgY29uc29sZS5sb2coJ+KchSBEZXBvc2l0IGNvbnZlcnNpb24gc2F2ZWQnKTtcclxuXHJcbiAgICAgIC8vIDcuIFNhdmUgdG8gcG9zdGJhY2tzIGNvbGxlY3Rpb24gKGF0b21pYyB1cHNlcnQpXHJcbiAgICAgIGF3YWl0IHBvc3RiYWNrc0NvbGxlY3Rpb24uZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgICB7IGNsaWNrX2lkOiBlZmZlY3RpdmVDbGlja0lkLCBnb2FsOiAncmVnaXN0cmF0aW9uJyB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICRzZXRPbkluc2VydDoge1xyXG4gICAgICAgICAgICBjbGlja19pZDogZWZmZWN0aXZlQ2xpY2tJZCxcclxuICAgICAgICAgICAgYWZmaWxpYXRlX2lkOiBlZmZlY3RpdmVBZmZpbGlhdGVJZCxcclxuICAgICAgICAgICAgb2ZmZXJfaWQ6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgZ29hbDogJ3JlZ2lzdHJhdGlvbicsXHJcbiAgICAgICAgICAgIGFtb3VudDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBzYWxlX2Ftb3VudDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgICAgICAgICAgc3ViMTogZWZmZWN0aXZlQ2xpY2tJZCxcclxuICAgICAgICAgICAgc3ViMjogc3ViMiB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHN1YjM6IHN1YjMgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBoYXNoOiBlZmZlY3RpdmVIYXNoLFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAkc2V0OiB7IHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IHVwc2VydDogdHJ1ZSB9XHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgUmVnaXN0cmF0aW9uIHBvc3RiYWNrIHNhdmVkJyk7XHJcblxyXG4gICAgICAvLyA4LiBTYXZlIGRlcG9zaXQgcG9zdGJhY2tcclxuICAgICAgYXdhaXQgcG9zdGJhY2tzQ29sbGVjdGlvbi5maW5kT25lQW5kVXBkYXRlKFxyXG4gICAgICAgIHsgY2xpY2tfaWQ6IGVmZmVjdGl2ZUNsaWNrSWQsIGdvYWw6ICdkZXBvc2l0JyB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICRzZXRPbkluc2VydDoge1xyXG4gICAgICAgICAgICBjbGlja19pZDogZWZmZWN0aXZlQ2xpY2tJZCxcclxuICAgICAgICAgICAgYWZmaWxpYXRlX2lkOiBlZmZlY3RpdmVBZmZpbGlhdGVJZCxcclxuICAgICAgICAgICAgb2ZmZXJfaWQ6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgZ29hbDogJ2RlcG9zaXQnLFxyXG4gICAgICAgICAgICBhbW91bnQ6IGRlcG9zaXRBbW91bnQsXHJcbiAgICAgICAgICAgIHNhbGVfYW1vdW50OiBzYWxlX2Ftb3VudCB8fCBkZXBvc2l0QW1vdW50LFxyXG4gICAgICAgICAgICBzdGF0dXM6IGRlcG9zaXRSZXN1bHQuc3VjY2VzcyA/ICdhcHByb3ZlZCcgOiAncGVuZGluZycsXHJcbiAgICAgICAgICAgIHN1YjE6IGVmZmVjdGl2ZUNsaWNrSWQsXHJcbiAgICAgICAgICAgIHN1YjI6IHN1YjIgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBzdWIzOiBzdWIzIHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgaGFzaDogZWZmZWN0aXZlSGFzaCxcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgJHNldDogeyB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyB1cHNlcnQ6IHRydWUgfVxyXG4gICAgICApO1xyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIERlcG9zaXQgcG9zdGJhY2sgc2F2ZWQnKTtcclxuXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiB0eXBlID09PSAnYWZmaWxpYXRlJyBcclxuICAgICAgICAgID8gJ0FmZmlsaWF0ZSBhcHBsaWNhdGlvbiBzdWJtaXR0ZWQgc3VjY2Vzc2Z1bGx5LicgXHJcbiAgICAgICAgICA6ICdSZWdpc3RyYXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4nLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGFmZmlsaWF0ZUFwcGxpZWQ6IHR5cGUgPT09ICdhZmZpbGlhdGUnLFxyXG4gICAgICAgICAgYWZmaWxpYXRlUG9zdGVkOiB0cnVlLFxyXG4gICAgICAgICAgaXNBZmZpbGlhdGU6IHR5cGUgPT09ICdhZmZpbGlhdGUnLFxyXG4gICAgICAgICAgYWZmaWxpYXRlUmVnaXN0ZXJlZDogcmVnaXN0cmF0aW9uUmVzdWx0LnN1Y2Nlc3MsXHJcbiAgICAgICAgICBmdGQ6IHRydWUsXHJcbiAgICAgICAgICBmdGRfYW1vdW50OiBkZXBvc2l0QW1vdW50LFxyXG4gICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiByZWdpc3RyYXRpb25SZXN1bHQuc3VjY2VzcyA/ICdhcHByb3ZlZCcgOiAncGVuZGluZycsXHJcbiAgICAgICAgICBkZXBvc2l0U3RhdHVzOiBkZXBvc2l0UmVzdWx0LnN1Y2Nlc3MgPyAnYXBwcm92ZWQnIDogJ3BlbmRpbmcnLFxyXG4gICAgICAgICAgdXNlclR5cGU6IHR5cGUsXHJcbiAgICAgICAgICBjbGlja0lkOiBlZmZlY3RpdmVDbGlja0lkLFxyXG4gICAgICAgICAgYWZmaWxpYXRlSWQ6IGVmZmVjdGl2ZUFmZmlsaWF0ZUlkLFxyXG4gICAgICAgICAgc3ViMTogZWZmZWN0aXZlQ2xpY2tJZCxcclxuICAgICAgICAgIGhhc2g6IGVmZmVjdGl2ZUhhc2gsXHJcbiAgICAgICAgICBub3RlOiB0eXBlID09PSAnYWZmaWxpYXRlJyBcclxuICAgICAgICAgICAgPyAnWW91ciBhcHBsaWNhdGlvbiBpcyB1bmRlciByZXZpZXcuIFlvdSB3aWxsIHJlY2VpdmUgZGFzaGJvYXJkIGFjY2VzcyB3aXRoaW4gMjQgaG91cnMuJ1xyXG4gICAgICAgICAgICA6ICdUaGFuayB5b3UgZm9yIHJlZ2lzdGVyaW5nLiBPdXIgdGVhbSB3aWxsIGNvbnRhY3QgeW91IHdpdGhpbiAyNCBob3Vycy4nXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBNYW51YWwgRGVwb3NpdCBQb3N0YmFjayAoaWYgZGVwb3NpdF9hbW91bnQgcHJvdmlkZWQpXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBpZiAodHlwZSA9PT0gJ2FmZmlsaWF0ZScgJiYgYWZmaWxpYXRlX2lkICYmIHVybF9pZCAmJiBkZXBvc2l0X2Ftb3VudCAmJiBkZXBvc2l0X2Ftb3VudCA+IDApIHtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfjq8gU2VuZGluZyBEZXBvc2l0IFBvc3RiYWNrIChHb2FsICM2KScpO1xyXG4gICAgICBcclxuICAgICAgLy8gRXh0cmFjdCBoYXNoIGZyb20gc3ViMSBpZiBpdCBsb29rcyBsaWtlIGEgaGFzaFxyXG4gICAgICBjb25zdCBoYXNoUGF0dGVybiA9IC9eW2EtZjAtOV17MzIsfSQvaTtcclxuICAgICAgY29uc3QgZWZmZWN0aXZlSGFzaCA9IChzdWIxICYmIGhhc2hQYXR0ZXJuLnRlc3Qoc3ViMSkpIFxyXG4gICAgICAgID8gc3ViMSBcclxuICAgICAgICA6IEhPT1BMQVNFRlRfQ09ORklHLmRlZmF1bHRIYXNoO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZGVwb3NpdFJlc3VsdCA9IGF3YWl0IHNlbmRIb29wbGFzZWZ0UG9zdGJhY2soXHJcbiAgICAgICAgSE9PUExBU0VGVF9DT05GSUcuZ29hbERlcG9zaXQsXHJcbiAgICAgICAgdXJsX2lkLFxyXG4gICAgICAgIGFmZmlsaWF0ZV9pZCxcclxuICAgICAgICBlZmZlY3RpdmVIYXNoLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHN1YjE6IHN1YjEgfHwgJycsXHJcbiAgICAgICAgICBzdWIyOiBzdWIyIHx8ICcnLFxyXG4gICAgICAgICAgc3ViMzogc3ViMyB8fCAnJyxcclxuICAgICAgICAgIGdvYWxfdHlwZTogJ2RlcG9zaXQnLFxyXG4gICAgICAgICAgZGVwb3NpdF9hbW91bnQ6IGRlcG9zaXRfYW1vdW50LnRvU3RyaW5nKCksXHJcbiAgICAgICAgICBzYWxlX2Ftb3VudDogKHNhbGVfYW1vdW50IHx8IGRlcG9zaXRfYW1vdW50KS50b1N0cmluZygpXHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gU2F2ZSBkZXBvc2l0IGNvbnZlcnNpb24gKGF0b21pYyB1cHNlcnQpXHJcbiAgICAgIGF3YWl0IGNvbnZlcnNpb25zQ29sbGVjdGlvbi5maW5kT25lQW5kVXBkYXRlKFxyXG4gICAgICAgIHsgY2xpY2tfaWQ6IHVybF9pZCwgZ29hbF9pZDogSE9PUExBU0VGVF9DT05GSUcuZ29hbERlcG9zaXQgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAkc2V0T25JbnNlcnQ6IHtcclxuICAgICAgICAgICAgY2xpY2tfaWQ6IHVybF9pZCxcclxuICAgICAgICAgICAgYWZmaWxpYXRlX2lkOiBhZmZpbGlhdGVfaWQsXHJcbiAgICAgICAgICAgIGdvYWxfaWQ6IEhPT1BMQVNFRlRfQ09ORklHLmdvYWxEZXBvc2l0LFxyXG4gICAgICAgICAgICBnb2FsX3R5cGU6ICdkZXBvc2l0JyxcclxuICAgICAgICAgICAgb2ZmZXJfaWQ6ICcyJyxcclxuICAgICAgICAgICAgYW1vdW50OiBkZXBvc2l0X2Ftb3VudCxcclxuICAgICAgICAgICAgc2FsZV9hbW91bnQ6IHNhbGVfYW1vdW50IHx8IGRlcG9zaXRfYW1vdW50LFxyXG4gICAgICAgICAgICBzdGF0dXM6IGRlcG9zaXRSZXN1bHQuc3VjY2VzcyA/ICdhcHByb3ZlZCcgOiAncGVuZGluZycsXHJcbiAgICAgICAgICAgIHN1YjE6IHN1YjEgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBzdWIyOiBzdWIyIHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgc3ViMzogc3ViMyB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGhhc2g6IGVmZmVjdGl2ZUhhc2gsXHJcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7IG5hbWUsIGVtYWlsLCBjb21wYW55IH0sXHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICRzZXQ6IHsgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgdXBzZXJ0OiB0cnVlIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSBjb250YWN0IEZURCBzdGF0dXNcclxuICAgICAgaWYgKGRlcG9zaXRSZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIGF3YWl0IGNvbnRhY3RzQ29sbGVjdGlvbi51cGRhdGVPbmUoXHJcbiAgICAgICAgICB7IF9pZDogcmVzdWx0Py5faWQgfSxcclxuICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICRzZXQ6IHsgXHJcbiAgICAgICAgICAgICAgZnRkOiB0cnVlLFxyXG4gICAgICAgICAgICAgIGZ0ZF9kYXRlOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgIGZ0ZF9hbW91bnQ6IGRlcG9zaXRfYW1vdW50LFxyXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdEZXBvc2l0IHBvc3RiYWNrIHNlbnQgc3VjY2Vzc2Z1bGx5LicsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgYWZmaWxpYXRlQXBwbGllZDogdHJ1ZSxcclxuICAgICAgICAgIGZ0ZDogZGVwb3NpdFJlc3VsdC5zdWNjZXNzLFxyXG4gICAgICAgICAgZnRkX2Ftb3VudDogZGVwb3NpdF9hbW91bnQsXHJcbiAgICAgICAgICBoYXNoOiBlZmZlY3RpdmVIYXNoXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBOb3JtYWwgdXNlciByZWdpc3RyYXRpb25cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6ICdSZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bC4gT3VyIHRlYW0gd2lsbCBjb250YWN0IHlvdSB3aXRoaW4gMjQgaG91cnMuJyxcclxuICAgICAgZGF0YTogeyBpc0FmZmlsaWF0ZTogZmFsc2UsIHBvc3RlZDogdHJ1ZSB9XHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcignUmVnaXN0cmF0aW9uIEFQSSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjb25uZWN0VG9EYXRhYmFzZSIsImdldENvbnRhY3RzQ29sbGVjdGlvbiIsImdldFBvc3RiYWNrc0NvbGxlY3Rpb24iLCJnZXRDb252ZXJzaW9uc0NvbGxlY3Rpb24iLCJDbGlja3NBUEkiLCJIT09QTEFTRUZUX0NPTkZJRyIsImJhc2VVcmwiLCJnb2FsUmVnaXN0cmF0aW9uIiwiZ29hbERlcG9zaXQiLCJkZWZhdWx0SGFzaCIsImdlbmVyYXRlQ2xpY2tIYXNoIiwiYnl0ZXMiLCJVaW50OEFycmF5IiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiaSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIkFycmF5IiwiZnJvbSIsIm1hcCIsImIiLCJ0b1N0cmluZyIsInBhZFN0YXJ0Iiwiam9pbiIsInNlbmRIb29wbGFzZWZ0UG9zdGJhY2siLCJnb2FsSWQiLCJjbGlja0lkIiwiYWZmaWxpYXRlSWQiLCJoYXNoIiwicGFyYW1zIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiY2xpY2tfaWQiLCJhZmZpbGlhdGVfaWQiLCJ1cmwiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJ0ZXh0Iiwic3RhdHVzIiwic3Vic3RyaW5nIiwic3VjY2VzcyIsIm9rIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJlcnJvciIsImdldEhvb3BsYXNlZnRDbGlja0lkIiwidXJsSWQiLCJ1cmxfaWQiLCJvZmZlclVybCIsInJlZGlyZWN0IiwiZmluYWxVcmwiLCJ1cmxPYmoiLCJVUkwiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJQT1NUIiwicmVxdWVzdCIsImRiIiwiY29udGFjdHNDb2xsZWN0aW9uIiwicG9zdGJhY2tzQ29sbGVjdGlvbiIsImNvbnZlcnNpb25zQ29sbGVjdGlvbiIsImJvZHkiLCJqc29uIiwibmFtZSIsImVtYWlsIiwidHlwZSIsInN1YjEiLCJzdWIyIiwic3ViMyIsImNvbXBhbnkiLCJtZXNzZW5nZXIiLCJ1c2VybmFtZSIsInRyYWNraW5nU291cmNlIiwiZGVwb3NpdF9hbW91bnQiLCJzYWxlX2Ftb3VudCIsImV4aXN0aW5nQ29udGFjdCIsImZpbmRPbmUiLCJjb250YWN0RGF0YSIsInVuZGVmaW5lZCIsInRyYWNraW5nX3NvdXJjZSIsImFmZmlsaWF0ZV9zdGF0dXMiLCJhZmZpbGlhdGVSZWdpc3RlcmVkIiwiZnRkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsInJlc3VsdCIsImZpbmRPbmVBbmRVcGRhdGUiLCIkc2V0T25JbnNlcnQiLCJ1cHNlcnQiLCJyZXR1cm5Eb2N1bWVudCIsImlzTmV3Q29udGFjdCIsIm5vdyIsIl9pZCIsImVmZmVjdGl2ZUFmZmlsaWF0ZUlkIiwiaGFzaFBhdHRlcm4iLCJlZmZlY3RpdmVIYXNoIiwiZWZmZWN0aXZlQ2xpY2tJZCIsInRlc3QiLCJjbGlja1Jlc3VsdCIsImNyZWF0ZUNsaWNrQW5kR2V0SGFzaCIsInJlZ2lzdHJhdGlvblJlc3VsdCIsImdvYWxfdHlwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImdvYWxfaWQiLCJvZmZlcl9pZCIsImFtb3VudCIsIm1ldGFkYXRhIiwidXNlcl90eXBlIiwicG9zdGJhY2tSZXNwb25zZSIsInBvc3RiYWNrU3VjY2VzcyIsIiRzZXQiLCJ1cGRhdGVPbmUiLCJkZXBvc2l0QW1vdW50IiwiZnRkX2RhdGUiLCJmdGRfYW1vdW50IiwiZGVwb3NpdFJlc3VsdCIsImdvYWwiLCJkYXRhIiwiYWZmaWxpYXRlQXBwbGllZCIsImFmZmlsaWF0ZVBvc3RlZCIsImlzQWZmaWxpYXRlIiwicmVnaXN0cmF0aW9uU3RhdHVzIiwiZGVwb3NpdFN0YXR1cyIsInVzZXJUeXBlIiwibm90ZSIsInBvc3RlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/contact/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/mongodb.ts":
/*!************************!*\
  !*** ./lib/mongodb.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closeConnection: () => (/* binding */ closeConnection),\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase),\n/* harmony export */   conversionExists: () => (/* binding */ conversionExists),\n/* harmony export */   ftdExists: () => (/* binding */ ftdExists),\n/* harmony export */   getAdminsCollection: () => (/* binding */ getAdminsCollection),\n/* harmony export */   getContactsCollection: () => (/* binding */ getContactsCollection),\n/* harmony export */   getConversionsCollection: () => (/* binding */ getConversionsCollection),\n/* harmony export */   getFTDsCollection: () => (/* binding */ getFTDsCollection),\n/* harmony export */   getPostbacksCollection: () => (/* binding */ getPostbacksCollection)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\n// MongoDB connection singleton\nlet client = null;\nlet db = null;\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://127.0.0.1:27017\";\nconst DB_NAME = process.env.DB_NAME || \"barracuda\";\nasync function connectToDatabase() {\n    if (client && db) {\n        return {\n            client,\n            db\n        };\n    }\n    try {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(MONGODB_URI);\n        await client.connect();\n        db = client.db(DB_NAME);\n        console.log(\"âœ… Connected to MongoDB\");\n        // Create indexes\n        await createIndexes(db);\n        return {\n            client,\n            db\n        };\n    } catch (error) {\n        console.error(\"âŒ MongoDB connection error:\", error);\n        throw error;\n    }\n}\nasync function createIndexes(db) {\n    // Contact indexes\n    const contactsCollection = db.collection(\"contacts\");\n    await contactsCollection.createIndex({\n        email: 1\n    });\n    await contactsCollection.createIndex({\n        type: 1\n    });\n    await contactsCollection.createIndex({\n        status: 1\n    });\n    await contactsCollection.createIndex({\n        affiliate_id: 1\n    });\n    await contactsCollection.createIndex({\n        createdAt: -1\n    });\n    await contactsCollection.createIndex({\n        sub1: 1\n    });\n    // Postback indexes\n    const postbacksCollection = db.collection(\"postbacks\");\n    await postbacksCollection.createIndex({\n        click_id: 1,\n        goal: 1\n    }, {\n        unique: true\n    }); // Duplicate protection\n    await postbacksCollection.createIndex({\n        affiliate_id: 1\n    });\n    await postbacksCollection.createIndex({\n        createdAt: -1\n    });\n    // FTD indexes\n    const ftdCollection = db.collection(\"ftds\");\n    await ftdCollection.createIndex({\n        click_id: 1\n    }, {\n        unique: true\n    }); // Duplicate protection\n    await ftdCollection.createIndex({\n        affiliate_id: 1\n    });\n    await ftdCollection.createIndex({\n        createdAt: -1\n    });\n    // Admin indexes\n    const adminCollection = db.collection(\"admins\");\n    await adminCollection.createIndex({\n        email: 1\n    }, {\n        unique: true\n    });\n    // Conversion indexes\n    const conversionsCollection = db.collection(\"conversions\");\n    await conversionsCollection.createIndex({\n        click_id: 1,\n        goal_id: 1\n    }, {\n        unique: true\n    }); // Duplicate protection\n    await conversionsCollection.createIndex({\n        affiliate_id: 1\n    });\n    await conversionsCollection.createIndex({\n        goal_type: 1\n    });\n    await conversionsCollection.createIndex({\n        createdAt: -1\n    });\n    console.log(\"âœ… Database indexes created\");\n}\n// Collection getters\nfunction getContactsCollection(db) {\n    return db.collection(\"contacts\");\n}\nfunction getPostbacksCollection(db) {\n    return db.collection(\"postbacks\");\n}\nfunction getFTDsCollection(db) {\n    return db.collection(\"ftds\");\n}\nfunction getAdminsCollection(db) {\n    return db.collection(\"admins\");\n}\nfunction getConversionsCollection(db) {\n    return db.collection(\"conversions\");\n}\n// Helper to check if a conversion already exists (for duplicate protection)\nasync function conversionExists(db, clickId, goal) {\n    const collection = getPostbacksCollection(db);\n    const existing = await collection.findOne({\n        click_id: clickId,\n        goal\n    });\n    return !!existing;\n}\nasync function ftdExists(db, clickId) {\n    const collection = getFTDsCollection(db);\n    const existing = await collection.findOne({\n        click_id: clickId\n    });\n    return !!existing;\n}\n// Close connection\nasync function closeConnection() {\n    if (client) {\n        await client.close();\n        client = null;\n        db = null;\n        console.log(\"MongoDB connection closed\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBTTtJQUMxQyxPQUFPQSxHQUFHWSxVQUFVLENBQVU7QUFDaEM7QUFFTyxTQUFTa0IsdUJBQXVCOUIsRUFBTTtJQUMzQyxPQUFPQSxHQUFHWSxVQUFVLENBQVc7QUFDakM7QUFFTyxTQUFTbUIsa0JBQWtCL0IsRUFBTTtJQUN0QyxPQUFPQSxHQUFHWSxVQUFVLENBQU07QUFDNUI7QUFFTyxTQUFTb0Isb0JBQW9CaEMsRUFBTTtJQUN4QyxPQUFPQSxHQUFHWSxVQUFVLENBQVE7QUFDOUI7QUFFTyxTQUFTcUIseUJBQXlCakMsRUFBTTtJQUM3QyxPQUFPQSxHQUFHWSxVQUFVLENBQWE7QUFDbkM7QUFFQSw0RUFBNEU7QUFDckUsZUFBZXNCLGlCQUNwQmxDLEVBQU0sRUFDTm1DLE9BQWUsRUFDZmIsSUFBWTtJQUVaLE1BQU1WLGFBQWFrQix1QkFBdUI5QjtJQUMxQyxNQUFNb0MsV0FBVyxNQUFNeEIsV0FBV3lCLE9BQU8sQ0FBQztRQUFFaEIsVUFBVWM7UUFBU2I7SUFBSztJQUNwRSxPQUFPLENBQUMsQ0FBQ2M7QUFDWDtBQUVPLGVBQWVFLFVBQVV0QyxFQUFNLEVBQUVtQyxPQUFlO0lBQ3JELE1BQU12QixhQUFhbUIsa0JBQWtCL0I7SUFDckMsTUFBTW9DLFdBQVcsTUFBTXhCLFdBQVd5QixPQUFPLENBQUM7UUFBRWhCLFVBQVVjO0lBQVE7SUFDOUQsT0FBTyxDQUFDLENBQUNDO0FBQ1g7QUFFQSxtQkFBbUI7QUFDWixlQUFlRztJQUNwQixJQUFJeEMsUUFBUTtRQUNWLE1BQU1BLE9BQU95QyxLQUFLO1FBQ2xCekMsU0FBUztRQUNUQyxLQUFLO1FBQ0xPLFFBQVFDLEdBQUcsQ0FBQztJQUNkO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZmZpaWF0ZS1mcm9udGVuZC8uL2xpYi9tb25nb2RiLnRzPzA1YmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQsIERiLCBDb2xsZWN0aW9uLCBPYmplY3RJZCB9IGZyb20gJ21vbmdvZGInO1xyXG5cclxuLy8gVHlwZXMgZm9yIHlvdXIgY29sbGVjdGlvbnNcclxuZXhwb3J0IGludGVyZmFjZSBDb250YWN0IHtcclxuICBfaWQ/OiBPYmplY3RJZDtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZW1haWw6IHN0cmluZztcclxuICBjb21wYW55OiBzdHJpbmc7XHJcbiAgdHlwZTogc3RyaW5nOyAvLyAnYWZmaWxpYXRlJyB8ICdwdWJsaXNoZXInIHwgJ2FkdmVydGlzZXInIHwgJ2luZmx1ZW5jZXInIHwgJ21lZGlhX2J1eWVyJyB8ICdhZ2VuY3knIHwgJ3VzZXInXHJcbiAgbWVzc2VuZ2VyPzogc3RyaW5nO1xyXG4gIHVzZXJuYW1lPzogc3RyaW5nO1xyXG4gIG1lc3NhZ2U/OiBzdHJpbmc7XHJcbiAgXHJcbiAgLy8gQWZmaWxpYXRlIHRyYWNraW5nIGZpZWxkc1xyXG4gIGFmZmlsaWF0ZV9pZD86IHN0cmluZztcclxuICB1cmxfaWQ/OiBzdHJpbmc7XHJcbiAgc3ViMT86IHN0cmluZztcclxuICBzdWIyPzogc3RyaW5nO1xyXG4gIHN1YjM/OiBzdHJpbmc7XHJcbiAgY2FtcGFpZ25faWQ/OiBzdHJpbmc7XHJcbiAgdHJhY2tpbmdfc291cmNlPzogc3RyaW5nO1xyXG4gIFxyXG4gIC8vIFN0YXR1cyBmaWVsZHNcclxuICBzdGF0dXM6IHN0cmluZzsgLy8gJ25ldycgfCAnY29udGFjdGVkJyB8ICdxdWFsaWZpZWQnIHwgJ3JlamVjdGVkJ1xyXG4gIG5vdGVzPzogc3RyaW5nO1xyXG4gIGFmZmlsaWF0ZV9zdGF0dXM/OiBzdHJpbmc7IC8vICdwZW5kaW5nJyB8ICdhcHByb3ZlZCcgfCAncmVqZWN0ZWQnXHJcbiAgXHJcbiAgLy8gQVBJIHRyYWNraW5nXHJcbiAgYWZmaWxpYXRlUmVnaXN0ZXJlZD86IGJvb2xlYW47XHJcbiAgYWZmaWxpYXRlRXJyb3I/OiBzdHJpbmc7XHJcbiAgdHJhY2tpbmdfbGluaz86IHN0cmluZztcclxuICBcclxuICAvLyBGVEQgdHJhY2tpbmdcclxuICBmdGQ/OiBib29sZWFuO1xyXG4gIGZ0ZF9hbW91bnQ/OiBudW1iZXI7XHJcbiAgZnRkX2RhdGU/OiBEYXRlO1xyXG4gIFxyXG4gIC8vIFRpbWVzdGFtcHNcclxuICBjcmVhdGVkQXQ6IERhdGU7XHJcbiAgdXBkYXRlZEF0OiBEYXRlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBvc3RiYWNrIHtcclxuICBfaWQ/OiBPYmplY3RJZDtcclxuICBjbGlja19pZDogc3RyaW5nO1xyXG4gIGFmZmlsaWF0ZV9pZDogc3RyaW5nO1xyXG4gIG9mZmVyX2lkPzogc3RyaW5nO1xyXG4gIGdvYWw6IHN0cmluZzsgLy8gJ3JlZ2lzdHJhdGlvbicgfCAnZGVwb3NpdCdcclxuICBhbW91bnQ/OiBudW1iZXI7XHJcbiAgc2FsZV9hbW91bnQ/OiBudW1iZXI7XHJcbiAgc3RhdHVzOiBzdHJpbmc7XHJcbiAgc3ViMT86IHN0cmluZztcclxuICBzdWIyPzogc3RyaW5nO1xyXG4gIHN1YjM/OiBzdHJpbmc7XHJcbiAgY3JlYXRlZEF0OiBEYXRlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZURCB7XHJcbiAgX2lkPzogT2JqZWN0SWQ7XHJcbiAgY2xpY2tfaWQ6IHN0cmluZztcclxuICBhZmZpbGlhdGVfaWQ6IHN0cmluZztcclxuICBvZmZlcl9pZD86IHN0cmluZztcclxuICBhbW91bnQ6IG51bWJlcjtcclxuICBzYWxlX2Ftb3VudD86IG51bWJlcjtcclxuICBzdGF0dXM6IHN0cmluZztcclxuICBjcmVhdGVkQXQ6IERhdGU7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29udmVyc2lvbiB7XHJcbiAgX2lkPzogT2JqZWN0SWQ7XHJcbiAgY2xpY2tfaWQ6IHN0cmluZztcclxuICBhZmZpbGlhdGVfaWQ6IHN0cmluZztcclxuICBnb2FsX2lkOiBzdHJpbmc7ICAgICAgICAgIC8vIEdvYWwgSUQgZnJvbSBIb29wbGFzZWZ0IChlLmcuLCAnNScgZm9yIHJlZ2lzdHJhdGlvbiwgJzYnIGZvciBkZXBvc2l0KVxyXG4gIGdvYWxfdHlwZTogc3RyaW5nOyAgICAgICAgLy8gJ3JlZ2lzdHJhdGlvbicgfCAnZGVwb3NpdCdcclxuICBvZmZlcl9pZD86IHN0cmluZztcclxuICBhbW91bnQ6IG51bWJlcjtcclxuICBzYWxlX2Ftb3VudD86IG51bWJlcjtcclxuICBzdGF0dXM6IHN0cmluZzsgICAgICAgICAgIC8vICdwZW5kaW5nJyB8ICdhcHByb3ZlZCcgfCAncmVqZWN0ZWQnXHJcbiAgXHJcbiAgLy8gQWZmaWxpYXRlIHN1YiBwYXJhbWV0ZXJzXHJcbiAgc3ViMT86IHN0cmluZztcclxuICBzdWIyPzogc3RyaW5nO1xyXG4gIHN1YjM/OiBzdHJpbmc7XHJcbiAgc3ViND86IHN0cmluZztcclxuICBzdWI1Pzogc3RyaW5nO1xyXG4gIFxyXG4gIC8vIFRyYWNraW5nIGluZm9ybWF0aW9uXHJcbiAgdXNlcl9hZ2VudD86IHN0cmluZztcclxuICBpcF9hZGRyZXNzPzogc3RyaW5nO1xyXG4gIGNvdW50cnk/OiBzdHJpbmc7XHJcbiAgcmVnaW9uPzogc3RyaW5nO1xyXG4gIHNvdXJjZT86IHN0cmluZztcclxuICBwbGF0Zm9ybT86IHN0cmluZztcclxuICBicm93c2VyPzogc3RyaW5nO1xyXG4gIG9zPzogc3RyaW5nO1xyXG4gIG9zX3ZlcnNpb24/OiBzdHJpbmc7XHJcbiAgbWFudWZhY3R1cmVyPzogc3RyaW5nO1xyXG4gIGRldmljZV90eXBlPzogc3RyaW5nOyAgICAgLy8gJ2Rlc2t0b3AnIHwgJ21vYmlsZScgfCAndGFibGV0J1xyXG4gIGlzX3Rlc3Q/OiBib29sZWFuO1xyXG4gIFxyXG4gIC8vIEFkZGl0aW9uYWwgaWRlbnRpZmllcnNcclxuICBjbGlja19oYXNoPzogc3RyaW5nOyAgICAgIC8vIEFsdGVybmF0aXZlIGhhc2ggaWRlbnRpZmllclxyXG4gIGFkdmVydGlzZXJfaWQ/OiBzdHJpbmc7XHJcbiAgb2ZmZXJfdXJsX2lkPzogc3RyaW5nO1xyXG4gIGFmZmlsaWF0ZV9zb3VyY2U/OiBzdHJpbmc7XHJcbiAgXHJcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xyXG4gIGNyZWF0ZWRBdDogRGF0ZTtcclxuICB1cGRhdGVkQXQ/OiBEYXRlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFkbWluIHtcclxuICBfaWQ/OiBPYmplY3RJZDtcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIHBhc3N3b3JkOiBzdHJpbmc7IC8vIEhhc2hlZFxyXG4gIG5hbWU6IHN0cmluZztcclxuICByb2xlOiBzdHJpbmc7XHJcbiAgY3JlYXRlZEF0OiBEYXRlO1xyXG59XHJcblxyXG4vLyBNb25nb0RCIGNvbm5lY3Rpb24gc2luZ2xldG9uXHJcbmxldCBjbGllbnQ6IE1vbmdvQ2xpZW50IHwgbnVsbCA9IG51bGw7XHJcbmxldCBkYjogRGIgfCBudWxsID0gbnVsbDtcclxuXHJcbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkgfHwgJ21vbmdvZGI6Ly8xMjcuMC4wLjE6MjcwMTcnO1xyXG5jb25zdCBEQl9OQU1FID0gcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCAnYmFycmFjdWRhJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0VG9EYXRhYmFzZSgpOiBQcm9taXNlPHsgY2xpZW50OiBNb25nb0NsaWVudDsgZGI6IERiIH0+IHtcclxuICBpZiAoY2xpZW50ICYmIGRiKSB7XHJcbiAgICByZXR1cm4geyBjbGllbnQsIGRiIH07XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KE1PTkdPREJfVVJJKTtcclxuICAgIGF3YWl0IGNsaWVudC5jb25uZWN0KCk7XHJcbiAgICBkYiA9IGNsaWVudC5kYihEQl9OQU1FKTtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ+KchSBDb25uZWN0ZWQgdG8gTW9uZ29EQicpO1xyXG4gICAgXHJcbiAgICAvLyBDcmVhdGUgaW5kZXhlc1xyXG4gICAgYXdhaXQgY3JlYXRlSW5kZXhlcyhkYik7XHJcbiAgICBcclxuICAgIHJldHVybiB7IGNsaWVudCwgZGIgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIE1vbmdvREIgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUluZGV4ZXMoZGI6IERiKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgLy8gQ29udGFjdCBpbmRleGVzXHJcbiAgY29uc3QgY29udGFjdHNDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbjxDb250YWN0PignY29udGFjdHMnKTtcclxuICBhd2FpdCBjb250YWN0c0NvbGxlY3Rpb24uY3JlYXRlSW5kZXgoeyBlbWFpbDogMSB9KTtcclxuICBhd2FpdCBjb250YWN0c0NvbGxlY3Rpb24uY3JlYXRlSW5kZXgoeyB0eXBlOiAxIH0pO1xyXG4gIGF3YWl0IGNvbnRhY3RzQ29sbGVjdGlvbi5jcmVhdGVJbmRleCh7IHN0YXR1czogMSB9KTtcclxuICBhd2FpdCBjb250YWN0c0NvbGxlY3Rpb24uY3JlYXRlSW5kZXgoeyBhZmZpbGlhdGVfaWQ6IDEgfSk7XHJcbiAgYXdhaXQgY29udGFjdHNDb2xsZWN0aW9uLmNyZWF0ZUluZGV4KHsgY3JlYXRlZEF0OiAtMSB9KTtcclxuICBhd2FpdCBjb250YWN0c0NvbGxlY3Rpb24uY3JlYXRlSW5kZXgoeyBzdWIxOiAxIH0pO1xyXG5cclxuICAvLyBQb3N0YmFjayBpbmRleGVzXHJcbiAgY29uc3QgcG9zdGJhY2tzQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb248UG9zdGJhY2s+KCdwb3N0YmFja3MnKTtcclxuICBhd2FpdCBwb3N0YmFja3NDb2xsZWN0aW9uLmNyZWF0ZUluZGV4KHsgY2xpY2tfaWQ6IDEsIGdvYWw6IDEgfSwgeyB1bmlxdWU6IHRydWUgfSk7IC8vIER1cGxpY2F0ZSBwcm90ZWN0aW9uXHJcbiAgYXdhaXQgcG9zdGJhY2tzQ29sbGVjdGlvbi5jcmVhdGVJbmRleCh7IGFmZmlsaWF0ZV9pZDogMSB9KTtcclxuICBhd2FpdCBwb3N0YmFja3NDb2xsZWN0aW9uLmNyZWF0ZUluZGV4KHsgY3JlYXRlZEF0OiAtMSB9KTtcclxuXHJcbiAgLy8gRlREIGluZGV4ZXNcclxuICBjb25zdCBmdGRDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbjxGVEQ+KCdmdGRzJyk7XHJcbiAgYXdhaXQgZnRkQ29sbGVjdGlvbi5jcmVhdGVJbmRleCh7IGNsaWNrX2lkOiAxIH0sIHsgdW5pcXVlOiB0cnVlIH0pOyAvLyBEdXBsaWNhdGUgcHJvdGVjdGlvblxyXG4gIGF3YWl0IGZ0ZENvbGxlY3Rpb24uY3JlYXRlSW5kZXgoeyBhZmZpbGlhdGVfaWQ6IDEgfSk7XHJcbiAgYXdhaXQgZnRkQ29sbGVjdGlvbi5jcmVhdGVJbmRleCh7IGNyZWF0ZWRBdDogLTEgfSk7XHJcblxyXG4gIC8vIEFkbWluIGluZGV4ZXNcclxuICBjb25zdCBhZG1pbkNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uPEFkbWluPignYWRtaW5zJyk7XHJcbiAgYXdhaXQgYWRtaW5Db2xsZWN0aW9uLmNyZWF0ZUluZGV4KHsgZW1haWw6IDEgfSwgeyB1bmlxdWU6IHRydWUgfSk7XHJcblxyXG4gIC8vIENvbnZlcnNpb24gaW5kZXhlc1xyXG4gIGNvbnN0IGNvbnZlcnNpb25zQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb248Q29udmVyc2lvbj4oJ2NvbnZlcnNpb25zJyk7XHJcbiAgYXdhaXQgY29udmVyc2lvbnNDb2xsZWN0aW9uLmNyZWF0ZUluZGV4KHsgY2xpY2tfaWQ6IDEsIGdvYWxfaWQ6IDEgfSwgeyB1bmlxdWU6IHRydWUgfSk7IC8vIER1cGxpY2F0ZSBwcm90ZWN0aW9uXHJcbiAgYXdhaXQgY29udmVyc2lvbnNDb2xsZWN0aW9uLmNyZWF0ZUluZGV4KHsgYWZmaWxpYXRlX2lkOiAxIH0pO1xyXG4gIGF3YWl0IGNvbnZlcnNpb25zQ29sbGVjdGlvbi5jcmVhdGVJbmRleCh7IGdvYWxfdHlwZTogMSB9KTtcclxuICBhd2FpdCBjb252ZXJzaW9uc0NvbGxlY3Rpb24uY3JlYXRlSW5kZXgoeyBjcmVhdGVkQXQ6IC0xIH0pO1xyXG5cclxuICBjb25zb2xlLmxvZygn4pyFIERhdGFiYXNlIGluZGV4ZXMgY3JlYXRlZCcpO1xyXG59XHJcblxyXG4vLyBDb2xsZWN0aW9uIGdldHRlcnNcclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRhY3RzQ29sbGVjdGlvbihkYjogRGIpOiBDb2xsZWN0aW9uPENvbnRhY3Q+IHtcclxuICByZXR1cm4gZGIuY29sbGVjdGlvbjxDb250YWN0PignY29udGFjdHMnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBvc3RiYWNrc0NvbGxlY3Rpb24oZGI6IERiKTogQ29sbGVjdGlvbjxQb3N0YmFjaz4ge1xyXG4gIHJldHVybiBkYi5jb2xsZWN0aW9uPFBvc3RiYWNrPigncG9zdGJhY2tzJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGVERzQ29sbGVjdGlvbihkYjogRGIpOiBDb2xsZWN0aW9uPEZURD4ge1xyXG4gIHJldHVybiBkYi5jb2xsZWN0aW9uPEZURD4oJ2Z0ZHMnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFkbWluc0NvbGxlY3Rpb24oZGI6IERiKTogQ29sbGVjdGlvbjxBZG1pbj4ge1xyXG4gIHJldHVybiBkYi5jb2xsZWN0aW9uPEFkbWluPignYWRtaW5zJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb252ZXJzaW9uc0NvbGxlY3Rpb24oZGI6IERiKTogQ29sbGVjdGlvbjxDb252ZXJzaW9uPiB7XHJcbiAgcmV0dXJuIGRiLmNvbGxlY3Rpb248Q29udmVyc2lvbj4oJ2NvbnZlcnNpb25zJyk7XHJcbn1cclxuXHJcbi8vIEhlbHBlciB0byBjaGVjayBpZiBhIGNvbnZlcnNpb24gYWxyZWFkeSBleGlzdHMgKGZvciBkdXBsaWNhdGUgcHJvdGVjdGlvbilcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbnZlcnNpb25FeGlzdHMoXHJcbiAgZGI6IERiLFxyXG4gIGNsaWNrSWQ6IHN0cmluZyxcclxuICBnb2FsOiBzdHJpbmdcclxuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGdldFBvc3RiYWNrc0NvbGxlY3Rpb24oZGIpO1xyXG4gIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgY29sbGVjdGlvbi5maW5kT25lKHsgY2xpY2tfaWQ6IGNsaWNrSWQsIGdvYWwgfSk7XHJcbiAgcmV0dXJuICEhZXhpc3Rpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmdGRFeGlzdHMoZGI6IERiLCBjbGlja0lkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICBjb25zdCBjb2xsZWN0aW9uID0gZ2V0RlREc0NvbGxlY3Rpb24oZGIpO1xyXG4gIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgY29sbGVjdGlvbi5maW5kT25lKHsgY2xpY2tfaWQ6IGNsaWNrSWQgfSk7XHJcbiAgcmV0dXJuICEhZXhpc3Rpbmc7XHJcbn1cclxuXHJcbi8vIENsb3NlIGNvbm5lY3Rpb25cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsb3NlQ29ubmVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBpZiAoY2xpZW50KSB7XHJcbiAgICBhd2FpdCBjbGllbnQuY2xvc2UoKTtcclxuICAgIGNsaWVudCA9IG51bGw7XHJcbiAgICBkYiA9IG51bGw7XHJcbiAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0aW9uIGNsb3NlZCcpO1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwiY2xpZW50IiwiZGIiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJEQl9OQU1FIiwiY29ubmVjdFRvRGF0YWJhc2UiLCJjb25uZWN0IiwiY29uc29sZSIsImxvZyIsImNyZWF0ZUluZGV4ZXMiLCJlcnJvciIsImNvbnRhY3RzQ29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJjcmVhdGVJbmRleCIsImVtYWlsIiwidHlwZSIsInN0YXR1cyIsImFmZmlsaWF0ZV9pZCIsImNyZWF0ZWRBdCIsInN1YjEiLCJwb3N0YmFja3NDb2xsZWN0aW9uIiwiY2xpY2tfaWQiLCJnb2FsIiwidW5pcXVlIiwiZnRkQ29sbGVjdGlvbiIsImFkbWluQ29sbGVjdGlvbiIsImNvbnZlcnNpb25zQ29sbGVjdGlvbiIsImdvYWxfaWQiLCJnb2FsX3R5cGUiLCJnZXRDb250YWN0c0NvbGxlY3Rpb24iLCJnZXRQb3N0YmFja3NDb2xsZWN0aW9uIiwiZ2V0RlREc0NvbGxlY3Rpb24iLCJnZXRBZG1pbnNDb2xsZWN0aW9uIiwiZ2V0Q29udmVyc2lvbnNDb2xsZWN0aW9uIiwiY29udmVyc2lvbkV4aXN0cyIsImNsaWNrSWQiLCJleGlzdGluZyIsImZpbmRPbmUiLCJmdGRFeGlzdHMiLCJjbG9zZUNvbm5lY3Rpb24iLCJjbG9zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/mongodb.ts\n");

/***/ }),

/***/ "(rsc)/./lib/private-api.ts":
/*!****************************!*\
  !*** ./lib/private-api.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClicksAPI: () => (/* binding */ ClicksAPI),\n/* harmony export */   ConversionsAPI: () => (/* binding */ ConversionsAPI),\n/* harmony export */   GOAL_TYPES: () => (/* binding */ GOAL_TYPES),\n/* harmony export */   GoalsAPI: () => (/* binding */ GoalsAPI),\n/* harmony export */   PrivateAPI: () => (/* binding */ PrivateAPI),\n/* harmony export */   QualificationsAPI: () => (/* binding */ QualificationsAPI),\n/* harmony export */   RiskManagementAPI: () => (/* binding */ RiskManagementAPI),\n/* harmony export */   createAffiliateConversion: () => (/* binding */ createAffiliateConversion),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\r\n * Private API Client for Affiliate Platform\r\n * Documentation: https://docs.affiliate-platform.com/\r\n * \r\n * This is for internal admin use only - do not expose to affiliates\r\n */ const API_BASE_URL = process.env.PRIVATE_API_BASE_URL || \"https://hooplaseft.com/backend/open-api/v1\";\nconst API_TOKEN = process.env.PRIVATE_API_TOKEN || \"49c6fbc5d8f07187e6d312cb1d754db354bdc5937f76f5cd2af09ac8a3880d6d\";\n// Goal Type IDs (from the platform)\nconst GOAL_TYPES = {\n    REGISTRATION: 5,\n    DEPOSIT: 6\n};\n// Helper to make authenticated requests\nasync function privateApiRequest(endpoint, options = {}) {\n    const url = `${API_BASE_URL}${endpoint}`;\n    const config = {\n        headers: {\n            \"Authorization\": `Bearer ${API_TOKEN}`,\n            \"Content-Type\": \"application/json\",\n            ...options.headers || {}\n        },\n        ...options\n    };\n    try {\n        const res = await fetch(url, config);\n        const data = await res.json();\n        if (!res.ok) {\n            throw new Error(data.message || `API request failed: ${res.status}`);\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Private API error:\", error);\n        throw error;\n    }\n}\n// ==================== Conversions API ====================\nconst ConversionsAPI = {\n    /**\r\n   * Get list of conversions with filtering\r\n   */ async list (params = {}) {\n        const query = new URLSearchParams();\n        if (params.affiliate_id) query.append(\"affiliate_id\", params.affiliate_id.toString());\n        if (params.offer_id) query.append(\"offer_id\", params.offer_id.toString());\n        if (params.goal_type_id) query.append(\"goal_type_id\", params.goal_type_id.toString());\n        if (params.hash) query.append(\"hash\", Array.isArray(params.hash) ? params.hash.join(\",\") : params.hash);\n        if (params.created_at_from) query.append(\"created_at_from\", params.created_at_from);\n        if (params.created_at_to) query.append(\"created_at_to\", params.created_at_to);\n        if (params.afm_date_from) query.append(\"afm_date_from\", params.afm_date_from);\n        if (params.afm_date_to) query.append(\"afm_date_to\", params.afm_date_to);\n        if (params.page) query.append(\"page\", params.page.toString());\n        if (params.per_page) query.append(\"per_page\", params.per_page.toString());\n        return privateApiRequest(`/users/conversions?${query.toString()}`);\n    },\n    /**\r\n   * Get a specific conversion by ID\r\n   */ async get (id) {\n        return privateApiRequest(`/users/conversions/${id}`);\n    },\n    /**\r\n   * Create one or more conversions\r\n   * Maximum 100 conversions per request\r\n   */ async create (conversions) {\n        if (conversions.length > 100) {\n            throw new Error(\"Maximum 100 conversions per request\");\n        }\n        return privateApiRequest(\"/users/conversions\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                conversions\n            })\n        });\n    },\n    /**\r\n   * Create a single conversion (convenience method)\r\n   */ async createOne (params) {\n        const result = await this.create([\n            params\n        ]);\n        return result.conversions?.[0];\n    },\n    /**\r\n   * Update one or more conversions\r\n   */ async update (conversions) {\n        return privateApiRequest(\"/users/conversions_update\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                conversions\n            })\n        });\n    }\n};\n// ==================== Goals API ====================\nconst GoalsAPI = {\n    /**\r\n   * Get goals for an offer\r\n   */ async list (offerId, goalId) {\n        const endpoint = goalId ? `/users/offers/${offerId}/goals/${goalId}` : `/users/offers/${offerId}/goals`;\n        return privateApiRequest(endpoint);\n    },\n    /**\r\n   * Create a new goal for an offer\r\n   */ async create (offerId, goal) {\n        return privateApiRequest(`/users/offers/${offerId}/goals`, {\n            method: \"POST\",\n            body: JSON.stringify(goal)\n        });\n    },\n    /**\r\n   * Edit a goal\r\n   */ async update (offerId, goalId, updates) {\n        return privateApiRequest(`/users/offers/${offerId}/goals/${goalId}`, {\n            method: \"PUT\",\n            body: JSON.stringify(updates)\n        });\n    }\n};\n// ==================== Risk Management API ====================\nconst RiskManagementAPI = {\n    /**\r\n   * Get risk rules for an affiliate\r\n   */ async getAffiliateRisks (affiliateId) {\n        return privateApiRequest(`/users/affiliates/${affiliateId}/risks`);\n    },\n    /**\r\n   * Create a risk rule for an affiliate\r\n   */ async createAffiliateRisk (affiliateId, risk) {\n        return privateApiRequest(`/users/affiliates/${affiliateId}/risks`, {\n            method: \"POST\",\n            body: JSON.stringify(risk)\n        });\n    },\n    /**\r\n   * Get risk rules for an offer\r\n   */ async getOfferRisks (offerId) {\n        return privateApiRequest(`/users/offers/${offerId}/risks`);\n    },\n    /**\r\n   * Create a risk rule for an offer\r\n   */ async createOfferRisk (offerId, risk) {\n        return privateApiRequest(`/users/offers/${offerId}/risks`, {\n            method: \"POST\",\n            body: JSON.stringify(risk)\n        });\n    }\n};\n// ==================== Qualifications API ====================\nconst QualificationsAPI = {\n    /**\r\n   * Get qualification rules for an affiliate\r\n   */ async getAffiliateQualifications (affiliateId) {\n        return privateApiRequest(`/users/affiliates/${affiliateId}/qualifications`);\n    },\n    /**\r\n   * Create a qualification rule for an affiliate\r\n   */ async createAffiliateQualification (affiliateId, qualification) {\n        return privateApiRequest(`/users/affiliates/${affiliateId}/qualifications`, {\n            method: \"POST\",\n            body: JSON.stringify(qualification)\n        });\n    },\n    /**\r\n   * Get qualification rules for an offer\r\n   */ async getOfferQualifications (offerId) {\n        return privateApiRequest(`/users/offers/${offerId}/qualifications`);\n    },\n    /**\r\n   * Create a qualification rule for an offer\r\n   */ async createOfferQualification (offerId, qualification) {\n        return privateApiRequest(`/users/offers/${offerId}/qualifications`, {\n            method: \"POST\",\n            body: JSON.stringify(qualification)\n        });\n    }\n};\n// ==================== Clicks API ====================\nconst ClicksAPI = {\n    /**\r\n   * Get list of clicks with filtering\r\n   */ async list (params = {}) {\n        const query = new URLSearchParams();\n        if (params.affiliate_id) query.append(\"affiliate_id\", params.affiliate_id.toString());\n        if (params.offer_id) query.append(\"offer_id\", params.offer_id.toString());\n        if (params.page) query.append(\"page\", params.page.toString());\n        if (params.per_page) query.append(\"per_page\", params.per_page.toString());\n        return privateApiRequest(`/affiliates/clicks?${query.toString()}`);\n    },\n    /**\r\n   * Create a click on Hooplaseft and get the sub1 hash from the redirect URL\r\n   * This is the key function to get a valid hash for postbacks\r\n   * \r\n   * @param affiliateId - The affiliate ID to use\r\n   * @param urlId - The URL ID (offer URL ID)\r\n   * @param params - Additional parameters to pass\r\n   * @returns Object with success, clickId, hash, and message\r\n   */ async createClickAndGetHash (affiliateId, urlId, params = {}) {\n        try {\n            // Build the offer URL that will redirect and give us a click_id/hash\n            const urlParams = new URLSearchParams({\n                affiliate_id: affiliateId,\n                url_id: urlId,\n                ...params\n            });\n            // Use the public v3 API for offer URL\n            const offerUrl = `https://hooplaseft.com/api/v3/offer/2?${urlParams.toString()}`;\n            console.log(`ðŸŽ¯ Calling Hooplaseft offer URL to create click and get hash:`);\n            console.log(`   URL: ${offerUrl}`);\n            // Follow the redirect to get the sub1 hash\n            const response = await fetch(offerUrl, {\n                method: \"GET\",\n                headers: {\n                    \"User-Agent\": \"Next.js Affiliate API\",\n                    \"Accept\": \"application/json\"\n                },\n                redirect: \"follow\"\n            });\n            // Extract sub1 from the final URL\n            const finalUrl = response.url;\n            console.log(`âœ… Hooplaseft redirect URL: ${finalUrl}`);\n            const urlObj = new URL(finalUrl);\n            const sub1 = urlObj.searchParams.get(\"sub1\");\n            const clickId = urlObj.searchParams.get(\"click_id\") || urlObj.searchParams.get(\"affiliate_id\") || urlId;\n            console.log(`   Extracted sub1 (hash): ${sub1}`);\n            console.log(`   Extracted click_id: ${clickId}`);\n            if (sub1) {\n                return {\n                    success: true,\n                    clickId,\n                    hash: sub1,\n                    message: \"Click created and hash obtained from Hooplaseft\"\n                };\n            } else {\n                return {\n                    success: false,\n                    clickId,\n                    hash: null,\n                    message: \"No sub1 parameter in redirect URL\"\n                };\n            }\n        } catch (error) {\n            console.error(`âŒ Failed to create click and get hash from Hooplaseft:`, error.message);\n            return {\n                success: false,\n                clickId: null,\n                hash: null,\n                message: error.message\n            };\n        }\n    },\n    /**\r\n   * Get a specific click by ID\r\n   * Note: The API doesn't have a direct endpoint for single click by ID,\r\n   * so we search through the list with per_page=1 and page based on ID\r\n   */ async get (clickId) {\n        // Since there's no direct endpoint, we try to find it by iterating through pages\n        // This is a workaround - ideally the API should have /affiliates/clicks/{id}\n        try {\n            const result = await this.list({\n                per_page: 200,\n                page: 1\n            });\n            if (result.data) {\n                const click = result.data.find((c)=>c.id === clickId);\n                return click || null;\n            }\n        } catch (error) {\n            // Suppress errors - this endpoint might not be accessible\n            console.warn(\"âš ï¸ ClicksAPI.list() failed, clicks endpoint may not be accessible\");\n        }\n        return null;\n    },\n    /**\r\n   * Get the hash for a specific click ID\r\n   * This is the main helper function needed for postbacks\r\n   * \r\n   * IMPORTANT: If the clicks API is not accessible, this function will:\r\n   * 1. Log a warning\r\n   * 2. Return null (caller should use fallback hash)\r\n   */ async getHashByClickId (clickId) {\n        try {\n            const click = await this.get(clickId);\n            if (click && click.hash) {\n                console.log(`âœ… Found hash for click ${clickId}: ${click.hash}`);\n                return click.hash;\n            }\n            console.warn(`âš ï¸ No hash found for click ${clickId}`);\n            return null;\n        } catch (error) {\n            console.warn(`âš ï¸ ClicksAPI.getHashByClickId() failed for click ${clickId}:`, error.message);\n            return null;\n        }\n    },\n    /**\r\n   * Alternative method: Try to find hash from conversions\r\n   * If clicks endpoint is not accessible, we can try to get the hash from\r\n   * existing conversions that match the click_id\r\n   */ async findHashFromConversions (db, clickId) {\n        try {\n            const conversionsCollection = db.collection(\"conversions\");\n            const conversion = await conversionsCollection.findOne({\n                click_id: clickId\n            });\n            if (conversion && conversion.click_hash) {\n                console.log(`âœ… Found hash from existing conversion: ${conversion.click_hash}`);\n                return conversion.click_hash;\n            }\n            // Also check postbacks collection\n            const postbacksCollection = db.collection(\"postbacks\");\n            const postback = await postbacksCollection.findOne({\n                click_id: clickId\n            });\n            if (postback && postback.click_hash) {\n                console.log(`âœ… Found hash from existing postback: ${postback.click_hash}`);\n                return postback.click_hash;\n            }\n            return null;\n        } catch (error) {\n            console.warn(\"âš ï¸ Failed to find hash from conversions:\", error.message);\n            return null;\n        }\n    }\n};\n// ==================== Affiliate Signup Helper ====================\nasync function createAffiliateConversion(params) {\n    // First, check if conversion already exists\n    const existing = await ConversionsAPI.list({\n        hash: params.clickHash,\n        goal_type_id: params.goalTypeId,\n        per_page: 1\n    });\n    if (existing.data && existing.data.length > 0) {\n        console.log(\"Conversion already exists for hash:\", params.clickHash);\n        return {\n            success: true,\n            conversion: existing.data[0],\n            isDuplicate: true\n        };\n    }\n    // Create new conversion\n    const result = await ConversionsAPI.createOne({\n        hash: params.clickHash,\n        goal_type_id: params.goalTypeId,\n        unique: params.unique || \"API\",\n        deposit_amount: params.depositAmount,\n        sale_amount: params.saleAmount,\n        is_test: params.isTest\n    });\n    return {\n        success: true,\n        conversion: result,\n        isDuplicate: false\n    };\n}\n// Export all APIs\nconst PrivateAPI = {\n    Conversions: ConversionsAPI,\n    Clicks: ClicksAPI,\n    Goals: GoalsAPI,\n    RiskManagement: RiskManagementAPI,\n    Qualifications: QualificationsAPI,\n    createAffiliateConversion,\n    GOAL_TYPES\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PrivateAPI);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQVM7WUFDVFUsWUFBWU8sU0FBUzFGLElBQUksQ0FBQyxFQUFFO1lBQzVCNkYsYUFBYTtRQUNmO0lBQ0Y7SUFFQSx3QkFBd0I7SUFDeEIsTUFBTXZELFNBQVMsTUFBTTlCLGVBQWU2QixTQUFTLENBQUM7UUFDNUNuQixNQUFNUixPQUFPaUYsU0FBUztRQUN0QjFFLGNBQWNQLE9BQU9rRixVQUFVO1FBQy9CRSxRQUFRcEYsT0FBT29GLE1BQU0sSUFBSTtRQUN6QkMsZ0JBQWdCckYsT0FBT3NGLGFBQWE7UUFDcENDLGFBQWF2RixPQUFPd0YsVUFBVTtRQUM5QkMsU0FBU3pGLE9BQU8wRixNQUFNO0lBQ3hCO0lBRUEsT0FBTztRQUNMM0IsU0FBUztRQUNUVSxZQUFZN0M7UUFDWnVELGFBQWE7SUFDZjtBQUNGO0FBRUEsa0JBQWtCO0FBQ1gsTUFBTVEsYUFBYTtJQUN4QkMsYUFBYTlGO0lBQ2IrRixRQUFRN0M7SUFDUjhDLE9BQU9oRTtJQUNQaUUsZ0JBQWdCNUQ7SUFDaEI2RCxnQkFBZ0J0RDtJQUNoQnFDO0lBQ0FwRztBQUNGLEVBQUU7QUFFRixpRUFBZWdILFVBQVVBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZmZpaWF0ZS1mcm9udGVuZC8uL2xpYi9wcml2YXRlLWFwaS50cz9iZjY3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBQcml2YXRlIEFQSSBDbGllbnQgZm9yIEFmZmlsaWF0ZSBQbGF0Zm9ybVxyXG4gKiBEb2N1bWVudGF0aW9uOiBodHRwczovL2RvY3MuYWZmaWxpYXRlLXBsYXRmb3JtLmNvbS9cclxuICogXHJcbiAqIFRoaXMgaXMgZm9yIGludGVybmFsIGFkbWluIHVzZSBvbmx5IC0gZG8gbm90IGV4cG9zZSB0byBhZmZpbGlhdGVzXHJcbiAqL1xyXG5cclxuY29uc3QgQVBJX0JBU0VfVVJMID0gcHJvY2Vzcy5lbnYuUFJJVkFURV9BUElfQkFTRV9VUkwgfHwgJ2h0dHBzOi8vaG9vcGxhc2VmdC5jb20vYmFja2VuZC9vcGVuLWFwaS92MSc7XHJcbmNvbnN0IEFQSV9UT0tFTiA9IHByb2Nlc3MuZW52LlBSSVZBVEVfQVBJX1RPS0VOIHx8ICc0OWM2ZmJjNWQ4ZjA3MTg3ZTZkMzEyY2IxZDc1NGRiMzU0YmRjNTkzN2Y3NmY1Y2QyYWYwOWFjOGEzODgwZDZkJztcclxuXHJcbi8vIEdvYWwgVHlwZSBJRHMgKGZyb20gdGhlIHBsYXRmb3JtKVxyXG5leHBvcnQgY29uc3QgR09BTF9UWVBFUyA9IHtcclxuICBSRUdJU1RSQVRJT046IDUsICAvLyBHb2FsICM1IC0gUmVnaXN0cmF0aW9uXHJcbiAgREVQT1NJVDogNiwgICAgICAgLy8gR29hbCAjNiAtIERlcG9zaXRcclxufTtcclxuXHJcbi8vIENsaWNrIGludGVyZmFjZSBmcm9tIHRoZSBBUElcclxuZXhwb3J0IGludGVyZmFjZSBDbGljayB7XHJcbiAgaWQ6IG51bWJlcjtcclxuICBvZmZlcl9uYW1lOiBzdHJpbmc7XHJcbiAgb2ZmZXJfaWQ6IG51bWJlcjtcclxuICBvZmZlcl91cmxfaWQ6IG51bWJlcjtcclxuICBoYXNoOiBzdHJpbmc7XHJcbiAgZGV2aWNlX21vZGVsOiBzdHJpbmc7XHJcbiAgZGV2aWNlX2JyYW5kOiBzdHJpbmc7XHJcbiAgZGV2aWNlX29zOiBzdHJpbmc7XHJcbiAgZGV2aWNlX29zX3ZlcnNpb246IHN0cmluZztcclxuICBjb3VudHJ5X2NvZGU6IHN0cmluZztcclxuICBhZmZfc3ViOiBzdHJpbmc7XHJcbiAgYWZmX3N1YjI6IHN0cmluZztcclxuICBhZmZfc3ViMzogc3RyaW5nO1xyXG4gIGFmZl9zdWI0OiBzdHJpbmc7XHJcbiAgYWZmX3N1YjU6IHN0cmluZztcclxuICBhZmZfc3ViNjogc3RyaW5nO1xyXG4gIGFmZl9zdWI3OiBzdHJpbmc7XHJcbiAgYWZmX3N1Yjg6IHN0cmluZztcclxuICBhZmZfc3ViOTogc3RyaW5nO1xyXG4gIGFmZl9zdWIxMDogc3RyaW5nO1xyXG4gIGFmZl9zdWIxMTogc3RyaW5nO1xyXG4gIGFmZl9zdWIxMjogc3RyaW5nO1xyXG4gIGFmZl9zdWIxMzogc3RyaW5nO1xyXG4gIGFmZl9zdWIxNDogc3RyaW5nO1xyXG4gIGFmZl9zdWIxNTogc3RyaW5nO1xyXG4gIGFmZl9zdWIxNjogc3RyaW5nO1xyXG4gIGFmZl9zdWIxNzogc3RyaW5nO1xyXG4gIGFmZl9zdWIxODogc3RyaW5nO1xyXG4gIGFmZl9zdWIxOTogc3RyaW5nO1xyXG4gIGFmZl9zdWIyMDogc3RyaW5nO1xyXG4gIGFmZmlsaWF0ZV9zb3VyY2U6IHN0cmluZztcclxuICB1c2VyX2FnZW50OiBzdHJpbmc7XHJcbiAgYnJvd3Nlcjogc3RyaW5nO1xyXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcclxufVxyXG5cclxuLy8gSGVscGVyIHRvIG1ha2UgYXV0aGVudGljYXRlZCByZXF1ZXN0c1xyXG5hc3luYyBmdW5jdGlvbiBwcml2YXRlQXBpUmVxdWVzdChcclxuICBlbmRwb2ludDogc3RyaW5nLFxyXG4gIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge31cclxuKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCB1cmwgPSBgJHtBUElfQkFTRV9VUkx9JHtlbmRwb2ludH1gO1xyXG4gIFxyXG4gIGNvbnN0IGNvbmZpZzogUmVxdWVzdEluaXQgPSB7XHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke0FQSV9UT0tFTn1gLFxyXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAuLi4ob3B0aW9ucy5oZWFkZXJzIHx8IHt9KSxcclxuICAgIH0sXHJcbiAgICAuLi5vcHRpb25zLFxyXG4gIH07XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIGNvbmZpZyk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcclxuXHJcbiAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlIHx8IGBBUEkgcmVxdWVzdCBmYWlsZWQ6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdQcml2YXRlIEFQSSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09IENvbnZlcnNpb25zIEFQSSA9PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGNvbnN0IENvbnZlcnNpb25zQVBJID0ge1xyXG4gIC8qKlxyXG4gICAqIEdldCBsaXN0IG9mIGNvbnZlcnNpb25zIHdpdGggZmlsdGVyaW5nXHJcbiAgICovXHJcbiAgYXN5bmMgbGlzdChwYXJhbXM6IHtcclxuICAgIGFmZmlsaWF0ZV9pZD86IG51bWJlcjtcclxuICAgIG9mZmVyX2lkPzogbnVtYmVyO1xyXG4gICAgZ29hbF90eXBlX2lkPzogbnVtYmVyO1xyXG4gICAgaGFzaD86IHN0cmluZyB8IHN0cmluZ1tdO1xyXG4gICAgY3JlYXRlZF9hdF9mcm9tPzogc3RyaW5nO1xyXG4gICAgY3JlYXRlZF9hdF90bz86IHN0cmluZztcclxuICAgIGFmbV9kYXRlX2Zyb20/OiBzdHJpbmc7XHJcbiAgICBhZm1fZGF0ZV90bz86IHN0cmluZztcclxuICAgIHBhZ2U/OiBudW1iZXI7XHJcbiAgICBwZXJfcGFnZT86IG51bWJlcjtcclxuICB9ID0ge30pOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgcXVlcnkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XHJcbiAgICBpZiAocGFyYW1zLmFmZmlsaWF0ZV9pZCkgcXVlcnkuYXBwZW5kKCdhZmZpbGlhdGVfaWQnLCBwYXJhbXMuYWZmaWxpYXRlX2lkLnRvU3RyaW5nKCkpO1xyXG4gICAgaWYgKHBhcmFtcy5vZmZlcl9pZCkgcXVlcnkuYXBwZW5kKCdvZmZlcl9pZCcsIHBhcmFtcy5vZmZlcl9pZC50b1N0cmluZygpKTtcclxuICAgIGlmIChwYXJhbXMuZ29hbF90eXBlX2lkKSBxdWVyeS5hcHBlbmQoJ2dvYWxfdHlwZV9pZCcsIHBhcmFtcy5nb2FsX3R5cGVfaWQudG9TdHJpbmcoKSk7XHJcbiAgICBpZiAocGFyYW1zLmhhc2gpIHF1ZXJ5LmFwcGVuZCgnaGFzaCcsIEFycmF5LmlzQXJyYXkocGFyYW1zLmhhc2gpID8gcGFyYW1zLmhhc2guam9pbignLCcpIDogcGFyYW1zLmhhc2gpO1xyXG4gICAgaWYgKHBhcmFtcy5jcmVhdGVkX2F0X2Zyb20pIHF1ZXJ5LmFwcGVuZCgnY3JlYXRlZF9hdF9mcm9tJywgcGFyYW1zLmNyZWF0ZWRfYXRfZnJvbSk7XHJcbiAgICBpZiAocGFyYW1zLmNyZWF0ZWRfYXRfdG8pIHF1ZXJ5LmFwcGVuZCgnY3JlYXRlZF9hdF90bycsIHBhcmFtcy5jcmVhdGVkX2F0X3RvKTtcclxuICAgIGlmIChwYXJhbXMuYWZtX2RhdGVfZnJvbSkgcXVlcnkuYXBwZW5kKCdhZm1fZGF0ZV9mcm9tJywgcGFyYW1zLmFmbV9kYXRlX2Zyb20pO1xyXG4gICAgaWYgKHBhcmFtcy5hZm1fZGF0ZV90bykgcXVlcnkuYXBwZW5kKCdhZm1fZGF0ZV90bycsIHBhcmFtcy5hZm1fZGF0ZV90byk7XHJcbiAgICBpZiAocGFyYW1zLnBhZ2UpIHF1ZXJ5LmFwcGVuZCgncGFnZScsIHBhcmFtcy5wYWdlLnRvU3RyaW5nKCkpO1xyXG4gICAgaWYgKHBhcmFtcy5wZXJfcGFnZSkgcXVlcnkuYXBwZW5kKCdwZXJfcGFnZScsIHBhcmFtcy5wZXJfcGFnZS50b1N0cmluZygpKTtcclxuXHJcbiAgICByZXR1cm4gcHJpdmF0ZUFwaVJlcXVlc3QoYC91c2Vycy9jb252ZXJzaW9ucz8ke3F1ZXJ5LnRvU3RyaW5nKCl9YCk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGEgc3BlY2lmaWMgY29udmVyc2lvbiBieSBJRFxyXG4gICAqL1xyXG4gIGFzeW5jIGdldChpZDogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybiBwcml2YXRlQXBpUmVxdWVzdChgL3VzZXJzL2NvbnZlcnNpb25zLyR7aWR9YCk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIG9uZSBvciBtb3JlIGNvbnZlcnNpb25zXHJcbiAgICogTWF4aW11bSAxMDAgY29udmVyc2lvbnMgcGVyIHJlcXVlc3RcclxuICAgKi9cclxuICBhc3luYyBjcmVhdGUoY29udmVyc2lvbnM6IEFycmF5PHtcclxuICAgIGhhc2g6IHN0cmluZztcclxuICAgIGdvYWxfdHlwZV9pZDogbnVtYmVyO1xyXG4gICAgdW5pcXVlPzogc3RyaW5nO1xyXG4gICAgY3JlYXRlZF9hdD86IHN0cmluZztcclxuICAgIHBheW91dD86IG51bWJlcjtcclxuICAgIHJldmVudWU/OiBudW1iZXI7XHJcbiAgICBzYWxlX2Ftb3VudD86IG51bWJlcjtcclxuICAgIHdpdGhkcmF3YWxfYW1vdW50PzogbnVtYmVyO1xyXG4gICAgZGVwb3NpdF9hbW91bnQ/OiBudW1iZXI7XHJcbiAgICBuZXRfZ2FtaW5nX2Ftb3VudD86IG51bWJlcjtcclxuICAgIHdpbl9hbW91bnQ/OiBudW1iZXI7XHJcbiAgICBiZXRfYW1vdW50PzogbnVtYmVyO1xyXG4gICAgY2hhcmdlX2JhY2tfYW1vdW50PzogbnVtYmVyO1xyXG4gICAgd2FnZXJlZF9ib251cz86IG51bWJlcjtcclxuICAgIGJvbnVzX2Nhc2g/OiBudW1iZXI7XHJcbiAgICBuZXRfZ2FtaW5nX2Nhc2g/OiBudW1iZXI7XHJcbiAgICBpc190ZXN0PzogYm9vbGVhbjtcclxuICAgIGN1c3RvbV90ZXh0X3Byb2ZpbGU/OiBzdHJpbmc7XHJcbiAgICBjdXN0b21fbnVtYmVyX3Byb2ZpbGU/OiBudW1iZXI7XHJcbiAgICBjdXN0b21fZW1haWxfcHJvZmlsZT86IHN0cmluZztcclxuICAgIGN1c3RvbV9kYXRlX3Byb2ZpbGU/OiBzdHJpbmc7XHJcbiAgICBjdXN0b21fbW9uZXlfcHJvZmlsZT86IG51bWJlcjtcclxuICAgIGN1c3RvbV9ib29sZWFuX3Byb2ZpbGU/OiBib29sZWFuO1xyXG4gIH0+KTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGlmIChjb252ZXJzaW9ucy5sZW5ndGggPiAxMDApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNYXhpbXVtIDEwMCBjb252ZXJzaW9ucyBwZXIgcmVxdWVzdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwcml2YXRlQXBpUmVxdWVzdCgnL3VzZXJzL2NvbnZlcnNpb25zJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBjb252ZXJzaW9ucyB9KSxcclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIHNpbmdsZSBjb252ZXJzaW9uIChjb252ZW5pZW5jZSBtZXRob2QpXHJcbiAgICovXHJcbiAgYXN5bmMgY3JlYXRlT25lKHBhcmFtczoge1xyXG4gICAgaGFzaDogc3RyaW5nO1xyXG4gICAgZ29hbF90eXBlX2lkOiBudW1iZXI7XHJcbiAgICB1bmlxdWU/OiBzdHJpbmc7XHJcbiAgICBkZXBvc2l0X2Ftb3VudD86IG51bWJlcjtcclxuICAgIHNhbGVfYW1vdW50PzogbnVtYmVyO1xyXG4gICAgcGF5b3V0PzogbnVtYmVyO1xyXG4gICAgcmV2ZW51ZT86IG51bWJlcjtcclxuICAgIGlzX3Rlc3Q/OiBib29sZWFuO1xyXG4gIH0pOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jcmVhdGUoW3BhcmFtc10pO1xyXG4gICAgcmV0dXJuIHJlc3VsdC5jb252ZXJzaW9ucz8uWzBdO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBvbmUgb3IgbW9yZSBjb252ZXJzaW9uc1xyXG4gICAqL1xyXG4gIGFzeW5jIHVwZGF0ZShjb252ZXJzaW9uczogQXJyYXk8e1xyXG4gICAgaWQ6IG51bWJlcjtcclxuICAgIGNyZWF0ZWRfYXQ/OiBzdHJpbmc7XHJcbiAgICBwYXlvdXQ/OiBudW1iZXI7XHJcbiAgICByZXZlbnVlPzogbnVtYmVyO1xyXG4gICAgc2FsZV9hbW91bnQ/OiBudW1iZXI7XHJcbiAgICB3aXRoZHJhd2FsX2Ftb3VudD86IG51bWJlcjtcclxuICAgIGRlcG9zaXRfYW1vdW50PzogbnVtYmVyO1xyXG4gICAgbmV0X2dhbWluZ19hbW91bnQ/OiBudW1iZXI7XHJcbiAgICB3aW5fYW1vdW50PzogbnVtYmVyO1xyXG4gICAgYmV0X2Ftb3VudD86IG51bWJlcjtcclxuICAgIGNoYXJnZV9iYWNrX2Ftb3VudD86IG51bWJlcjtcclxuICAgIHdhZ2VyZWRfYm9udXM/OiBudW1iZXI7XHJcbiAgICBib251c19jYXNoPzogbnVtYmVyO1xyXG4gICAgbmV0X2dhbWluZ19jYXNoPzogbnVtYmVyO1xyXG4gICAgaXNfdGVzdD86IGJvb2xlYW47XHJcbiAgfT4pOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuIHByaXZhdGVBcGlSZXF1ZXN0KCcvdXNlcnMvY29udmVyc2lvbnNfdXBkYXRlJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBjb252ZXJzaW9ucyB9KSxcclxuICAgIH0pO1xyXG4gIH0sXHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PSBHb2FscyBBUEkgPT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBjb25zdCBHb2Fsc0FQSSA9IHtcclxuICAvKipcclxuICAgKiBHZXQgZ29hbHMgZm9yIGFuIG9mZmVyXHJcbiAgICovXHJcbiAgYXN5bmMgbGlzdChvZmZlcklkOiBudW1iZXIsIGdvYWxJZD86IG51bWJlcik6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCBlbmRwb2ludCA9IGdvYWxJZCBcclxuICAgICAgPyBgL3VzZXJzL29mZmVycy8ke29mZmVySWR9L2dvYWxzLyR7Z29hbElkfWBcclxuICAgICAgOiBgL3VzZXJzL29mZmVycy8ke29mZmVySWR9L2dvYWxzYDtcclxuICAgIHJldHVybiBwcml2YXRlQXBpUmVxdWVzdChlbmRwb2ludCk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgbmV3IGdvYWwgZm9yIGFuIG9mZmVyXHJcbiAgICovXHJcbiAgYXN5bmMgY3JlYXRlKG9mZmVySWQ6IG51bWJlciwgZ29hbDoge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgZW5hYmxlX2V4dHJhX3BheW91dDogYm9vbGVhbjtcclxuICAgIGhpZGVfZnJvbV9hZmZpbGlhdGVzOiBib29sZWFuO1xyXG4gICAgY29udmVyc2lvbl9hdXRvX2FwcHJvdmU6IGJvb2xlYW47XHJcbiAgICBpc19hY3RpdmU6IGJvb2xlYW47XHJcbiAgICBpc19tdWx0aXBsZV9jb252ZXJzaW9uOiBib29sZWFuO1xyXG4gICAgaXNfdW5pcXVlOiBib29sZWFuO1xyXG4gICAgaXNfdW5pcXVlX25vdF9lbXB0eTogYm9vbGVhbjtcclxuICAgIHR5cGVfaWQ6IG51bWJlcjtcclxuICB9KTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybiBwcml2YXRlQXBpUmVxdWVzdChgL3VzZXJzL29mZmVycy8ke29mZmVySWR9L2dvYWxzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZ29hbCksXHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBFZGl0IGEgZ29hbFxyXG4gICAqL1xyXG4gIGFzeW5jIHVwZGF0ZShvZmZlcklkOiBudW1iZXIsIGdvYWxJZDogbnVtYmVyLCB1cGRhdGVzOiB7XHJcbiAgICBuYW1lPzogc3RyaW5nO1xyXG4gICAgZW5hYmxlX2V4dHJhX3BheW91dD86IGJvb2xlYW47XHJcbiAgICBoaWRlX2Zyb21fYWZmaWxpYXRlcz86IGJvb2xlYW47XHJcbiAgICBjb252ZXJzaW9uX2F1dG9fYXBwcm92ZT86IGJvb2xlYW47XHJcbiAgICBpc19hY3RpdmU/OiBib29sZWFuO1xyXG4gICAgaXNfbXVsdGlwbGVfY29udmVyc2lvbj86IGJvb2xlYW47XHJcbiAgICBpc191bmlxdWU/OiBib29sZWFuO1xyXG4gICAgaXNfdW5pcXVlX25vdF9lbXB0eT86IGJvb2xlYW47XHJcbiAgICB0eXBlX2lkPzogbnVtYmVyO1xyXG4gIH0pOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuIHByaXZhdGVBcGlSZXF1ZXN0KGAvdXNlcnMvb2ZmZXJzLyR7b2ZmZXJJZH0vZ29hbHMvJHtnb2FsSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1cGRhdGVzKSxcclxuICAgIH0pO1xyXG4gIH0sXHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PSBSaXNrIE1hbmFnZW1lbnQgQVBJID09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgY29uc3QgUmlza01hbmFnZW1lbnRBUEkgPSB7XHJcbiAgLyoqXHJcbiAgICogR2V0IHJpc2sgcnVsZXMgZm9yIGFuIGFmZmlsaWF0ZVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldEFmZmlsaWF0ZVJpc2tzKGFmZmlsaWF0ZUlkOiBudW1iZXIpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuIHByaXZhdGVBcGlSZXF1ZXN0KGAvdXNlcnMvYWZmaWxpYXRlcy8ke2FmZmlsaWF0ZUlkfS9yaXNrc2ApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIHJpc2sgcnVsZSBmb3IgYW4gYWZmaWxpYXRlXHJcbiAgICovXHJcbiAgYXN5bmMgY3JlYXRlQWZmaWxpYXRlUmlzayhhZmZpbGlhdGVJZDogbnVtYmVyLCByaXNrOiB7XHJcbiAgICBuYW1lPzogc3RyaW5nO1xyXG4gICAgdHlwZTogJ0xvY2FsIENvbnZlcnNpb25zIFJpc2snIHwgJ0dsb2JhbCBDb252ZXJzaW9ucyBSaXNrJyB8ICdSZWxhdGl2ZSBDb252ZXJzaW9uIFJpc2snIHwgJ0xhdGUgQ29udmVyc2lvbnMgUmlzayc7XHJcbiAgICBza2lwX2ZpcnN0PzogYm9vbGVhbjtcclxuICAgIHNraXBwaW5nX2NvdW50PzogbnVtYmVyIHwgc3RyaW5nO1xyXG4gICAgYW5udWxhdGVfbW9uZXlfY2FsY3VsYXRpb24/OiBib29sZWFuO1xyXG4gICAgZ29hbF90eXBlPzogbnVtYmVyO1xyXG4gICAgc2tpcHBlcl9jb3VudD86IHN0cmluZztcclxuICAgIGdvYWxfdHlwZXM/OiBudW1iZXJbXTtcclxuICAgIGRpZmZlcmVuY2VfcmVsYXRpdmVfdHlwZT86ICdkYXknIHwgJ3dlZWsnIHwgJ21vbnRoJyB8ICdxdWFydGVyJyB8ICd5ZWFyJztcclxuICAgIGRpZmZlcmVuY2VfcmVsYXRpdmVfb2Zmc2V0PzogbnVtYmVyO1xyXG4gICAgc2tpcF9hbHNvX2dvYWxfdHlwZXM/OiBudW1iZXJbXTtcclxuICAgIGdvYWxfYWJzb2x1dGVfc2Vzc2lvbl9saWZlc3Bhbj86IG51bWJlcjtcclxuICB9KTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybiBwcml2YXRlQXBpUmVxdWVzdChgL3VzZXJzL2FmZmlsaWF0ZXMvJHthZmZpbGlhdGVJZH0vcmlza3NgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyaXNrKSxcclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCByaXNrIHJ1bGVzIGZvciBhbiBvZmZlclxyXG4gICAqL1xyXG4gIGFzeW5jIGdldE9mZmVyUmlza3Mob2ZmZXJJZDogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybiBwcml2YXRlQXBpUmVxdWVzdChgL3VzZXJzL29mZmVycy8ke29mZmVySWR9L3Jpc2tzYCk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgcmlzayBydWxlIGZvciBhbiBvZmZlclxyXG4gICAqL1xyXG4gIGFzeW5jIGNyZWF0ZU9mZmVyUmlzayhvZmZlcklkOiBudW1iZXIsIHJpc2s6IHtcclxuICAgIG5hbWU/OiBzdHJpbmc7XHJcbiAgICB0eXBlOiAnTG9jYWwgQ29udmVyc2lvbnMgUmlzaycgfCAnR2xvYmFsIENvbnZlcnNpb25zIFJpc2snIHwgJ1JlbGF0aXZlIENvbnZlcnNpb24gUmlzaycgfCAnTGF0ZSBDb252ZXJzaW9ucyBSaXNrJztcclxuICAgIHNraXBfZmlyc3Q/OiBib29sZWFuO1xyXG4gICAgc2tpcHBpbmdfY291bnQ/OiBudW1iZXIgfCBzdHJpbmc7XHJcbiAgICBhbm51bGF0ZV9tb25leV9jYWxjdWxhdGlvbj86IGJvb2xlYW47XHJcbiAgICBnb2FsX3R5cGU/OiBudW1iZXI7XHJcbiAgICBza2lwcGVyX2NvdW50Pzogc3RyaW5nO1xyXG4gICAgZ29hbF90eXBlcz86IG51bWJlcltdO1xyXG4gICAgZGlmZmVyZW5jZV9yZWxhdGl2ZV90eXBlPzogJ2RheScgfCAnd2VlaycgfCAnbW9udGgnIHwgJ3F1YXJ0ZXInIHwgJ3llYXInO1xyXG4gICAgZGlmZmVyZW5jZV9yZWxhdGl2ZV9vZmZzZXQ/OiBudW1iZXI7XHJcbiAgICBza2lwX2Fsc29fZ29hbF90eXBlcz86IG51bWJlcltdO1xyXG4gICAgZ29hbF9hYnNvbHV0ZV9zZXNzaW9uX2xpZmVzcGFuPzogbnVtYmVyO1xyXG4gIH0pOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuIHByaXZhdGVBcGlSZXF1ZXN0KGAvdXNlcnMvb2ZmZXJzLyR7b2ZmZXJJZH0vcmlza3NgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyaXNrKSxcclxuICAgIH0pO1xyXG4gIH0sXHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PSBRdWFsaWZpY2F0aW9ucyBBUEkgPT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBjb25zdCBRdWFsaWZpY2F0aW9uc0FQSSA9IHtcclxuICAvKipcclxuICAgKiBHZXQgcXVhbGlmaWNhdGlvbiBydWxlcyBmb3IgYW4gYWZmaWxpYXRlXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0QWZmaWxpYXRlUXVhbGlmaWNhdGlvbnMoYWZmaWxpYXRlSWQ6IG51bWJlcik6IFByb21pc2U8YW55PiB7XHJcbiAgICByZXR1cm4gcHJpdmF0ZUFwaVJlcXVlc3QoYC91c2Vycy9hZmZpbGlhdGVzLyR7YWZmaWxpYXRlSWR9L3F1YWxpZmljYXRpb25zYCk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgcXVhbGlmaWNhdGlvbiBydWxlIGZvciBhbiBhZmZpbGlhdGVcclxuICAgKi9cclxuICBhc3luYyBjcmVhdGVBZmZpbGlhdGVRdWFsaWZpY2F0aW9uKGFmZmlsaWF0ZUlkOiBudW1iZXIsIHF1YWxpZmljYXRpb246IHtcclxuICAgIG5hbWU/OiBzdHJpbmc7XHJcbiAgICB0eXBlOiAnQmFzZWxpbmUnIHwgJ1JlcXVpcmVkIEdvYWwnO1xyXG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcbiAgICBwcWw/OiBzdHJpbmc7XHJcbiAgICBnb2FsX3R5cGU6IG51bWJlcjtcclxuICAgIGJhc2VsaW5lX2ZpZWxkPzogc3RyaW5nO1xyXG4gICAgYW1vdW50PzogbnVtYmVyO1xyXG4gICAgc2tpcF91bnNhdGlzZmllZD86IGJvb2xlYW47XHJcbiAgICB0cmFja2luZ19nb2FsX3R5cGVzPzogbnVtYmVyW107XHJcbiAgICBpc19hY3RpdmU/OiBib29sZWFuO1xyXG4gIH0pOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuIHByaXZhdGVBcGlSZXF1ZXN0KGAvdXNlcnMvYWZmaWxpYXRlcy8ke2FmZmlsaWF0ZUlkfS9xdWFsaWZpY2F0aW9uc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHF1YWxpZmljYXRpb24pLFxyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHF1YWxpZmljYXRpb24gcnVsZXMgZm9yIGFuIG9mZmVyXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0T2ZmZXJRdWFsaWZpY2F0aW9ucyhvZmZlcklkOiBudW1iZXIpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuIHByaXZhdGVBcGlSZXF1ZXN0KGAvdXNlcnMvb2ZmZXJzLyR7b2ZmZXJJZH0vcXVhbGlmaWNhdGlvbnNgKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBxdWFsaWZpY2F0aW9uIHJ1bGUgZm9yIGFuIG9mZmVyXHJcbiAgICovXHJcbiAgYXN5bmMgY3JlYXRlT2ZmZXJRdWFsaWZpY2F0aW9uKG9mZmVySWQ6IG51bWJlciwgcXVhbGlmaWNhdGlvbjoge1xyXG4gICAgbmFtZT86IHN0cmluZztcclxuICAgIHR5cGU6ICdCYXNlbGluZScgfCAnUmVxdWlyZWQgR29hbCc7XHJcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZztcclxuICAgIHBxbD86IHN0cmluZztcclxuICAgIGdvYWxfdHlwZTogbnVtYmVyO1xyXG4gICAgYmFzZWxpbmVfZmllbGQ/OiBzdHJpbmc7XHJcbiAgICBhbW91bnQ/OiBudW1iZXI7XHJcbiAgICBza2lwX3Vuc2F0aXNmaWVkPzogYm9vbGVhbjtcclxuICAgIHRyYWNraW5nX2dvYWxfdHlwZXM/OiBudW1iZXJbXTtcclxuICAgIGlzX2FjdGl2ZT86IGJvb2xlYW47XHJcbiAgfSk6IFByb21pc2U8YW55PiB7XHJcbiAgICByZXR1cm4gcHJpdmF0ZUFwaVJlcXVlc3QoYC91c2Vycy9vZmZlcnMvJHtvZmZlcklkfS9xdWFsaWZpY2F0aW9uc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHF1YWxpZmljYXRpb24pLFxyXG4gICAgfSk7XHJcbiAgfSxcclxufTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09IENsaWNrcyBBUEkgPT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBjb25zdCBDbGlja3NBUEkgPSB7XHJcbiAgLyoqXHJcbiAgICogR2V0IGxpc3Qgb2YgY2xpY2tzIHdpdGggZmlsdGVyaW5nXHJcbiAgICovXHJcbiAgYXN5bmMgbGlzdChwYXJhbXM6IHtcclxuICAgIGFmZmlsaWF0ZV9pZD86IG51bWJlcjtcclxuICAgIG9mZmVyX2lkPzogbnVtYmVyO1xyXG4gICAgcGFnZT86IG51bWJlcjtcclxuICAgIHBlcl9wYWdlPzogbnVtYmVyO1xyXG4gIH0gPSB7fSk6IFByb21pc2U8eyBkYXRhOiBDbGlja1tdOyB0b3RhbDogbnVtYmVyOyBwZXJfcGFnZTogbnVtYmVyOyBwYWdlOiBudW1iZXI7IHBhZ2VzOiBudW1iZXIgfT4ge1xyXG4gICAgY29uc3QgcXVlcnkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XHJcbiAgICBpZiAocGFyYW1zLmFmZmlsaWF0ZV9pZCkgcXVlcnkuYXBwZW5kKCdhZmZpbGlhdGVfaWQnLCBwYXJhbXMuYWZmaWxpYXRlX2lkLnRvU3RyaW5nKCkpO1xyXG4gICAgaWYgKHBhcmFtcy5vZmZlcl9pZCkgcXVlcnkuYXBwZW5kKCdvZmZlcl9pZCcsIHBhcmFtcy5vZmZlcl9pZC50b1N0cmluZygpKTtcclxuICAgIGlmIChwYXJhbXMucGFnZSkgcXVlcnkuYXBwZW5kKCdwYWdlJywgcGFyYW1zLnBhZ2UudG9TdHJpbmcoKSk7XHJcbiAgICBpZiAocGFyYW1zLnBlcl9wYWdlKSBxdWVyeS5hcHBlbmQoJ3Blcl9wYWdlJywgcGFyYW1zLnBlcl9wYWdlLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgIHJldHVybiBwcml2YXRlQXBpUmVxdWVzdChgL2FmZmlsaWF0ZXMvY2xpY2tzPyR7cXVlcnkudG9TdHJpbmcoKX1gKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBjbGljayBvbiBIb29wbGFzZWZ0IGFuZCBnZXQgdGhlIHN1YjEgaGFzaCBmcm9tIHRoZSByZWRpcmVjdCBVUkxcclxuICAgKiBUaGlzIGlzIHRoZSBrZXkgZnVuY3Rpb24gdG8gZ2V0IGEgdmFsaWQgaGFzaCBmb3IgcG9zdGJhY2tzXHJcbiAgICogXHJcbiAgICogQHBhcmFtIGFmZmlsaWF0ZUlkIC0gVGhlIGFmZmlsaWF0ZSBJRCB0byB1c2VcclxuICAgKiBAcGFyYW0gdXJsSWQgLSBUaGUgVVJMIElEIChvZmZlciBVUkwgSUQpXHJcbiAgICogQHBhcmFtIHBhcmFtcyAtIEFkZGl0aW9uYWwgcGFyYW1ldGVycyB0byBwYXNzXHJcbiAgICogQHJldHVybnMgT2JqZWN0IHdpdGggc3VjY2VzcywgY2xpY2tJZCwgaGFzaCwgYW5kIG1lc3NhZ2VcclxuICAgKi9cclxuICBhc3luYyBjcmVhdGVDbGlja0FuZEdldEhhc2goXHJcbiAgICBhZmZpbGlhdGVJZDogc3RyaW5nLFxyXG4gICAgdXJsSWQ6IHN0cmluZyxcclxuICAgIHBhcmFtczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9XHJcbiAgKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGNsaWNrSWQ6IHN0cmluZyB8IG51bGw7IGhhc2g6IHN0cmluZyB8IG51bGw7IG1lc3NhZ2U6IHN0cmluZyB9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBCdWlsZCB0aGUgb2ZmZXIgVVJMIHRoYXQgd2lsbCByZWRpcmVjdCBhbmQgZ2l2ZSB1cyBhIGNsaWNrX2lkL2hhc2hcclxuICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XHJcbiAgICAgICAgYWZmaWxpYXRlX2lkOiBhZmZpbGlhdGVJZCxcclxuICAgICAgICB1cmxfaWQ6IHVybElkLFxyXG4gICAgICAgIC4uLnBhcmFtc1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIFVzZSB0aGUgcHVibGljIHYzIEFQSSBmb3Igb2ZmZXIgVVJMXHJcbiAgICAgIGNvbnN0IG9mZmVyVXJsID0gYGh0dHBzOi8vaG9vcGxhc2VmdC5jb20vYXBpL3YzL29mZmVyLzI/JHt1cmxQYXJhbXMudG9TdHJpbmcoKX1gO1xyXG4gICAgICBjb25zb2xlLmxvZyhg8J+OryBDYWxsaW5nIEhvb3BsYXNlZnQgb2ZmZXIgVVJMIHRvIGNyZWF0ZSBjbGljayBhbmQgZ2V0IGhhc2g6YCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGAgICBVUkw6ICR7b2ZmZXJVcmx9YCk7XHJcblxyXG4gICAgICAvLyBGb2xsb3cgdGhlIHJlZGlyZWN0IHRvIGdldCB0aGUgc3ViMSBoYXNoXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gob2ZmZXJVcmwsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdVc2VyLUFnZW50JzogJ05leHQuanMgQWZmaWxpYXRlIEFQSScsXHJcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWRpcmVjdDogJ2ZvbGxvdydcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBFeHRyYWN0IHN1YjEgZnJvbSB0aGUgZmluYWwgVVJMXHJcbiAgICAgIGNvbnN0IGZpbmFsVXJsID0gcmVzcG9uc2UudXJsO1xyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIEhvb3BsYXNlZnQgcmVkaXJlY3QgVVJMOiAke2ZpbmFsVXJsfWApO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgdXJsT2JqID0gbmV3IFVSTChmaW5hbFVybCk7XHJcbiAgICAgIGNvbnN0IHN1YjEgPSB1cmxPYmouc2VhcmNoUGFyYW1zLmdldCgnc3ViMScpO1xyXG4gICAgICBjb25zdCBjbGlja0lkID0gdXJsT2JqLnNlYXJjaFBhcmFtcy5nZXQoJ2NsaWNrX2lkJykgfHwgdXJsT2JqLnNlYXJjaFBhcmFtcy5nZXQoJ2FmZmlsaWF0ZV9pZCcpIHx8IHVybElkO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYCAgIEV4dHJhY3RlZCBzdWIxIChoYXNoKTogJHtzdWIxfWApO1xyXG4gICAgICBjb25zb2xlLmxvZyhgICAgRXh0cmFjdGVkIGNsaWNrX2lkOiAke2NsaWNrSWR9YCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoc3ViMSkge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGNsaWNrSWQsIGhhc2g6IHN1YjEsIG1lc3NhZ2U6ICdDbGljayBjcmVhdGVkIGFuZCBoYXNoIG9idGFpbmVkIGZyb20gSG9vcGxhc2VmdCcgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgY2xpY2tJZCwgaGFzaDogbnVsbCwgbWVzc2FnZTogJ05vIHN1YjEgcGFyYW1ldGVyIGluIHJlZGlyZWN0IFVSTCcgfTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIGNyZWF0ZSBjbGljayBhbmQgZ2V0IGhhc2ggZnJvbSBIb29wbGFzZWZ0OmAsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgY2xpY2tJZDogbnVsbCwgaGFzaDogbnVsbCwgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhIHNwZWNpZmljIGNsaWNrIGJ5IElEXHJcbiAgICogTm90ZTogVGhlIEFQSSBkb2Vzbid0IGhhdmUgYSBkaXJlY3QgZW5kcG9pbnQgZm9yIHNpbmdsZSBjbGljayBieSBJRCxcclxuICAgKiBzbyB3ZSBzZWFyY2ggdGhyb3VnaCB0aGUgbGlzdCB3aXRoIHBlcl9wYWdlPTEgYW5kIHBhZ2UgYmFzZWQgb24gSURcclxuICAgKi9cclxuICBhc3luYyBnZXQoY2xpY2tJZDogbnVtYmVyKTogUHJvbWlzZTxDbGljayB8IG51bGw+IHtcclxuICAgIC8vIFNpbmNlIHRoZXJlJ3Mgbm8gZGlyZWN0IGVuZHBvaW50LCB3ZSB0cnkgdG8gZmluZCBpdCBieSBpdGVyYXRpbmcgdGhyb3VnaCBwYWdlc1xyXG4gICAgLy8gVGhpcyBpcyBhIHdvcmthcm91bmQgLSBpZGVhbGx5IHRoZSBBUEkgc2hvdWxkIGhhdmUgL2FmZmlsaWF0ZXMvY2xpY2tzL3tpZH1cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubGlzdCh7IHBlcl9wYWdlOiAyMDAsIHBhZ2U6IDEgfSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAocmVzdWx0LmRhdGEpIHtcclxuICAgICAgICBjb25zdCBjbGljayA9IHJlc3VsdC5kYXRhLmZpbmQoKGM6IENsaWNrKSA9PiBjLmlkID09PSBjbGlja0lkKTtcclxuICAgICAgICByZXR1cm4gY2xpY2sgfHwgbnVsbDtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgLy8gU3VwcHJlc3MgZXJyb3JzIC0gdGhpcyBlbmRwb2ludCBtaWdodCBub3QgYmUgYWNjZXNzaWJsZVxyXG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBDbGlja3NBUEkubGlzdCgpIGZhaWxlZCwgY2xpY2tzIGVuZHBvaW50IG1heSBub3QgYmUgYWNjZXNzaWJsZScpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIGhhc2ggZm9yIGEgc3BlY2lmaWMgY2xpY2sgSURcclxuICAgKiBUaGlzIGlzIHRoZSBtYWluIGhlbHBlciBmdW5jdGlvbiBuZWVkZWQgZm9yIHBvc3RiYWNrc1xyXG4gICAqIFxyXG4gICAqIElNUE9SVEFOVDogSWYgdGhlIGNsaWNrcyBBUEkgaXMgbm90IGFjY2Vzc2libGUsIHRoaXMgZnVuY3Rpb24gd2lsbDpcclxuICAgKiAxLiBMb2cgYSB3YXJuaW5nXHJcbiAgICogMi4gUmV0dXJuIG51bGwgKGNhbGxlciBzaG91bGQgdXNlIGZhbGxiYWNrIGhhc2gpXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0SGFzaEJ5Q2xpY2tJZChjbGlja0lkOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNsaWNrID0gYXdhaXQgdGhpcy5nZXQoY2xpY2tJZCk7XHJcbiAgICAgIGlmIChjbGljayAmJiBjbGljay5oYXNoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBGb3VuZCBoYXNoIGZvciBjbGljayAke2NsaWNrSWR9OiAke2NsaWNrLmhhc2h9YCk7XHJcbiAgICAgICAgcmV0dXJuIGNsaWNrLmhhc2g7XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gTm8gaGFzaCBmb3VuZCBmb3IgY2xpY2sgJHtjbGlja0lkfWApO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gQ2xpY2tzQVBJLmdldEhhc2hCeUNsaWNrSWQoKSBmYWlsZWQgZm9yIGNsaWNrICR7Y2xpY2tJZH06YCwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEFsdGVybmF0aXZlIG1ldGhvZDogVHJ5IHRvIGZpbmQgaGFzaCBmcm9tIGNvbnZlcnNpb25zXHJcbiAgICogSWYgY2xpY2tzIGVuZHBvaW50IGlzIG5vdCBhY2Nlc3NpYmxlLCB3ZSBjYW4gdHJ5IHRvIGdldCB0aGUgaGFzaCBmcm9tXHJcbiAgICogZXhpc3RpbmcgY29udmVyc2lvbnMgdGhhdCBtYXRjaCB0aGUgY2xpY2tfaWRcclxuICAgKi9cclxuICBhc3luYyBmaW5kSGFzaEZyb21Db252ZXJzaW9ucyhkYjogYW55LCBjbGlja0lkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvbnZlcnNpb25zQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ2NvbnZlcnNpb25zJyk7XHJcbiAgICAgIGNvbnN0IGNvbnZlcnNpb24gPSBhd2FpdCBjb252ZXJzaW9uc0NvbGxlY3Rpb24uZmluZE9uZSh7IGNsaWNrX2lkOiBjbGlja0lkIH0pO1xyXG4gICAgICBcclxuICAgICAgaWYgKGNvbnZlcnNpb24gJiYgY29udmVyc2lvbi5jbGlja19oYXNoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBGb3VuZCBoYXNoIGZyb20gZXhpc3RpbmcgY29udmVyc2lvbjogJHtjb252ZXJzaW9uLmNsaWNrX2hhc2h9YCk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnNpb24uY2xpY2tfaGFzaDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gQWxzbyBjaGVjayBwb3N0YmFja3MgY29sbGVjdGlvblxyXG4gICAgICBjb25zdCBwb3N0YmFja3NDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbigncG9zdGJhY2tzJyk7XHJcbiAgICAgIGNvbnN0IHBvc3RiYWNrID0gYXdhaXQgcG9zdGJhY2tzQ29sbGVjdGlvbi5maW5kT25lKHsgY2xpY2tfaWQ6IGNsaWNrSWQgfSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAocG9zdGJhY2sgJiYgKHBvc3RiYWNrIGFzIGFueSkuY2xpY2tfaGFzaCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUgRm91bmQgaGFzaCBmcm9tIGV4aXN0aW5nIHBvc3RiYWNrOiAkeyhwb3N0YmFjayBhcyBhbnkpLmNsaWNrX2hhc2h9YCk7XHJcbiAgICAgICAgcmV0dXJuIChwb3N0YmFjayBhcyBhbnkpLmNsaWNrX2hhc2g7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBGYWlsZWQgdG8gZmluZCBoYXNoIGZyb20gY29udmVyc2lvbnM6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH0sXHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PSBBZmZpbGlhdGUgU2lnbnVwIEhlbHBlciA9PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFmZmlsaWF0ZUNvbnZlcnNpb24ocGFyYW1zOiB7XHJcbiAgY2xpY2tIYXNoOiBzdHJpbmc7XHJcbiAgZ29hbFR5cGVJZDogbnVtYmVyO1xyXG4gIGFmZmlsaWF0ZUlkPzogbnVtYmVyO1xyXG4gIG9mZmVySWQ/OiBudW1iZXI7XHJcbiAgZGVwb3NpdEFtb3VudD86IG51bWJlcjtcclxuICBzYWxlQW1vdW50PzogbnVtYmVyO1xyXG4gIHVuaXF1ZT86IHN0cmluZztcclxuICBpc1Rlc3Q/OiBib29sZWFuO1xyXG59KTogUHJvbWlzZTxhbnk+IHtcclxuICAvLyBGaXJzdCwgY2hlY2sgaWYgY29udmVyc2lvbiBhbHJlYWR5IGV4aXN0c1xyXG4gIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29udmVyc2lvbnNBUEkubGlzdCh7XHJcbiAgICBoYXNoOiBwYXJhbXMuY2xpY2tIYXNoLFxyXG4gICAgZ29hbF90eXBlX2lkOiBwYXJhbXMuZ29hbFR5cGVJZCxcclxuICAgIHBlcl9wYWdlOiAxLFxyXG4gIH0pO1xyXG5cclxuICBpZiAoZXhpc3RpbmcuZGF0YSAmJiBleGlzdGluZy5kYXRhLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnNvbGUubG9nKCdDb252ZXJzaW9uIGFscmVhZHkgZXhpc3RzIGZvciBoYXNoOicsIHBhcmFtcy5jbGlja0hhc2gpO1xyXG4gICAgcmV0dXJuIHsgXHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsIFxyXG4gICAgICBjb252ZXJzaW9uOiBleGlzdGluZy5kYXRhWzBdLFxyXG4gICAgICBpc0R1cGxpY2F0ZTogdHJ1ZSBcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyBDcmVhdGUgbmV3IGNvbnZlcnNpb25cclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBDb252ZXJzaW9uc0FQSS5jcmVhdGVPbmUoe1xyXG4gICAgaGFzaDogcGFyYW1zLmNsaWNrSGFzaCxcclxuICAgIGdvYWxfdHlwZV9pZDogcGFyYW1zLmdvYWxUeXBlSWQsXHJcbiAgICB1bmlxdWU6IHBhcmFtcy51bmlxdWUgfHwgJ0FQSScsXHJcbiAgICBkZXBvc2l0X2Ftb3VudDogcGFyYW1zLmRlcG9zaXRBbW91bnQsXHJcbiAgICBzYWxlX2Ftb3VudDogcGFyYW1zLnNhbGVBbW91bnQsXHJcbiAgICBpc190ZXN0OiBwYXJhbXMuaXNUZXN0LFxyXG4gIH0pO1xyXG5cclxuICByZXR1cm4geyBcclxuICAgIHN1Y2Nlc3M6IHRydWUsIFxyXG4gICAgY29udmVyc2lvbjogcmVzdWx0LFxyXG4gICAgaXNEdXBsaWNhdGU6IGZhbHNlXHJcbiAgfTtcclxufVxyXG5cclxuLy8gRXhwb3J0IGFsbCBBUElzXHJcbmV4cG9ydCBjb25zdCBQcml2YXRlQVBJID0ge1xyXG4gIENvbnZlcnNpb25zOiBDb252ZXJzaW9uc0FQSSxcclxuICBDbGlja3M6IENsaWNrc0FQSSxcclxuICBHb2FsczogR29hbHNBUEksXHJcbiAgUmlza01hbmFnZW1lbnQ6IFJpc2tNYW5hZ2VtZW50QVBJLFxyXG4gIFF1YWxpZmljYXRpb25zOiBRdWFsaWZpY2F0aW9uc0FQSSxcclxuICBjcmVhdGVBZmZpbGlhdGVDb252ZXJzaW9uLFxyXG4gIEdPQUxfVFlQRVMsXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQcml2YXRlQVBJO1xyXG5cclxuIl0sIm5hbWVzIjpbIkFQSV9CQVNFX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJQUklWQVRFX0FQSV9CQVNFX1VSTCIsIkFQSV9UT0tFTiIsIlBSSVZBVEVfQVBJX1RPS0VOIiwiR09BTF9UWVBFUyIsIlJFR0lTVFJBVElPTiIsIkRFUE9TSVQiLCJwcml2YXRlQXBpUmVxdWVzdCIsImVuZHBvaW50Iiwib3B0aW9ucyIsInVybCIsImNvbmZpZyIsImhlYWRlcnMiLCJyZXMiLCJmZXRjaCIsImRhdGEiLCJqc29uIiwib2siLCJFcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJlcnJvciIsImNvbnNvbGUiLCJDb252ZXJzaW9uc0FQSSIsImxpc3QiLCJwYXJhbXMiLCJxdWVyeSIsIlVSTFNlYXJjaFBhcmFtcyIsImFmZmlsaWF0ZV9pZCIsImFwcGVuZCIsInRvU3RyaW5nIiwib2ZmZXJfaWQiLCJnb2FsX3R5cGVfaWQiLCJoYXNoIiwiQXJyYXkiLCJpc0FycmF5Iiwiam9pbiIsImNyZWF0ZWRfYXRfZnJvbSIsImNyZWF0ZWRfYXRfdG8iLCJhZm1fZGF0ZV9mcm9tIiwiYWZtX2RhdGVfdG8iLCJwYWdlIiwicGVyX3BhZ2UiLCJnZXQiLCJpZCIsImNyZWF0ZSIsImNvbnZlcnNpb25zIiwibGVuZ3RoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjcmVhdGVPbmUiLCJyZXN1bHQiLCJ1cGRhdGUiLCJHb2Fsc0FQSSIsIm9mZmVySWQiLCJnb2FsSWQiLCJnb2FsIiwidXBkYXRlcyIsIlJpc2tNYW5hZ2VtZW50QVBJIiwiZ2V0QWZmaWxpYXRlUmlza3MiLCJhZmZpbGlhdGVJZCIsImNyZWF0ZUFmZmlsaWF0ZVJpc2siLCJyaXNrIiwiZ2V0T2ZmZXJSaXNrcyIsImNyZWF0ZU9mZmVyUmlzayIsIlF1YWxpZmljYXRpb25zQVBJIiwiZ2V0QWZmaWxpYXRlUXVhbGlmaWNhdGlvbnMiLCJjcmVhdGVBZmZpbGlhdGVRdWFsaWZpY2F0aW9uIiwicXVhbGlmaWNhdGlvbiIsImdldE9mZmVyUXVhbGlmaWNhdGlvbnMiLCJjcmVhdGVPZmZlclF1YWxpZmljYXRpb24iLCJDbGlja3NBUEkiLCJjcmVhdGVDbGlja0FuZEdldEhhc2giLCJ1cmxJZCIsInVybFBhcmFtcyIsInVybF9pZCIsIm9mZmVyVXJsIiwibG9nIiwicmVzcG9uc2UiLCJyZWRpcmVjdCIsImZpbmFsVXJsIiwidXJsT2JqIiwiVVJMIiwic3ViMSIsInNlYXJjaFBhcmFtcyIsImNsaWNrSWQiLCJzdWNjZXNzIiwiY2xpY2siLCJmaW5kIiwiYyIsIndhcm4iLCJnZXRIYXNoQnlDbGlja0lkIiwiZmluZEhhc2hGcm9tQ29udmVyc2lvbnMiLCJkYiIsImNvbnZlcnNpb25zQ29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJjb252ZXJzaW9uIiwiZmluZE9uZSIsImNsaWNrX2lkIiwiY2xpY2tfaGFzaCIsInBvc3RiYWNrc0NvbGxlY3Rpb24iLCJwb3N0YmFjayIsImNyZWF0ZUFmZmlsaWF0ZUNvbnZlcnNpb24iLCJleGlzdGluZyIsImNsaWNrSGFzaCIsImdvYWxUeXBlSWQiLCJpc0R1cGxpY2F0ZSIsInVuaXF1ZSIsImRlcG9zaXRfYW1vdW50IiwiZGVwb3NpdEFtb3VudCIsInNhbGVfYW1vdW50Iiwic2FsZUFtb3VudCIsImlzX3Rlc3QiLCJpc1Rlc3QiLCJQcml2YXRlQVBJIiwiQ29udmVyc2lvbnMiLCJDbGlja3MiLCJHb2FscyIsIlJpc2tNYW5hZ2VtZW50IiwiUXVhbGlmaWNhdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/private-api.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontact%2Froute&page=%2Fapi%2Fcontact%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontact%2Froute.ts&appDir=C%3A%5CUsers%5CUSER%5CDesktop%5CBarracudaMareting%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDesktop%5CBarracudaMareting&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();