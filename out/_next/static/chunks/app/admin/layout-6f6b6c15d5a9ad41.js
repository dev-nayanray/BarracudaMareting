(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{128:function(e,t,n){Promise.resolve().then(n.bind(n,7111))},7111:function(e,t,n){"use strict";n.d(t,{default:function(){return v}});var r=n(7821),s=n(8078),a=n(6379),i=n(4542),o=n(8504),c=n(8322);let l=(0,c.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var u=n(961);let h=(0,c.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var d=n(6922),f=n(2625),m=n(641);let g=(0,c.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var y=n(5283);let x=[{name:"Dashboard",href:"/admin/dashboard",icon:l},{name:"Contacts",href:"/admin/contacts",icon:u.Z},{name:"Settings",href:"/admin/settings",icon:h}];function p(e){var t;let{collapsed:n,onToggle:s}=e,c=(0,o.usePathname)(),{user:l,logout:u}=(0,a.Aj)();return(0,r.jsxs)("aside",{className:"fixed left-0 top-0 h-full bg-surface-200 border-r border-surface-300 z-40 transition-all duration-300 ".concat(n?"w-20":"w-64"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 border-b border-surface-300",children:[(0,r.jsxs)(i.default,{href:"/admin/dashboard",className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-primary-500 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(d.Z,{className:"w-6 h-6 text-black"})}),!n&&(0,r.jsx)("span",{className:"font-display font-bold text-xl text-text",children:"Affiiate"})]}),(0,r.jsx)("button",{onClick:s,className:"p-2 rounded-lg hover:bg-surface-300 transition-colors text-text-muted hover:text-text",children:n?(0,r.jsx)(f.Z,{className:"w-5 h-5"}):(0,r.jsx)(m.Z,{className:"w-5 h-5"})})]}),(0,r.jsx)("nav",{className:"p-4 space-y-2",children:x.map(e=>{let t=c===e.href||c.startsWith(e.href+"/");return(0,r.jsxs)(i.default,{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ".concat(t?"bg-primary-500 text-black":"text-text-muted hover:text-text hover:bg-surface-300"),children:[(0,r.jsx)(e.icon,{className:"w-5 h-5 flex-shrink-0 ".concat(t?"text-black":"")}),!n&&(0,r.jsx)("span",{className:"font-medium",children:e.name})]},e.name)})}),(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-surface-300",children:[l&&(0,r.jsxs)("div",{className:"flex items-center gap-3 ".concat(n?"justify-center":""),children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-500/20 flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("span",{className:"text-primary-500 font-bold",children:(null===(t=l.name)||void 0===t?void 0:t.charAt(0).toUpperCase())||"A"})}),!n&&(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-text truncate",children:l.name}),(0,r.jsx)("p",{className:"text-sm text-text-muted truncate",children:l.email})]})]}),(0,r.jsx)(y.Z,{variant:"ghost",size:"sm",onClick:u,className:"w-full mt-3 ".concat(n?"px-0 justify-center":""),leftIcon:(0,r.jsx)(g,{className:"w-4 h-4"}),children:!n&&"Logout"})]})]})}function v(e){let{children:t}=e,[n,i]=(0,s.useState)(!1);return(0,r.jsx)(a.IA,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(p,{collapsed:n,onToggle:()=>i(!n)}),(0,r.jsx)("main",{className:"min-h-screen transition-all duration-300 ".concat(n?"ml-20":"ml-64"," p-6"),children:t})]})})}},5283:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7821),s=n(2605);let a={primary:"bg-primary-500 text-background hover:bg-primary-400 hover:shadow-gold",secondary:"bg-surface-200 text-text hover:bg-surface-300",outline:"border-2 border-primary-500 text-primary-500 hover:bg-primary-500 hover:text-background",ghost:"text-text hover:bg-surface-200"},i={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};function o(e){let{children:t,variant:n="primary",size:o="md",leftIcon:c,rightIcon:l,className:u,onClick:h,type:d="button",...f}=e;return(0,r.jsxs)("button",{type:d,onClick:h,className:(0,s.W)("inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-300 ease-out","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-background","hover:-translate-y-0.5 hover:shadow-lg","active:translate-y-0 active:shadow-none",a[n],i[o],u),...f,children:[c&&(0,r.jsx)("span",{className:"mr-2",children:c}),t,l&&(0,r.jsx)("span",{className:"ml-2",children:l})]})}},6379:function(e,t,n){"use strict";n.d(t,{Aj:function(){return c},IA:function(){return o}});var r=n(7821),s=n(8078),a=n(5758);let i=(0,s.createContext)(null);function o(e){let{children:t}=e,[n,o]=(0,s.useState)(null),[c,l]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{if(!a.Z.getToken()){l(!1);return}try{let e=await a.Z.getProfile();e.success?o(e.data):a.Z.logout()}catch(e){console.error("Auth check failed:",e),a.Z.logout()}finally{l(!1)}})()},[]);let d=(0,s.useCallback)(async(e,t)=>{h(null),l(!0);try{let n=await a.Z.login(e,t);if(n.success)return o(n.data.user),{success:!0};return h(n.message),{success:!1,message:n.message}}catch(t){let e=t.message||"Login failed";return h(e),{success:!1,message:e}}finally{l(!1)}},[]),f=(0,s.useCallback)(async(e,t,n)=>{h(null),l(!0);try{let r=await a.Z.register(e,t,n);if(r.success)return o(r.data.user),{success:!0};return h(r.message),{success:!1,message:r.message}}catch(t){let e=t.message||"Registration failed";return h(e),{success:!1,message:e}}finally{l(!1)}},[]),m=(0,s.useCallback)(()=>{a.Z.logout(),o(null),h(null)},[]),g=(0,s.useCallback)(()=>{h(null)},[]);return(0,r.jsx)(i.Provider,{value:{user:n,loading:c,error:u,isAuthenticated:!!n,login:d,register:f,logout:m,clearError:g},children:t})}function c(){let e=(0,s.useContext)(i);if(!e)throw Error("useAdmin must be used within an AdminProvider");return e}},5758:function(e,t,n){"use strict";let r=n(2949).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api";class s{setToken(e){this.token=e,localStorage.setItem("admin_token",e)}getToken(){return this.token||(this.token=localStorage.getItem("admin_token")),this.token}clearToken(){this.token=null,localStorage.removeItem("admin_token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(r).concat(e),s=this.getToken(),a={headers:{"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)},...t.headers},...t};try{let e=await fetch(n,a),t=await e.json();if(!e.ok)throw Error(t.message||"API request failed");return t}catch(t){throw console.error("API Error [".concat(e,"]:"),t),t}}async login(e,t){let n=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return n.success&&n.data.token&&this.setToken(n.data.token),n}async register(e,t,n){let r=await this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t,name:n})});return r.success&&r.data.token&&this.setToken(r.data.token),r}async getProfile(){return this.request("/auth/me")}async changePassword(e,t){return this.request("/auth/password",{method:"PUT",body:JSON.stringify({currentPassword:e,newPassword:t})})}logout(){this.clearToken()}async getContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/admin/contacts".concat(t?"?".concat(t):""))}async getContactStats(){return this.request("/admin/contacts/stats")}async getContact(e){return this.request("/admin/contacts/".concat(e))}async updateContact(e,t){return this.request("/admin/contacts/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteContact(e){return this.request("/admin/contacts/".concat(e),{method:"DELETE"})}async exportContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request("/admin/contacts/export",{method:"POST",body:JSON.stringify(e)})}async getSettings(){return this.request("/admin/settings")}async updateSettings(e){return this.request("/admin/settings",{method:"PUT",body:JSON.stringify(e)})}async getDashboard(){return this.request("/admin/settings/dashboard")}async resetSettings(){return this.request("/admin/settings/reset",{method:"POST"})}constructor(){this.token=null}}let a=new s;t.Z=a},6922:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(8322).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},8504:function(e,t,n){"use strict";var r=n(3226);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},2949:function(e,t,n){"use strict";var r,s;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(3862)},3862:function(e){!function(){var t={229:function(e){var t,n,r,s=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c=[],l=!1,u=-1;function h(){l&&r&&(l=!1,r.length?c=r.concat(c):u=-1,c.length&&d())}function d(){if(!l){var e=o(h);l=!0;for(var t=c.length;t;){for(r=c,c=[];++u<t;)r&&r[u].run();u=-1,t=c.length}r=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var a=n[e]={exports:{}},i=!0;try{t[e](a,a.exports,r),i=!1}finally{i&&delete n[e]}return a.exports}r.ab="//";var s=r(229);e.exports=s}()}},function(e){e.O(0,[751,115,364,744],function(){return e(e.s=128)}),_N_E=e.O()}]);