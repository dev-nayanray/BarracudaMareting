(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[527],{3560:function(e,t,s){Promise.resolve().then(s.bind(s,7383))},7383:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var a=s(7821),l=s(8078),c=s(8504),r=s(9578),n=s(8322);let i=(0,n.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var d=s(2828);let o=(0,n.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var x=s(6379),u=s(5758),m=s(1996);let h=(0,n.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var p=s(2531),f=s(4811);let b=(0,n.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var j=s(6922);let v=(0,n.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var y=s(2348);let N=(0,n.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),g=(0,n.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var w=s(5283),k=s(4660),C=s(4331);let Z=e=>{let{status:t}=e,s={new:{color:"bg-blue-500/20 text-blue-400",icon:m.Z,label:"New"},contacted:{color:"bg-yellow-500/20 text-yellow-400",icon:h,label:"Contacted"},qualified:{color:"bg-accent-green/20 text-accent-green",icon:p.Z,label:"Qualified"},rejected:{color:"bg-accent-red/20 text-accent-red",icon:o,label:"Rejected"}},l=s[t]||s.new,c=l.icon;return(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ".concat(l.color),children:[(0,a.jsx)(c,{className:"w-3.5 h-3.5"}),l.label]})};function S(e){let{contacts:t=[],loading:s=!1,onView:c,onEdit:r,onDelete:n}=e,[i,d]=(0,l.useState)(""),[o,x]=(0,l.useState)(""),[u,m]=(0,l.useState)(""),[h,p]=(0,l.useState)(null),w=t.filter(e=>{let t=!i||e.name.toLowerCase().includes(i.toLowerCase())||e.email.toLowerCase().includes(i.toLowerCase())||e.company.toLowerCase().includes(i.toLowerCase()),s=!o||e.type===o,a=!u||e.status===u;return t&&s&&a});return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(k.Z,{placeholder:"Search contacts...",value:i,onChange:e=>d(e.target.value),leftIcon:(0,a.jsx)(f.Z,{className:"w-4 h-4"})})}),(0,a.jsx)("div",{className:"w-full md:w-48",children:(0,a.jsx)(C.Z,{options:[{value:"",label:"All Types"},{value:"publisher",label:"Publisher"},{value:"advertiser",label:"Advertiser"}],value:o,onChange:e=>x(e.target.value)})}),(0,a.jsx)("div",{className:"w-full md:w-48",children:(0,a.jsx)(C.Z,{options:[{value:"",label:"All Status"},{value:"new",label:"New"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"rejected",label:"Rejected"}],value:u,onChange:e=>m(e.target.value)})})]}),(0,a.jsx)("div",{className:"card overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-surface-100 border-b border-surface-300",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Contact"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Company"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-surface-300",children:s?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"6",className:"px-6 py-12 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3 text-text-muted",children:[(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"}),"Loading contacts..."]})})}):0===w.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"6",className:"px-6 py-12 text-center text-text-muted",children:"No contacts found"})}):w.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-surface-100/50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-500/10 flex items-center justify-center",children:(0,a.jsx)(b,{className:"w-5 h-5 text-primary-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-text",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-text-muted",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-text",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 text-text-muted"}),e.company]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ".concat("publisher"===e.type?"bg-secondary-500/20 text-secondary-400":"bg-primary-500/20 text-primary-400"),children:"publisher"===e.type?"Publisher":"Advertiser"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(Z,{status:e.status||"new"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-text-muted text-sm",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>p(h===e.id?null:e.id),className:"p-2 rounded-lg hover:bg-surface-300 text-text-muted hover:text-text transition-colors",children:(0,a.jsx)(v,{className:"w-4 h-4"})}),h===e.id&&(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-40 bg-surface-200 border border-surface-300 rounded-xl shadow-lg z-10 py-1",children:[(0,a.jsxs)("button",{onClick:()=>{null==c||c(e),p(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-text hover:bg-surface-300 transition-colors",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"}),"View"]}),(0,a.jsxs)("button",{onClick:()=>{null==r||r(e),p(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-text hover:bg-surface-300 transition-colors",children:[(0,a.jsx)(N,{className:"w-4 h-4"}),"Edit"]}),(0,a.jsxs)("button",{onClick:()=>{null==n||n(e),p(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-accent-red hover:bg-surface-300 transition-colors",children:[(0,a.jsx)(g,{className:"w-4 h-4"}),"Delete"]})]})]})})})]},e.id))})]})})}),!s&&w.length>0&&(0,a.jsxs)("p",{className:"text-sm text-text-muted",children:["Showing ",w.length," contact",1!==w.length?"s":""]})]})}s(3196);var M=s(5579);let L=[{value:"new",label:"New"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"rejected",label:"Rejected"}];function A(){let e=(0,c.useRouter)(),{isAuthenticated:t,loading:s}=(0,x.Aj)(),[n,m]=(0,l.useState)([]),[h,p]=(0,l.useState)(!0),[f,b]=(0,l.useState)(null),[j,v]=(0,l.useState)(null),[y,N]=(0,l.useState)(!1),[g,k]=(0,l.useState)(""),[Z,A]=(0,l.useState)(""),[F,q]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s||t||e.push("/admin/login")},[t,s,e]);let R=async()=>{try{p(!0),b(null);let e=await u.Z.getContacts();e.success?m(e.data):b(e.message||"Failed to fetch contacts")}catch(e){console.error("Failed to fetch contacts:",e),b("Failed to load contacts")}finally{p(!1)}};(0,l.useEffect)(()=>{t&&R()},[t]);let D=e=>{v(e),k(e.status||"new"),A(e.notes||""),N(!0)},E=async e=>{if(confirm("Are you sure you want to delete ".concat(e.name,"?")))try{let t=await u.Z.deleteContact(e.id);t.success?R():alert(t.message||"Failed to delete contact")}catch(e){console.error("Failed to delete contact:",e),alert("Failed to delete contact")}},z=async()=>{if(j){q(!0);try{let e=await u.Z.updateContact(j.id,{status:g,notes:Z});e.success?(N(!1),R()):alert(e.message||"Failed to update contact")}catch(e){console.error("Failed to update contact:",e),alert("Failed to update contact")}finally{q(!1)}}},V=async()=>{try{let e=await u.Z.exportContacts();if(e){let t=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="contacts-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s)}}catch(e){console.error("Failed to export contacts:",e),alert("Failed to export contacts")}};return s?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})}):t?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-text",children:"Contacts"}),(0,a.jsx)("p",{className:"text-text-muted",children:"Manage contact submissions from publishers and advertisers"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(w.Z,{variant:"outline",onClick:R,leftIcon:(0,a.jsx)(r.Z,{className:"w-4 h-4"}),children:"Refresh"}),(0,a.jsx)(w.Z,{variant:"outline",onClick:V,leftIcon:(0,a.jsx)(i,{className:"w-4 h-4"}),children:"Export CSV"})]})]}),f&&(0,a.jsxs)("div",{className:"p-4 bg-accent-red/10 border border-accent-red/30 rounded-xl flex items-center gap-3 text-accent-red",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),(0,a.jsx)("p",{children:f}),(0,a.jsx)("button",{onClick:()=>b(null),className:"ml-auto hover:opacity-70",children:(0,a.jsx)(o,{className:"w-5 h-5"})})]}),(0,a.jsx)(S,{contacts:n,loading:h,onView:D,onEdit:e=>{D(e)},onDelete:E}),y&&j&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-surface-200 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-surface-300",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-text",children:"Contact Details"}),(0,a.jsx)("button",{onClick:()=>N(!1),className:"p-2 hover:bg-surface-300 rounded-lg text-text-muted hover:text-text transition-colors",children:(0,a.jsx)(o,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Name"}),(0,a.jsx)("p",{className:"text-text font-medium",children:j.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Email"}),(0,a.jsx)("p",{className:"text-text",children:j.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Company"}),(0,a.jsx)("p",{className:"text-text",children:j.company})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Type"}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium ".concat("publisher"===j.type?"bg-secondary-500/20 text-secondary-400":"bg-primary-500/20 text-primary-400"),children:"publisher"===j.type?"Publisher":"Advertiser"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Messenger"}),(0,a.jsx)("p",{className:"text-text",children:j.messenger||"Not specified"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Username"}),(0,a.jsx)("p",{className:"text-text",children:j.username||"Not specified"})]})]}),j.message&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Message"}),(0,a.jsx)("p",{className:"text-text bg-surface-100 p-4 rounded-xl",children:j.message})]}),(0,a.jsxs)("div",{className:"text-sm text-text-muted",children:["Submitted on ",new Date(j.createdAt).toLocaleString()]}),(0,a.jsxs)("div",{className:"border-t border-surface-300 pt-6 space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-text",children:"Admin Actions"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Status"}),(0,a.jsx)(C.Z,{options:L,value:g,onChange:e=>k(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Notes"}),(0,a.jsx)(M.Z,{placeholder:"Add notes about this contact...",value:Z,onChange:e=>A(e.target.value),rows:3})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-surface-300",children:[(0,a.jsx)(w.Z,{variant:"ghost",onClick:()=>N(!1),children:"Cancel"}),(0,a.jsx)(w.Z,{variant:"primary",onClick:z,loading:F,children:"Save Changes"})]})]})})]}):null}},3196:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(7821),l=s(2605);function c(e){let{children:t,className:s,...c}=e;return(0,a.jsx)("div",{className:(0,l.W)("bg-surface-100/80 backdrop-blur-sm rounded-2xl border border-surface-200/50 p-6 transition-all duration-300",s),...c,children:t})}},4331:function(e,t,s){"use strict";var a=s(7821),l=s(8078),c=s(7897),r=s(4713);let n=(0,l.forwardRef)((e,t)=>{let{label:s,placeholder:l="Select an option",options:n=[],value:i,onChange:d,onBlur:o,name:x,id:u,error:m,disabled:h=!1,required:p=!1,className:f="",...b}=e,j=u||x||"select-".concat(Math.random().toString(36).substr(2,9));return(0,a.jsxs)("div",{className:"w-full",children:[s&&(0,a.jsxs)("label",{htmlFor:j,className:"block text-sm font-medium text-text mb-2",children:[s,p&&(0,a.jsx)("span",{className:"text-accent-red ml-1",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{ref:t,id:j,name:x,value:i,onChange:d,onBlur:o,disabled:h,required:p,className:(0,c.cn)("w-full px-4 py-3 bg-surface-200 border rounded-xl text-text appearance-none","cursor-pointer","focus:outline-none focus:ring-2 focus:ring-primary-500/20",m?"border-accent-red focus:border-accent-red":"border-surface-300 focus:border-primary-500",h&&"opacity-50 cursor-not-allowed","transition-all duration-200",f),...b,children:[l&&(0,a.jsx)("option",{value:"",disabled:!0,children:l}),n.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:(0,a.jsx)(r.Z,{className:"h-5 w-5 text-text-muted"})})]}),m&&(0,a.jsx)("p",{className:"mt-1 text-sm text-accent-red",children:m})]})});n.displayName="Select",t.Z=n},5579:function(e,t,s){"use strict";var a=s(7821),l=s(8078),c=s(7897);let r=(0,l.forwardRef)((e,t)=>{let{label:s,placeholder:l,value:r,onChange:n,onBlur:i,name:d,id:o,error:x,disabled:u=!1,required:m=!1,rows:h=4,maxLength:p,className:f="",...b}=e,j=o||d||"textarea-".concat(Math.random().toString(36).substr(2,9));return(0,a.jsxs)("div",{className:"w-full",children:[s&&(0,a.jsxs)("label",{htmlFor:j,className:"block text-sm font-medium text-text mb-2",children:[s,m&&(0,a.jsx)("span",{className:"text-accent-red ml-1",children:"*"})]}),(0,a.jsx)("textarea",{ref:t,id:j,name:d,placeholder:l,value:r,onChange:n,onBlur:i,disabled:u,required:m,rows:h,maxLength:p,className:(0,c.cn)("w-full px-4 py-3 bg-surface-200 border rounded-xl text-text resize-none","placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-primary-500/20",x?"border-accent-red focus:border-accent-red":"border-surface-300 focus:border-primary-500",u&&"opacity-50 cursor-not-allowed","transition-all duration-200",f),...b}),p&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-text-muted text-right",children:[(null==r?void 0:r.length)||0,"/",p]}),x&&(0,a.jsx)("p",{className:"mt-1 text-sm text-accent-red",children:x})]})});r.displayName="Textarea",t.Z=r},2531:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8322).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4713:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8322).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},1996:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8322).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},9578:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8322).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}},function(e){e.O(0,[987,115,364,744],function(){return e(e.s=3560)}),_N_E=e.O()}]);